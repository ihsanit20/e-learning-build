import{u as M}from"./coupon-CdrTD0zS.js";import{r as a,o as T,e as i,f as u,g as e,y as E,s as b,z as p,A as $,t as v,q as w,a3 as S,w as I,D as q,x as z,n as j,i as F,F as h,h as B,j as A}from"./index-CGxlq7hy.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"modal"},G={class:"max-w-4-xl bg-white p-4 rounded-lg space-y-2"},K={key:0},P={class:"flex items-center"},R={class:"w-10 h-full shrink-0 grow-0 flex justify-center items-center text-xl font-bold"},H={class:"col-start-1"},J={key:1},O={class:"col-start-1"},Q={class:"flex items-center"},W={class:"w-10 h-full shrink-0 grow-0 flex justify-center items-center text-xl font-bold"},X={class:"flex gap-4 col-span-full"},Y={__name:"AddCouponModal",emits:["close"],setup(D,{emit:k}){const c=k,y=M(),x=a(""),r=a("general"),m=a(""),n=a("percentage"),d=a(0),_=a(0),g=a(""),C=a(""),V=async()=>{await y.createCoupon({code:x.value,code_type:r.value,affiliate_user_id:m.value,discount_type:n.value,discount_value:_.value,commission_value:d.value,valid_from:g.value,valid_until:C.value}),c("close")};return T(()=>{}),(U,t)=>(i(),u("div",L,[e("div",G,[t[21]||(t[21]=e("h2",{class:"text-xl font-semibold"},"Add Coupon",-1)),t[22]||(t[22]=e("hr",{class:"col-span-full"},null,-1)),e("form",{onSubmit:E(V,["prevent"]),class:"grid md:grid-cols-2 gap-4"},[e("label",null,[t[9]||(t[9]=b(" Coupon code ")),p(e("input",{class:"input-1","onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),placeholder:"Coupon code",required:""},null,512),[[$,x.value]])]),r.value==="affiliate"?(i(),u("label",K,[t[10]||(t[10]=b(" Commission value ")),e("div",P,[p(e("input",{class:"input-1 text-right","onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),type:"number",required:""},null,512),[[$,d.value]]),e("div",R,v(n.value==="percentage"?"%":"TK"),1)])])):w("",!0),e("label",H,[t[12]||(t[12]=b(" Coupon code ")),p(e("select",{class:"input-1","onUpdate:modelValue":t[2]||(t[2]=s=>r.value=s)},t[11]||(t[11]=[e("option",{value:"general"},"General",-1),e("option",{value:"affiliate"},"Affiliate",-1)]),512),[[S,r.value]])]),r.value==="affiliate"?(i(),u("label",J,[t[13]||(t[13]=b(" User ID ")),p(e("input",{class:"input-1","onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),placeholder:"User ID",required:""},null,512),[[$,m.value]])])):w("",!0),e("label",O,[t[15]||(t[15]=b(" Discount Type ")),p(e("select",{class:"input-1","onUpdate:modelValue":t[4]||(t[4]=s=>n.value=s)},t[14]||(t[14]=[e("option",{value:"percentage"},"Percentage",-1),e("option",{value:"fixed"},"Fixed Amount",-1)]),512),[[S,n.value]])]),e("label",null,[t[16]||(t[16]=b(" Discount Amount ")),e("div",Q,[p(e("input",{class:"input-1 text-right","onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),placeholder:"Discount value",type:"number",required:""},null,512),[[$,_.value]]),e("div",W,v(n.value==="percentage"?"%":"TK"),1)])]),e("label",null,[t[17]||(t[17]=b(" Valid From ")),p(e("input",{class:"input-1","onUpdate:modelValue":t[6]||(t[6]=s=>g.value=s),placeholder:"Valid from",type:"date",required:""},null,512),[[$,g.value]])]),e("label",null,[t[18]||(t[18]=b(" Valid Until ")),p(e("input",{class:"input-1","onUpdate:modelValue":t[7]||(t[7]=s=>C.value=s),placeholder:"Valid until",type:"date",required:""},null,512),[[$,C.value]])]),t[20]||(t[20]=e("hr",{class:"col-span-full"},null,-1)),e("div",X,[t[19]||(t[19]=e("button",{type:"submit",class:"btn-2"},"Add",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=s=>c("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},Z={class:"modal"},ee={class:"modal-content space-y-2"},te={class:"flex gap-4"},le={__name:"DeleteCouponModal",props:["coupon"],emits:["close"],setup(D,{emit:k}){const c=D,y=k,x=M(),r=async()=>{await x.deleteCoupon(c.coupon.id),y("close")};return(m,n)=>(i(),u("div",Z,[e("div",ee,[n[3]||(n[3]=e("h2",null,"Delete Coupon",-1)),e("p",null,[n[1]||(n[1]=b("Are you sure you want to delete the coupon ")),e("strong",null,v(D.coupon.code),1),n[2]||(n[2]=b("?"))]),e("div",te,[e("button",{type:"button",class:"btn-2",onClick:r},"Delete"),e("button",{type:"button",onClick:n[0]||(n[0]=d=>y("close")),class:"btn-contrast"},"Cancel")])])]))}},se={class:"modal"},oe={class:"max-w-2xl z-50 card-bg p-4 md:p-8 space-y-2"},ne={class:"flex flex-wrap justify-between items-center gap-2"},ae={class:"border rounded-lg px-3 pt-2 pb-1 font-semibold text-black"},ie={class:"capitalize border rounded-lg px-3 pt-2 pb-1"},ue={key:0,class:"border rounded-lg px-3 pt-2 pb-1"},de={class:"border pt-2 pb-1 rounded-lg px-2"},re={class:"flex justify-center items-center gap-3"},pe={class:"flex items-center cursor-pointer"},ce={class:"flex items-center cursor-pointer"},ve={class:"grid md:grid-cols-2 gap-3"},me={class:"relative"},fe={class:"absolute top-2 right-3"},ye={key:0},be={class:"relative"},xe={class:"absolute top-2 right-3"},_e={class:"grid md:grid-cols-2 gap-3"},ge={class:"flex justify-center gap-4"},Ce={__name:"EditCouponModal",props:["coupon"],emits:["close"],setup(D,{emit:k}){const c=D,y=k,x=M(),r=a(""),m=a("general"),n=a(""),d=a("percentage"),_=a(0),g=a(0),C=a(""),V=a(""),U=o=>z(new Date(o),"yyyy-MM-dd"),t=o=>{r.value=o.code,m.value=o.code_type,n.value=o.affiliate_user_id,d.value=o.discount_type,_.value=o.discount_value,g.value=o.commission_value,C.value=U(o.valid_from),V.value=U(o.valid_until)};I(c.coupon,o=>{t(o)}),T(()=>{c.coupon&&t(c.coupon)});const s=async()=>{await x.updateCoupon(c.coupon.id,{discount_type:d.value,discount_value:_.value,commission_value:g.value,valid_from:C.value,valid_until:V.value}),y("close")};return(o,l)=>(i(),u("div",se,[e("div",oe,[l[16]||(l[16]=e("h2",{class:"title-lg"},"Edit Coupon",-1)),e("form",{onSubmit:E(s,["prevent"]),class:"space-y-4"},[e("div",ne,[e("p",ae,v(r.value),1),e("p",ie,"Type: "+v(m.value),1),m.value==="affiliate"?(i(),u("p",ue," User ID: "+v(n.value),1)):w("",!0)]),e("div",de,[l[10]||(l[10]=e("p",{class:"md:hidden text-gray-500"},"Discount type:",-1)),e("div",re,[l[9]||(l[9]=e("p",{class:"hidden md:block text-gray-500"},"Discount type:",-1)),e("label",pe,[p(e("input",{type:"radio","onUpdate:modelValue":l[0]||(l[0]=f=>d.value=f),value:"percentage",class:"form-radio"},null,512),[[q,d.value]]),l[7]||(l[7]=e("span",{class:"ml-2"},"Percentage",-1))]),e("label",ce,[p(e("input",{type:"radio","onUpdate:modelValue":l[1]||(l[1]=f=>d.value=f),value:"fixed",class:"form-radio"},null,512),[[q,d.value]]),l[8]||(l[8]=e("span",{class:"ml-2"},"Fixed Amount",-1))])])]),e("div",ve,[e("div",null,[l[11]||(l[11]=e("p",null,"Discount value",-1)),e("div",me,[p(e("input",{class:"input-1","onUpdate:modelValue":l[2]||(l[2]=f=>_.value=f),placeholder:"Discount value",type:"number",required:""},null,512),[[$,_.value]]),e("span",fe,v(d.value==="percentage"?"%":"Tk"),1)])]),m.value==="affiliate"?(i(),u("div",ye,[l[12]||(l[12]=e("p",null,"Commission value",-1)),e("div",be,[p(e("input",{class:"input-1","onUpdate:modelValue":l[3]||(l[3]=f=>g.value=f),placeholder:"Commission value",type:"number",required:""},null,512),[[$,g.value]]),e("span",xe,v(d.value==="percentage"?"%":"Tk"),1)])])):w("",!0)]),e("div",_e,[e("div",null,[l[13]||(l[13]=e("p",null,"Valid from",-1)),p(e("input",{class:"input-1","onUpdate:modelValue":l[4]||(l[4]=f=>C.value=f),placeholder:"Valid from",type:"date",required:""},null,512),[[$,C.value]])]),e("div",null,[l[14]||(l[14]=e("p",null,"Valid to",-1)),p(e("input",{class:"input-1","onUpdate:modelValue":l[5]||(l[5]=f=>V.value=f),placeholder:"Valid until",type:"date",required:""},null,512),[[$,V.value]])])]),e("div",ge,[l[15]||(l[15]=e("button",{type:"submit",class:"btn-2"},"Save",-1)),e("button",{type:"button",onClick:l[6]||(l[6]=f=>y("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},$e=N(Ce,[["__scopeId","data-v-e73471a2"]]),ke={class:"my-container space-y-2"},Ve={class:"flex justify-between"},we={class:"flex items-center gap-4"},De={class:"card-bg p-4"},Ue={key:0,class:"flex justify-center items-center"},Me={key:1},Ae={key:0,class:"table-auto w-full"},Te={class:"px-4 py-2"},Se={class:"px-4 py-2 text-center"},qe={class:"px-4 py-2 text-center"},je={key:0},Fe={key:1},Ee={class:"px-4 py-2"},ze={class:"px-4 py-2"},Ie={class:"px-4 py-2"},he={class:"flex justify-center gap-2"},Be=["onClick"],Ne={key:1,class:"text-red-500"},Pe={__name:"CouponList",setup(D){const k=M(),c=a(!1),y=a(!1),x=a(!1),r=a(null),m=a(!0),n=a("general"),d=()=>c.value=!0,_=()=>c.value=!1,g=t=>{r.value=t,y.value=!0},C=()=>y.value=!1,V=()=>x.value=!1,U=t=>z(new Date(t),"dd-MMM-yyyy");return T(async()=>{try{await k.fetchCoupons()}finally{m.value=!1}}),(t,s)=>(i(),u("div",ke,[e("div",Ve,[e("div",we,[e("button",{class:j(n.value==="general"?"btn-2":"btn-1"),type:"button",onClick:s[0]||(s[0]=o=>n.value="general")}," General Coupons ",2),e("button",{class:j(n.value==="affiliate"?"btn-2":"btn-1"),type:"button",onClick:s[1]||(s[1]=o=>n.value="affiliate")}," Affiliate Coupons ",2)]),e("button",{class:"btn-2",onClick:d},"Add Coupon")]),e("div",De,[m.value?(i(),u("div",Ue,s[2]||(s[2]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1)]))):(i(),u("div",Me,[F(k).coupons.length?(i(),u("table",Ae,[s[3]||(s[3]=e("thead",null,[e("tr",{class:"text-left"},[e("th",{class:"px-4 py-2"},"Code"),e("th",{class:"px-4 py-2 text-center"},"Discount Type"),e("th",{class:"px-4 py-2 text-center"},"Discount Value"),e("th",{class:"px-4 py-2"},"Valid From"),e("th",{class:"px-4 py-2"},"Valid Until"),e("th",{class:"px-4 py-2 text-center"},"Actions")])],-1)),e("tbody",null,[(i(!0),u(h,null,B(F(k).coupons.filter(o=>o.code_type===n.value),o=>(i(),u("tr",{key:o.id,class:"border-t"},[e("td",Te,v(o.code),1),e("td",Se,v(o.discount_type),1),e("td",qe,[b(v(o.discount_value)+" ",1),o.discount_type==="percentage"?(i(),u("span",je,"%")):(i(),u("span",Fe,"Tk"))]),e("td",Ee,v(U(o.valid_from)),1),e("td",ze,v(U(o.valid_until)),1),e("td",Ie,[e("div",he,[e("button",{onClick:l=>g(o),class:"btn-1"},"Edit",8,Be),w("",!0)])])]))),128))])])):(i(),u("p",Ne,"No coupons found"))]))]),c.value?(i(),A(Y,{key:0,class:"z-40",onClose:_})):w("",!0),y.value?(i(),A($e,{key:1,class:"z-40",coupon:r.value,onClose:C},null,8,["coupon"])):w("",!0),x.value?(i(),A(le,{key:2,class:"z-40",coupon:r.value,onClose:V},null,8,["coupon"])):w("",!0)]))}};export{Pe as default};
