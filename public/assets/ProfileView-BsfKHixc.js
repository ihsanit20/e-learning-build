import{l as C,d as l,f as E,e as D,r as B,o as g,g as x,a as e,t as d,b as o,z as M,w as N,m as S,p as u,v as r}from"./index-Lk6wOGQy.js";const A={class:"my-container max-w-xl"},z={class:"card-bg p-4 md:p-8 flex flex-col items-center relative"},L=e("h1",{class:"title-lg"},"My Profile",-1),R={class:"bg-gray-200 size-40 rounded-full overflow-hidden relative"},T=["src"],$={class:"absolute bottom-0 bg-black/30 w-full text-center p-1"},j={key:0,class:"space-y-2"},F={class:"title-md text-center"},q=e("strong",null,"Phone:",-1),G=e("strong",null,"Date of Birth:",-1),H=e("strong",null,"Email:",-1),I=e("strong",null,"Address:",-1),J=e("i",{class:"far fa-edit"},null,-1),K={key:1},O=e("h1",{class:"text-center title-md"},"Edit Profile",-1),Q={class:"flex gap-2 items-center"},W=e("label",{for:"name"},"Name:",-1),X={class:"flex gap-2 items-center"},Y=e("label",{for:"phone"},"Phone:",-1),Z={class:"flex gap-2 items-center"},ee=e("label",{for:"date_of_birth"},"Date of Birth:",-1),te={class:"flex gap-2 items-center"},se=e("label",{for:"email"},"Email:",-1),ae={class:"flex gap-2 items-center"},le=e("label",{for:"address"},"Address:",-1),oe=e("button",{class:"btn-2",type:"submit"},"Update",-1),de={__name:"ProfileView",setup(ne){const n=C(),c=l(!1),t=l({}),p=l(""),_=l(""),v=l(""),f=l(""),h=l(""),m=l(null),y=()=>{c.value=!0,p.value=t.value.name,_.value=t.value.phone,v.value=t.value.date_of_birth,f.value=t.value.email,h.value=t.value.address},w=()=>{c.value=!1},P=async()=>{const i={name:p.value,phone:_.value,date_of_birth:v.value,email:f.value,address:h.value};await n.updateProfile(i),c.value=!1,await b()},k=async()=>{if(!m.value)return;const i=new FormData;i.append("profile_photo",m.value),await n.uploadProfilePhoto(i),await b()},b=async()=>{n.user||await n.fetchUser(),t.value=n.user},U=E(()=>t.value.profile_photo?`https://api.ciademy.com//storage/${t.value.profile_photo}`:"");return D(async()=>{await b()}),(i,s)=>{const V=B("RouterLink");return g(),x("div",A,[e("div",z,[L,e("div",R,[e("img",{src:U.value,alt:"Profile Photo"},null,8,T),e("div",$,[e("input",{type:"file",onChange:s[0]||(s[0]=a=>m.value.value=a.target.files[0])},null,32),e("button",{class:"text-white text-sm",onClick:k},"Upload")])]),c.value?(g(),x("div",K,[O,e("form",{onSubmit:S(P,["prevent"]),class:"space-y-2"},[e("div",Q,[W,u(e("input",{id:"name","onUpdate:modelValue":s[1]||(s[1]=a=>p.value=a),type:"text",class:"input-1"},null,512),[[r,p.value]])]),e("div",X,[Y,u(e("input",{id:"phone","onUpdate:modelValue":s[2]||(s[2]=a=>_.value=a),type:"text",class:"input-1"},null,512),[[r,_.value]])]),e("div",Z,[ee,u(e("input",{id:"date_of_birth","onUpdate:modelValue":s[3]||(s[3]=a=>v.value=a),type:"date",class:"input-1"},null,512),[[r,v.value]])]),e("div",te,[se,u(e("input",{id:"email","onUpdate:modelValue":s[4]||(s[4]=a=>f.value=a),type:"email",class:"input-1"},null,512),[[r,f.value]])]),e("div",ae,[le,u(e("input",{id:"address","onUpdate:modelValue":s[5]||(s[5]=a=>h.value=a),type:"text",class:"input-1"},null,512),[[r,h.value]])]),e("div",{class:"flex justify-center gap-4"},[e("button",{class:"btn-3",onClick:w},"Cancel"),oe])],32)])):(g(),x("div",j,[e("p",F,d(t.value.name),1),e("p",null,[q,o(" "+d(t.value.phone),1)]),e("p",null,[G,o(" "+d(t.value.date_of_birth),1)]),e("p",null,[H,o(" "+d(t.value.email),1)]),e("p",null,[I,o(" "+d(t.value.address),1)]),e("button",{class:"btn-2 absolute top-4 right-4",onClick:y},[J,o("Edit ")]),e("div",null,[M(V,{class:"btn-2",to:"/profile/change-password"},{default:N(()=>[o(" Change Password ")]),_:1})])]))])])}}};export{de as default};
