import{D as j,E as b,r as q,d as c,e as u,f as e,t as f,m as S,y as T,q as y,F as U,g as A,p as g,M,v as k,w as D,x as I}from"./index-D4QG4fpw.js";import{_ as E}from"./TextEditor-BjBS_6US.js";const Q=j("question",{state:()=>({questions:[],error:null,loading:!1}),actions:{async index(n,a){var s,t;this.loading=!0,this.error=null;try{const o=await b.get(`/questions?chapter_id=${n}&question_type=${a}`);this.questions=(o==null?void 0:o.data)??[]}catch(o){this.error=((t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message)??"An error occurred while fetching questions"}finally{this.loading=!1}},async show(n){var a,s;this.error=null;try{const t=await b.get(`/questions/${n}`);return(t==null?void 0:t.data)??null}catch(t){throw this.error=((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)??"An error occurred while fetching the question",t}},async store(n){var a,s;this.error=null;try{const t=await b.post("/questions",n);this.questions.push(t==null?void 0:t.data)}catch(t){throw this.error=((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)??"An error occurred while creating the question",t}},async update(n,a){var s,t;this.error=null;try{const o=await b.put(`/questions/${n}`,a),i=this.questions.findIndex(p=>p.id===n);i!==-1&&(this.questions[i]=(o==null?void 0:o.data)??this.questions[i])}catch(o){throw this.error=((t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message)??"An error occurred while updating the question",o}},async delete(n){var a,s;this.error=null;try{await b.delete(`/questions/${n}`),this.questions=this.questions.filter(t=>t.id!==n)}catch(t){throw this.error=((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)??"An error occurred while deleting the question",t}}}}),N={class:"modal z-50"},B={class:"modal-content"},L={key:0,class:"text-red-500"},F={key:1,class:"text-red-500"},H={key:2,class:"grid py-2 gap-1.5 bg-gray-200 rounded-lg"},z=e("div",{class:"flex justify-between text-sm px-2"},[e("p",null,"Ans"),e("p",null,"Options"),e("p",null,"Delete")],-1),G=["onUpdate:modelValue"],J=["onUpdate:modelValue"],K={class:"grow-0 shrink-0 pt-1"},P=["onClick"],R={class:"grid"},W=e("h2",{class:"text-center md:text-left"},"Question Explanation",-1),X={class:"flex gap-4 justify-center"},Y=e("button",{type:"submit",class:"btn-2"},"Save Question",-1),ke={__name:"AddQuestionModal",props:{chapterId:{required:!0},questionType:String},emits:["close"],setup(n,{emit:a}){const s=a,t=n,o=Q(),i=q({}),p=q(""),l=q(""),r=q([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),w=()=>{r.value.push({option_text:"",is_correct:!1})},V=m=>{r.value.splice(m,1)},C=async()=>{i.value={};try{await o.store({chapter_id:t.chapterId,type:t.questionType,question_text:p.value,explanation:l.value,mcq_options:r.value}),p.value="",s("close")}catch(m){m.response&&m.response.data&&m.response.data.errors&&(i.value=m.response.data.errors)}};return(m,v)=>(c(),u("div",N,[e("div",B,[e("h2",null,f(n.questionType)+" Question",1),e("form",{onSubmit:S(C,["prevent"]),class:"space-y-4 w-full"},[T(E,{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=h=>p.value=h),placeholder:"Question Text",required:""},null,8,["modelValue"]),i.value.question_text?(c(),u("div",L,f(i.value.question_text[0]),1)):y("",!0),i.value.chapter_id?(c(),u("div",F,f(i.value.chapter_id[0]),1)):y("",!0),n.questionType==="MCQ"?(c(),u("div",H,[z,(c(!0),u(U,null,A(r.value,(h,d)=>(c(),u("div",{key:d,class:"flex items-center gap-4 px-4"},[g(e("input",{class:"grow-0 shrink-0",value:!0,name:"correct",type:"checkbox","onUpdate:modelValue":_=>h.is_correct=_},null,8,G),[[M,h.is_correct]]),g(e("input",{class:"input-1 text-black placeholder:italic bg-white",type:"text","onUpdate:modelValue":_=>h.option_text=_,placeholder:"Option",required:""},null,8,J),[[k,h.option_text]]),e("div",K,[e("i",{onClick:_=>V(d),class:"fa fa-trash text-red-700 cursor-pointer"},null,8,P)])]))),128)),e("div",{class:"flex justify-center items-center pt-0.5"},[e("button",{type:"button",onClick:w,class:"px-2 pt-1 border rounded bg-gray-300 border-gray-400"}," + Add Option ")])])):y("",!0),e("div",R,[W,g(e("textarea",{class:"input-1","onUpdate:modelValue":v[1]||(v[1]=h=>l.value=h),placeholder:"Question Explanation",required:""},null,512),[[k,l.value]])]),e("div",X,[Y,e("button",{type:"button",onClick:v[2]||(v[2]=h=>s("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},Z={key:0,class:"modal"},ee={class:"modal-content space-y-2"},te=e("h2",null,"Delete Question",-1),se={class:"py-2 space-y-1"},oe=e("hr",null,null,-1),ne=["innerHTML"],ie=e("hr",null,null,-1),ae={key:0,class:"text-red-500"},le={class:"flex gap-4"},Ve={__name:"DeleteQuestionModal",props:{question:{type:Object,required:!0,default:()=>({name:"",id:null})}},emits:["close"],setup(n,{emit:a}){const s=a,t=n,o=Q(),i=q({});D(()=>t.question,l=>{},{immediate:!0});const p=async()=>{i.value={};try{await o.delete(t.question.id),s("close")}catch(l){l.response&&l.response.data&&l.response.data.errors&&(i.value=l.response.data.errors)}};return(l,r)=>t.question?(c(),u("div",Z,[e("div",ee,[te,e("div",se,[I(" Are you sure you want to delete the question ID:"+f(n.question.id)+"? ",1),oe,e("div",{class:"overflow-hidden whitespace-pre-wrap line-clamp-3 italic",innerHTML:t.question.question_text},null,8,ne),ie]),i.value.chapter_id?(c(),u("div",ae,f(i.value.chapter_id[0]),1)):y("",!0),e("div",le,[e("button",{onClick:p,class:"btn-2"},"Delete"),e("button",{type:"button",onClick:r[0]||(r[0]=w=>s("close")),class:"btn-contrast"},"Cancel")])])])):y("",!0)}},re={class:"modal"},ce={class:"modal-content space-y-2 max-w-[720px] min-w-80 md:min-w-[480px] lg:min-w-[580px]"},ue=e("h2",null,"Edit Question",-1),de={key:0,class:"text-red-500"},pe={key:1,class:"text-red-500"},he={key:2,class:"grid py-2 gap-1.5 bg-gray-200 rounded-lg"},_e=e("div",{class:"flex justify-between text-sm px-2"},[e("p",null,"Ans"),e("p",null,"Options"),e("p",null,"Delete")],-1),me=["onUpdate:modelValue"],ve=["onUpdate:modelValue"],xe={class:"grow-0 shrink-0 pt-1"},qe=["onClick"],ye={class:"grid"},fe=e("h2",{class:"text-center md:text-left"},"Question Explanation",-1),ge={class:"flex gap-4 justify-center"},be=e("button",{type:"submit",class:"btn-2"},"Save Question",-1),Ce={__name:"EditQuestionModal",props:{question:{type:Object,required:!0},questionType:String},emits:["close"],setup(n,{emit:a}){var m,v,h;const s=a,t=n,o=Q(),i=q(((m=t.question)==null?void 0:m.question_text)||""),p=q(((v=t.question)==null?void 0:v.explanation)||""),l=q(((h=t.question)==null?void 0:h.mcq_options)||[]),r=q({}),w=()=>{l.value.push({option_text:"",is_correct:!1})},V=d=>{l.value.splice(d,1)};D(()=>t.question,d=>{d&&(i.value=d.question_text)},{immediate:!0});const C=async()=>{r.value={};try{await o.update(t.question.id,{question_text:i.value,chapter_id:t.question.chapter_id,explanation:p.value,mcq_options:l.value}),s("close")}catch(d){d.response&&d.response.data&&d.response.data.errors&&(r.value=d.response.data.errors)}};return(d,_)=>(c(),u("div",re,[e("div",ce,[ue,e("form",{onSubmit:S(C,["prevent"]),class:"space-y-4"},[T(E,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=x=>i.value=x),placeholder:"Question Text",required:""},null,8,["modelValue"]),r.value.question_text?(c(),u("div",de,f(r.value.question_text[0]),1)):y("",!0),r.value.chapter_id?(c(),u("div",pe,f(r.value.chapter_id[0]),1)):y("",!0),n.questionType==="MCQ"?(c(),u("div",he,[_e,(c(!0),u(U,null,A(l.value,(x,O)=>(c(),u("div",{key:O,class:"flex items-center gap-4 px-4"},[g(e("input",{class:"grow-0 shrink-0",value:!0,name:"correct",type:"checkbox","onUpdate:modelValue":$=>x.is_correct=$},null,8,me),[[M,x.is_correct]]),g(e("input",{class:"input-1 text-black placeholder:italic bg-white",type:"text","onUpdate:modelValue":$=>x.option_text=$,placeholder:"Option",required:""},null,8,ve),[[k,x.option_text]]),e("div",xe,[e("i",{onClick:$=>V(O),class:"fa fa-trash text-red-700 cursor-pointer"},null,8,qe)])]))),128)),e("div",{class:"flex justify-center items-center pt-0.5"},[e("button",{type:"button",onClick:w,class:"px-2 pt-1 border rounded bg-gray-300 border-gray-400"}," + Add Option ")])])):y("",!0),e("div",ye,[fe,g(e("textarea",{class:"input-1","onUpdate:modelValue":_[1]||(_[1]=x=>p.value=x),placeholder:"Question Explanation",required:""},null,512),[[k,p.value]])]),e("div",ge,[be,e("button",{type:"button",onClick:_[2]||(_[2]=x=>s("close")),class:"btn-contrast"},"Cancel")])],32)])]))}};export{ke as _,Ce as a,Ve as b,Q as u};
