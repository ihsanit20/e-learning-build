import{u as V,c as P,r as o,d as _,e as m,f as e,t as f,z as k,q as T,s as I,x as E,a as R,w as q,o as N,p as M,J,F as j,g as F,h as X,v as B,y as Y,A as D,B as z,j as G}from"./index-D1cIuKqz.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H=s=>(I("data-v-4f90f013"),s=s(),E(),s),K={key:0,class:"modal"},Q={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},W={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},Z=["src"],ee=H(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),se={class:"flex w-full text-center gap-4"},te={class:"text-center text-green-600"},le={class:"text-center text-red-600"},oe={class:"title-md"},ae={class:""},ne={class:"font-bold"},ce={class:""},ie={class:"title-sm"},de={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(s,{emit:h}){const a=s,t=V(),g=h,u=P(()=>t.courses.find(i=>i.id===a.course.id)),p=()=>{g("close")},r=o(null),x=o(""),y=o(""),w=i=>{const l=i.target.files[0];l&&l.size>2*1024*1024?(y.value="File should be less than 2MB",r.value=null,document.getElementById("file-input").value=""):(r.value=l,y.value="")},$=async()=>{if(!r.value)return;const i=new FormData;i.append("thumbnail",r.value);try{await t.uploadThumbnail(a.course.id,i),x.value="Thumbnail uploaded successfully!",r.value=null,document.getElementById("file-input").value=""}catch{y.value="An error occurred while uploading the thumbnail"}};return(i,l)=>s.isOpen?(_(),m("div",K,[e("div",Q,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:p},"X")]),e("div",W,[e("img",{class:"aspect-video object-cover rounded-lg",src:u.value.thumbnail,alt:"Thumbnail"},null,8,Z),ee,e("div",se,[e("input",{id:"file-input",type:"file",onChange:w,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:$},"Upload")]),e("p",te,f(x.value),1),e("p",le,f(y.value),1),e("h2",oe,f(u.value.title),1),e("p",ae,f(u.value.description),1),e("p",ne,[k(" Starting From: "),e("span",null,f(u.value.start_date),1)]),e("p",ce,[k(" Price: ৳ "),e("span",ie,f(u.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:p},"Close")])])])):T("",!0)}},ue=U(de,[["__scopeId","data-v-4f90f013"]]),C=s=>(I("data-v-80b1a3a4"),s=s(),E(),s),re={key:0,class:"modal"},pe={class:"card-bg p-4 md:p-8 w-full max-w-5xl h-2/3 mx-2"},ve=C(()=>e("h2",{class:"title-md text-center"},"Edit Course",-1)),_e={class:"overflow-y-scroll scrollbar space-y-2 bg-gray-100 p-2 rounded-md"},me=C(()=>e("p",null,"Course Category",-1)),he=C(()=>e("option",{disabled:"",value:""},"Select a Category",-1)),fe=["value"],be=C(()=>e("p",null,"Course Title",-1)),ge=C(()=>e("p",null,"Course Description",-1)),xe=C(()=>e("p",null,"Course Price",-1)),ye=C(()=>e("p",null,"Start Date",-1)),Ce=C(()=>e("p",null,"Course Thumbnail (Upload)",-1)),we={class:"flex gap-2 items-center"},$e=["src"],ke={class:"flex-1 space-y-2"},Me={class:"flex w-full text-center gap-4"},De=C(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),Se={class:"text-center text-green-600"},Oe={class:"text-center text-red-600"},Be={__name:"CourseEditModal",props:{course:Object,isOpen:Boolean},emits:["close","update"],setup(s,{emit:h}){const a=s,t=h,g=V(),u=R(),p=o(""),r=o(""),x=o(""),y=o(""),w=o(""),$=o(""),i=o(null),l=o(""),b=o("");q(()=>a.course,c=>{c&&(p.value=c.title||"",r.value=c.description||"",x.value=c.price||"",y.value=c.thumbnail||"",w.value=c.start_date||"",$.value=c.course_category||"")},{immediate:!0});const S=async()=>{const c={id:a.course.id,title:p.value,description:r.value,price:x.value,start_date:w.value,course_category:$.value};await g.updateCourse(a.course.id,c),t("update",c),t("close")},n=()=>{t("close")};N(async()=>{await u.fetchCategories()});const O=c=>{const d=c.target.files[0];d&&d.size>2*1024*1024?(b.value="File should be less than 2MB",i.value=null,document.getElementById("file-input").value=""):(i.value=d,b.value="")},L=async()=>{if(!i.value)return;const c=new FormData;c.append("thumbnail",i.value);try{await g.uploadThumbnail(a.course.id,c),l.value="Thumbnail uploaded successfully!",i.value=null,document.getElementById("file-input").value="",t("close")}catch{b.value="An error occurred while uploading the thumbnail"}};return(c,d)=>s.isOpen?(_(),m("div",re,[e("div",pe,[ve,e("div",_e,[me,M(e("select",{"onUpdate:modelValue":d[0]||(d[0]=v=>$.value=v),class:"input-1"},[he,(_(!0),m(j,null,F(X(u).categories,v=>(_(),m("option",{key:v.id,value:v.name},f(v.name),9,fe))),128))],512),[[J,$.value]]),be,M(e("input",{class:"input-1","onUpdate:modelValue":d[1]||(d[1]=v=>p.value=v),placeholder:"Title"},null,512),[[B,p.value]]),ge,M(e("textarea",{class:"input-1 w-full","onUpdate:modelValue":d[2]||(d[2]=v=>r.value=v),placeholder:"Description"},null,512),[[B,r.value]]),xe,M(e("input",{class:"input-1","onUpdate:modelValue":d[3]||(d[3]=v=>x.value=v),placeholder:"Price"},null,512),[[B,x.value]]),ye,M(e("input",{class:"input-1",type:"date","onUpdate:modelValue":d[4]||(d[4]=v=>w.value=v),placeholder:"Start Date"},null,512),[[B,w.value]]),Ce,e("div",we,[e("img",{class:"aspect-video object-cover h-28 rounded-md",src:y.value,alt:""},null,8,$e),e("div",ke,[e("div",Me,[e("input",{id:"file-input",type:"file",onChange:O,class:"input-1"},null,32),e("button",{class:"btn-2",onClick:L},"Upload")]),De,e("p",Se,f(l.value),1),e("p",Oe,f(b.value),1)])])]),e("div",{class:"flex justify-center gap-4"},[e("button",{class:"btn-2",onClick:S},"Save"),e("button",{class:"btn-contrast",onClick:n},"Close")])])])):T("",!0)}},Ve=U(Be,[["__scopeId","data-v-80b1a3a4"]]),A=s=>(I("data-v-47d6054d"),s=s(),E(),s),je={key:0,class:"modal"},Fe=A(()=>e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),Te=A(()=>e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),Ie={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(s,{emit:h}){const a=s,t=h,g=V(),u=async()=>{a.course&&(await g.deleteCourse(a.course.id),t("confirmDelete"),t("close"))},p=()=>{t("close")};return(r,x)=>s.isOpen?(_(),m("div",je,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[Fe,Te,e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:u},"Yes"),e("button",{class:"btn-2",onClick:p},"No")])])])):T("",!0)}},Ee=U(Ie,[["__scopeId","data-v-47d6054d"]]),Ue={class:"my-container space-y-2 relative"},ze={class:"flex justify-between items-center"},Ne=e("h1",{class:"title-lg text-center"},"Courses",-1),Ae={key:0,class:"space-y-2"},Le=G('<div class="md:col-span-1 rounded md:px-2"><div class="aspect-video bg-gray-200"></div></div><div class="md:col-span-3 md:px-2"><div class="h-6 bg-gray-200 rounded-full mb-2"></div><div class="h-4 bg-gray-200 rounded-full"></div></div><div class="md:col-span-1 flex items-center justify-center px-2"><div class="h-6 bg-gray-200 rounded-full w-20"></div></div><div class="md:col-span-3 flex justify-between items-center gap-2 md:px-2"><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div></div>',4),Pe=[Le],Re={key:1},qe={key:0,class:"text-center"},Je=e("p",null,"No courses available.",-1),Xe=[Je],Ye={key:1,class:"space-y-2"},Ge={class:"md:col-span-1 rounded md:px-2"},He=["src"],Ke={class:"md:col-span-3 md:px-2"},Qe={class:"title-md"},We={class:"line-clamp-1"},Ze={class:"md:col-span-1 flex items-center justify-center px-2"},es={class:"title-sm"},ss={class:"md:col-span-3 flex justify-between items-center gap-2 md:px-2"},ts=["onClick"],ls=e("i",{class:"fas fa-eye"},null,-1),os=["onClick"],as=e("i",{class:"far fa-edit"},null,-1),ns=["onClick"],cs=e("i",{class:"fas fa-trash-alt"},null,-1),is=[cs],ds=e("i",{class:"fas fa-plus"},null,-1),ps={__name:"CourseList",setup(s){const h=V(),a=o([]),t=o(null),g=o(!1),u=o(!1),p=o(!1),r=o(!0);N(async()=>{await h.fetchCourses(),a.value=h.courses,r.value=!1});const x=l=>{t.value=l,g.value=!0},y=l=>{t.value=l,u.value=!0},w=l=>{t.value=l,p.value=!0},$=async l=>{await h.updateCourse(l.id,l),a.value=h.courses},i=async()=>{await h.deleteCourse(t.value.id),a.value=h.courses};return(l,b)=>{const S=Y("RouterLink");return _(),m("div",Ue,[e("div",ze,[Ne,D(S,{class:"btn-2",to:"/new"},{default:z(()=>[k("Add New")]),_:1})]),r.value?(_(),m("div",Ae,[(_(),m(j,null,F(3,n=>e("div",{key:n,class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2 animate-pulse"},Pe)),64))])):(_(),m("div",Re,[a.value.length===0?(_(),m("div",qe,Xe)):(_(),m("ul",Ye,[(_(!0),m(j,null,F(a.value,n=>(_(),m("li",{class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2",key:n.id},[e("div",Ge,[e("img",{class:"aspect-video object-cover",src:n.thumbnail,alt:"Thumbnail"},null,8,He)]),e("div",Ke,[e("h2",Qe,f(n.title),1),e("p",We,f(n.description),1)]),e("div",Ze,[e("p",es,"Price: ৳"+f(n.price),1)]),e("div",ss,[e("button",{class:"btn-1 pb-2",onClick:O=>x(n)},[ls,k("View")],8,ts),e("button",{class:"btn-1 pb-2",onClick:O=>y(n)},[as,k("Edit")],8,os),e("button",{class:"btn-contrast pb-2",onClick:O=>w(n)},is,8,ns),D(S,{class:"btn-1",to:"/courses/"+n.id+"/modules"},{default:z(()=>[ds,k("Module ")]),_:2},1032,["to"])])]))),128))]))])),D(ue,{class:"absolute top-0 shadow-2xl w-full z-40",course:t.value,isOpen:g.value,onClose:b[0]||(b[0]=n=>g.value=!1)},null,8,["course","isOpen"]),D(Ve,{class:"absolute top-0 shadow-2xl w-full z-40",course:t.value,isOpen:u.value,onClose:b[1]||(b[1]=n=>u.value=!1),onUpdate:$},null,8,["course","isOpen"]),D(Ee,{class:"absolute top-0 shadow-2xl w-full z-40",course:t.value,isOpen:p.value,onClose:b[2]||(b[2]=n=>p.value=!1),onConfirmDelete:i},null,8,["course","isOpen"])])}}};export{ps as default};
