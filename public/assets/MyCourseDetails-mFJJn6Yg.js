import{x as n,y as o,z as e,C as i,r as _,a4 as L,O as j,A as g,I as U,W as I,d as W,P as Y,T as K,ad as X,F as E,G as P,M as C,U as Z,ab as ee,H as M,L as S,D as V,B as q,S as te}from"./vue-BP9P6hCg.js";import{_ as R}from"./TimeCountdown-BUSpPAYz.js";import{u as se}from"./course-exam-4rQhk0Rp.js";import{h as N,u as le,c as oe}from"./index-DBv0zzlw.js";import"./vendor-PJuFQbji.js";const ae={class:"table table-auto text-sm"},ne={class:"text-center px-3 py-1.5"},ie={class:"text-center px-3 py-1.5"},re={class:"text-center px-3 py-1.5"},de={class:"text-center px-3 py-1.5"},ce={class:"text-red-500"},ue={class:"text-center px-3 py-1.5"},me={class:"border-t font-bold"},xe={class:"text-center px-3 py-1.5"},pe={__name:"McqResult",props:{selectedExam:Object},setup(l){return(d,s)=>{var a,p,w,x,m,f,v,y,b,$,k,h;return o(),n("table",ae,[e("tr",null,[s[0]||(s[0]=e("td",{class:"text-right px-3 py-1.5"},"Total Question",-1)),e("td",ne,i((a=l.selectedExam)==null?void 0:a.exam_questions_count),1)]),e("tr",null,[s[1]||(s[1]=e("td",{class:"text-right px-3 py-1.5"},"Answered Question",-1)),e("td",ie,i((w=(p=l.selectedExam)==null?void 0:p.user_exam)==null?void 0:w.user_mcq_answers_count),1)]),e("tr",null,[s[2]||(s[2]=e("td",{class:"text-right px-3 py-1.5"},"Unanswered Question",-1)),e("td",re,i(((x=l.selectedExam)==null?void 0:x.exam_questions_count)-((f=(m=l.selectedExam)==null?void 0:m.user_exam)==null?void 0:f.user_mcq_answers_count)),1)]),e("tr",null,[s[3]||(s[3]=e("td",{class:"text-right px-3 py-1.5"},"Correct Mark",-1)),e("td",de,i((y=(v=l.selectedExam)==null?void 0:v.user_exam)==null?void 0:y.mcq_correct_mark),1)]),e("tr",ce,[s[4]||(s[4]=e("td",{class:"text-right px-3 py-1.5"},"Negative Mark",-1)),e("td",ue,i(($=(b=l.selectedExam)==null?void 0:b.user_exam)==null?void 0:$.mcq_negative_mark),1)]),e("tr",me,[s[5]||(s[5]=e("td",{class:"text-right px-3 py-1.5"},"Obtained Mark",-1)),e("td",xe,i((h=(k=l.selectedExam)==null?void 0:k.user_exam)==null?void 0:h.obtained_mark),1)])])}}},fe={class:"modal"},ve={class:"modal-content !px-3 !py-4 !max-w-sm"},_e={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},ye={class:"w-full flex justify-between items-center"},be={class:"title-lg text-center"},ge={class:"size-full grow shrink border-t py-4 overflow-y-auto scrollbar flex flex-col gap-4 justify-center items-center"},he={class:"w-full flex justify-between items-center"},ke={__name:"ExamResultModal",props:{selectedExam:Object},setup(l){const d=_(!1);return(s,a)=>(o(),n("div",fe,[e("div",ve,[e("div",_e,[e("div",ye,[e("h3",be,"Result of "+i(l.selectedExam.title),1),L(s.$slots,"default")]),e("div",ge,[l.selectedExam?(o(),j(pe,{key:0,selectedExam:l.selectedExam},null,8,["selectedExam"])):g("",!0),a[1]||(a[1]=e("hr",{class:"w-full"},null,-1)),e("div",he,[d.value?L(s.$slots,"answerSheet",{key:0}):(o(),j(R,{key:1,modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=p=>d.value=p),targetTime:l.selectedExam.result_publish_time,label:"Results are not yet published",class:"mx-auto items-center"},null,8,["modelValue","targetTime"]))])])])])]))}},we={key:0,class:"grow-0 shrink-0 border px-2 pt-1.5 pb-0.5 rounded-lg bg-blue-300/30 text-blue-600"},$e={__name:"MeritPosition",props:{courseId:String,examId:[String,Number]},setup(l){const d=l,s=_(null),a=se();U(async()=>{d.courseId&&d.examId&&(s.value=await a.fetchExam(d.courseId,d.examId))});const p=x=>{const m=["th","st","nd","rd"],f=x%100;return x+(m[(f-20)%10]||m[f]||m[0])},w=x=>{var m,f;if((f=(m=s.value)==null?void 0:m.user_exam)!=null&&f.is_practice){const v=Math.floor(x/10)*10+1,y=v+9;return`${p(v)} - ${p(y)}`}return p(x)};return(x,m)=>{var f,v,y,b;return(f=s.value)!=null&&f.user_exam?(o(),n("div",we,[I(i((v=s.value.user_exam)!=null&&v.is_practice?"Position: ":"Merit Position: ")+" ",1),e("b",null,i(w((b=(y=s.value)==null?void 0:y.user_exam)==null?void 0:b.position)),1)])):g("",!0)}}},Ee={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Ce={class:"w-full"},Me={class:"title-sm"},Se={key:0,class:"fas fa-check-circle text-green-700"},je={class:"flex justify-between gap-2 text-sm text-gray-400"},Ie={class:"flex items-center gap-2"},Pe={__name:"ModuleItemExam",props:{exam:Object},setup(l){const d=_(!1);return(s,a)=>(o(),n("div",Ee,[a[3]||(a[3]=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-file-alt"}),e("div",{class:"text-xs"},"Exam")],-1)),e("div",Ce,[e("h4",Me,[l.exam.is_completed?(o(),n("i",Se)):g("",!0),I(" "+i(l.exam.title),1)]),e("div",je,[e("div",Ie,[a[2]||(a[2]=e("i",{class:"far fa-clock"},null,-1)),e("p",null,[a[1]||(a[1]=e("span",null,"Duration:",-1)),I(" "+i(l.exam.duration),1)])])])]),d.value||l.exam.is_completed?L(s.$slots,"default",{key:0}):(o(),j(R,{key:1,modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=p=>d.value=p),targetTime:l.exam.opening_time},null,8,["modelValue","targetTime"]))]))}},Ve={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Le={class:"w-full"},Oe={class:"title-sm"},Te={class:"flex justify-between gap-2 text-sm text-gray-400"},qe={class:"flex items-center gap-2"},Re={__name:"ModuleItemMaterial",props:{material:Object},setup(l){const d=_(!1);return(s,a)=>(o(),n("div",Ve,[a[1]||(a[1]=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-download"}),e("div",{class:"text-xs"},"Material")],-1)),e("div",Le,[e("h4",Oe,i(l.material.title),1),e("div",Te,[e("div",qe,[e("p",null,i(l.material.description),1)])])]),d.value?L(s.$slots,"default",{key:0}):(o(),j(R,{key:1,modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=p=>d.value=p),targetTime:l.material.opening_time},null,8,["modelValue","targetTime"]))]))}},ze=W("courseProgress",{state:()=>({userId:null}),actions:{async completeLecture(l,d,s){try{return(await N.post(`/lectures/${d}/complete`,{course_id:l,is_completed:s})).data}catch(a){throw console.error("Error completing lecture:",a),a}},async getLectureCompletionStatus(l,d){try{return(await N.get(`/users/${l}/lectures/${d}/completion`)).data.is_completed}catch(s){throw console.error("Error fetching lecture completion status:",s),s}},setUserId(l){this.userId=l}}}),Ae={class:"my-container py-4"},De={key:0,class:"error"},Ne={key:1,class:"grid md:grid-cols-3 gap-4"},Ue={class:"md:col-span-2 space-y-4"},Be={class:"title-xl"},Qe={class:"relative pt-1"},Fe={class:"flex mb-2 items-center justify-between"},Ge={class:"text-right"},He={class:"text-xs font-semibold inline-block text-sky-600"},Je={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-sky-200"},We={class:"flex items-center gap-4 justify-between"},Ye=["href"],Ke={class:"space-y-4"},Xe=["onClick"],Ze={class:"text-center border-2 rounded-md p-1.5"},et={class:"flex-1"},tt={class:"line-clamp-1"},st={key:0},lt={class:""},ot={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},at={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},nt={class:"text-xs"},it={key:0},rt={key:1},dt={class:"flex-1"},ct={key:0,class:"fas fa-check-circle text-green-700"},ut={class:"text-gray-500 text-xs line-clamp-1"},mt=["onClick"],xt={class:"flex items-center text-sm pt-2"},pt=["id","checked","onChange","disabled"],ft=["for"],vt=["href"],_t=["onClick"],yt={key:2},bt={key:3,class:"fixed inset-0 flex items-center justify-center z-50"},gt={class:"card-bg items-center justify-center p-6 md:p-8 overflow-hidden transform transition-all sm:max-w-lg sm:w-full text-center mx-2"},ht={class:""},kt={class:"text-red-500"},wt={class:"flex gap-4"},$t={class:"modal-content !px-3 !py-4 !max-w-xl"},Et={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},Ct={class:"size-full grow shrink border-y py-4 overflow-y-auto scrollbar"},Mt={class:"w-full list-[square] space-y-3 list-outside pl-5"},St={class:"flex items-center gap-1 md:gap-2"},jt={class:"w-full flex justify-between gap-2"},Tt={__name:"MyCourseDetails",setup(l){const d=Y(),s=K(),a=le(),p=ze(),w=oe(),x=d.params.id,m=_(null),f=_(null),v=_([]),y=_(!1),b=_(!1),$=_(!1),k=_(null),h=_(null),O=_(!1),T=async()=>{await a.fetchPurchasedCourse(x),m.value=a.course};U(async()=>{try{await T()}catch(u){f.value=u.message||"An error occurred",u.response&&u.response.status===403&&s.push("/")}});const B=u=>{const t=v.value.indexOf(u);t===-1?v.value.push(u):v.value.splice(t,1)},Q=u=>{u.type==="video"?(w.endedCallback=async()=>{const t=await p.completeLecture(x,u.id,!0);u.is_completed=t.is_completed,await T()},w.showPlayer(u.link)):window.open(u.link,"_blank")},F=u=>(h.value=u,u.is_completed?$.value=!0:b.value=!0),G=async()=>{if(k.value)try{await p.completeLecture(x,k.value.id,!0),k.value.is_completed=!0,y.value=!1,await T()}catch(u){console.error("Error confirming lecture completion:",u)}},H=u=>{k.value=u,y.value=!0},J=async()=>{s.push({path:`/my/course/${x}/exam/${h.value.id}`})};return(u,t)=>{var z,A;return o(),n(E,null,[e("div",Ae,[f.value?(o(),n("div",De,i(f.value),1)):m.value?(o(),n("div",Ne,[e("div",Ue,[e("div",null,[e("h1",Be,i(m.value.title),1),t[7]||(t[7]=e("hr",{class:"my-2"},null,-1))]),e("div",null,[e("div",Qe,[e("div",Fe,[t[8]||(t[8]=e("div",null,[e("span",null,"Course Progress")],-1)),e("div",Ge,[e("span",He,i(m.value.progress)+"% ",1)])]),e("div",Je,[e("div",{style:X({width:m.value.progress+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-sky-600"},null,4)])])]),e("div",We,[t[10]||(t[10]=e("h2",{class:"title-lg -mb-1"},"Modules",-1)),m.value.facebook_group_link?(o(),n("a",{key:0,href:m.value.facebook_group_link,target:"_blank",class:"ml-auto btn-2 px-4 hover:text-white",onClick:t[0]||(t[0]=c=>c.stopPropagation())},t[9]||(t[9]=[e("i",{class:"fab fa-facebook text-lg"},null,-1),e("span",{class:"-mb-1 scale-110 ml-0.5"},"Group",-1)]),8,Ye)):g("",!0)]),e("ul",Ke,[(o(!0),n(E,null,P(m.value.modules,c=>(o(),n("li",{class:"card-bg p-4",key:c.id},[e("div",{onClick:r=>B(c.id),class:"flex flex-1 items-center gap-4 cursor-pointer"},[e("div",Ze,[e("div",{class:M(["text-xl font-bold text-orange-500",{"!text-gray-400":c.is_active==0}])},i(c.order),3),t[11]||(t[11]=e("div",{class:"text-xs md:text-sm"},"Module",-1))]),e("div",et,[e("h4",{class:M(["title-md",{"text-gray-400":c.is_active==0}])},i(c.title),3),e("p",tt,i(c.description),1)]),e("button",null,[e("i",{class:M(v.value.includes(c.id)?"fas fa-angle-up":"fas fa-angle-down")},null,2)])],8,Xe),v.value.includes(c.id)?(o(),n("div",st,[e("ul",lt,[(o(!0),n(E,null,P(c.lectures,r=>(o(),n("li",{class:"pt-6",key:r.id},[e("div",ot,[e("div",at,[e("i",{class:M(r.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",nt,[r.type==="virtual_platform"?(o(),n("p",it,"Video")):(o(),n("p",rt,"Lecture"))])]),e("div",dt,[e("h4",null,[r.is_completed?(o(),n("i",ct)):g("",!0),I(" "+i(r.title),1)]),e("p",ut,i(r.description),1)]),e("button",{onClick:C(D=>Q(r),["prevent"]),type:"button",class:"btn-2"},i(r.type==="video"?"Play Video":"Join Live"),9,mt)]),e("div",xt,[e("input",{type:"checkbox",id:`completed-${r.id}`,class:"form-checkbox h-3 w-3 text-sky-600 transition duration-150 ease-in-out",checked:r.is_completed,onChange:D=>H(r),disabled:r.is_completed},null,40,pt),e("label",{for:`completed-${r.id}`,class:"ml-2"}," Have you completed this lecture? ",8,ft)])]))),128)),(o(!0),n(E,null,P(c.materials,r=>(o(),n("li",{class:"pt-6",key:r.id},[V(Re,{material:r},{default:S(()=>[r.download_link?(o(),n("a",{key:0,href:r.download_link,class:"btn-2",download:""}," Download ",8,vt)):g("",!0)]),_:2},1032,["material"])]))),128)),(o(!0),n(E,null,P(c.exams,r=>(o(),n("li",{class:"pt-6",key:r.id},[V(Pe,{exam:r},{default:S(()=>[e("button",{onClick:C(D=>F(r),["prevent"]),type:"button",class:"btn-2"},i(r.is_completed?"result":"Open"),9,_t)]),_:2},1032,["exam"])]))),128))])])):g("",!0)]))),128))])])])):(o(),n("div",yt,"Loading...")),y.value?(o(),n("div",bt,[t[13]||(t[13]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),e("div",gt,[t[12]||(t[12]=e("h3",{class:"title-lg",id:"modal-title"},"Confirm Lecture Completion",-1)),e("div",ht,[e("p",kt,' Are you sure you have completed the lecture "'+i((z=k.value)==null?void 0:z.title)+'"? ',1)]),e("div",wt,[e("button",{onClick:G,type:"button",class:"btn-2"},"Yes"),e("button",{onClick:t[1]||(t[1]=c=>y.value=!1),type:"button",class:"btn-3"},"No")])])])):g("",!0)]),b.value?(o(),n("div",{key:0,class:"modal",onClick:t[4]||(t[4]=C(c=>b.value=!1,["self"]))},[e("div",$t,[e("div",Et,[t[17]||(t[17]=e("div",{class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},[e("h3",{class:"title-lg text-center",id:"modal-title"},"সাবধান!! গুরুত্বপূর্ণ তথ্য সমূহ")],-1)),e("div",Ct,[e("ul",Mt,[e("li",null," Exam এর সময়সীমা থাকবে "+i((A=h.value)==null?void 0:A.duration)+" মিনিট। এই সময়ের মধ্যে আপনাকে Exam সাবমিট করতে হবে। ",1),t[14]||(t[14]=e("li",null," Exam ওপেন করা (“Start Exam” বাটনে ক্লিক) মাত্র আপনার টাইমার চালু হয়ে যাবে। আপনি Exam থেকে বেরিয়ে গেলেও টাইমার চলতে থাকবে এবং টাইম শেষে সাবমিট করতে হবে। ",-1)),t[15]||(t[15]=e("li",null," Exam দেয়ার সময়ে যদি কোনো কারনে কানেকশন লস হয়ে যায় এবং আপনার টাইম শেষ হয়ে যায় আর সাবমিট করতে না পারেন, তাহলে আর Exam দেয়ার সুযোগ পাবেন না। ",-1))])]),e("form",{onSubmit:C(J,["prevent"]),class:"grow-0 shrink-0 w-full flex justify-end gap-1 md:gap-4"},[e("button",{onClick:t[2]||(t[2]=c=>b.value=!1),type:"button",class:"mr-auto btn-contrast px-1 md:px-4 text-xs md:text-base"}," Cancel "),e("label",St,[Z(e("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>O.value=c),type:"checkbox",required:""},null,512),[[ee,O.value]]),t[16]||(t[16]=e("span",{class:"pt-1 text-xs md:text-base"},"আমি পরীক্ষা শুরু করতে চাই",-1))]),e("button",{type:"submit",class:M(["btn-2 disabled:opacity-50 px-1 md:px-4 text-xs md:text-base",{"opacity-50":!O.value}])}," Start Exam ",2)],32)])])])):g("",!0),$.value?(o(),j(ke,{key:1,selectedExam:h.value,class:"modal",onClick:t[6]||(t[6]=C(c=>$.value=!1,["self"]))},{answerSheet:S(()=>[e("div",jt,[V($e,{courseId:q(x),examId:h.value.id},null,8,["courseId","examId"]),V(q(te),{to:{name:"My Exam AnswerSheet",params:{courseId:q(x),examId:h.value.id}},class:"btn-2 px-2 text-center ml-auto"},{default:S(()=>t[18]||(t[18]=[I(" Answer Sheet ")])),_:1},8,["to"])])]),default:S(()=>[e("button",{onClick:t[5]||(t[5]=c=>$.value=!1),type:"button",class:"btn-contrast"},"Close")]),_:1},8,["selectedExam"])):g("",!0)],64)}}};export{Tt as default};
