import{r as f,Q as S,x as o,y as n,z as e,C as d,H as D,A as h,X as g,I as T,D as x,U as V,ab as F,L as M,Z as N,F as $,G as B,W as I,B as L}from"./vue-CcEtAIOs.js";import{u as z,f as j}from"./index-B8R8XCyq.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-PJuFQbji.js";const K={class:"flex flex-wrap justify-center items-center border border-dashed p-0.5 rounded-2xl"},E=["title"],q={key:0,class:"animate-spin size-5 absolute top-[5px] left-[21px] text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},U={key:1,viewBox:"0 0 12 12",fill:"currentColor",class:"bg-green-400 text-white border-green-500 absolute -right-px -top-px size-8 border rounded-full"},P={key:2,viewBox:"0 0 12 12",fill:"none",class:"bg-red-400 text-white border-red-500 absolute -left-px top-1/2 -translate-y-1/2 size-8 border rounded-full"},O={__name:"StatusToggleButton",props:{course:{type:Object,required:!0},statusKey:{type:String,required:!0},label:{type:String,required:!0},toggleAction:{type:Function,required:!0}},setup(b){const p=b,c=f(!1);async function i(){c.value=!0,await p.toggleAction(p.course.id,!p.course[p.statusKey]),c.value=!1}const u=S(()=>p.course[p.statusKey]);return(r,a)=>(n(),o("div",K,[e("span",{class:D(["px-2 text-sm pt-1",u.value?"text-green-600":"text-red-600"])},d(b.label),3),e("span",{onClick:i,class:D(["cursor-pointer w-16 h-8 border rounded-full text-white relative",{"border-green-500 bg-green-200":!c.value&&u.value,"border-red-500 bg-red-200":!c.value&&!u.value}]),title:`Click to ${u.value?"Deactivate":"Activate"}`},[c.value?(n(),o("svg",q,a[0]||(a[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2\r
          5.291A7.962 7.962 0 014 12H0c0\r
          3.042 1.135 5.824 3 7.938l3-2.647z`},null,-1)]))):u.value?(n(),o("svg",U,a[1]||(a[1]=[e("path",{d:`M3.707 5.293a1 1 0 00-1.414\r
          1.414l1.414-1.414zM5 8l-.707.707a1\r
          1 0 001.414 0L5 8zm4.707-3.293a1 1\r
          0 00-1.414-1.414l1.414\r
          1.414zm-7.414 2l2 2\r
          1.414-1.414-2-2-1.414\r
          1.414zm3.414 2l4-4-1.414-1.414-4\r
          4 1.414 1.414z`},null,-1)]))):(n(),o("svg",P,a[2]||(a[2]=[e("path",{d:`M4 8l2-2m0 0l2-2M6 6L4\r
        4m2 2l2 2`,stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))],10,E)]))}},R={key:0,class:"modal"},X={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(b,{emit:p}){const c=b,i=p,u=z(),r=async()=>{c.course&&(await u.deleteCourse(c.course.id),i("confirmDelete"),i("close"))},a=()=>{i("close")};return(v,m)=>b.isOpen?(n(),o("div",R,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[m[0]||(m[0]=e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),m[1]||(m[1]=e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:r},"Yes"),e("button",{class:"btn-2",onClick:a},"No")])])])):h("",!0)}},G={key:0,class:"modal"},Q={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},W={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},Y=["src"],Z={class:"flex w-full text-center gap-4"},J={class:"text-center text-green-600"},ee={class:"text-center text-red-600"},te={class:"title-md"},se={class:"md:flex justify-between"},le=["innerHTML"],oe={key:0},ne={class:"font-bold text-sky-600"},ae={class:""},ie={class:"title-sm"},re={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(b,{emit:p}){const c=b,i=z(),u=p,r=S(()=>i.courses.find(l=>l.id===c.course.id)),a=()=>{u("close")},v=f(null),m=f(""),y=f(""),w=l=>{const t=l.target.files[0];t&&t.size>2*1024*1024?(y.value="File should be less than 2MB",v.value=null,document.getElementById("file-input").value=""):(v.value=t,y.value="")},C=async()=>{if(!v.value)return;const l=new FormData;l.append("thumbnail",v.value);try{await i.uploadThumbnail(c.course.id,l),m.value="Thumbnail uploaded successfully!",v.value=null,document.getElementById("file-input").value=""}catch{y.value="An error occurred while uploading the thumbnail"}},k=l=>j(new Date(l),"dd-MMM-yyyy");return(l,t)=>{var _,s;return b.isOpen?(n(),o("div",G,[e("div",Q,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:a},"X")]),e("div",W,[e("img",{class:"aspect-video object-cover rounded-lg",src:r.value.thumbnail,alt:"Thumbnail"},null,8,Y),t[5]||(t[5]=e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),e("div",Z,[e("input",{id:"file-input",type:"file",onChange:w,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:C},"Upload")]),e("p",J,d(m.value),1),e("p",ee,d(y.value),1),e("h2",te,d(r.value.title),1),e("div",se,[e("p",null,[t[0]||(t[0]=g(" Course Category: ")),e("b",null,d((s=(_=r.value)==null?void 0:_.category)==null?void 0:s.name),1)]),e("p",null,[t[1]||(t[1]=g(" Course Type: ")),e("b",null,d(r.value.course_type),1)])]),e("div",null,[t[2]||(t[2]=e("b",null,"Course Description:",-1)),e("div",{innerHTML:r.value.description,class:""},null,8,le)]),r.value.course_type==="Live Course"?(n(),o("p",oe,[t[3]||(t[3]=g(" Start Date: ")),e("span",ne,d(k(r.value.start_date)),1)])):h("",!0),e("p",ae,[t[4]||(t[4]=g(" Price: à§³ ")),e("span",ie,d(r.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:a},"Close")])])])):h("",!0)}}},de=H(re,[["__scopeId","data-v-d1fbb8fe"]]),ue={class:"my-container space-y-2 relative"},ce={class:"flex justify-between items-center"},pe={for:"hideInactive",class:"btn-4 border bg-white flex justify-center items-center gap-2 cursor-pointer"},ve={key:0,class:"space-y-2"},me={key:1},fe={key:0,class:"text-center"},be={key:1,class:"space-y-2"},ye={key:0,class:"card-bg md:py-4 p-4 md:p-2 grid md:grid-cols-5 md:divide-x-2"},ge={class:"md:col-span-1 px-2"},xe=["src"],_e={class:"font-bold text-sky-600 bg-sky-100 px-6 text-center rounded-b-md"},he={class:"md:col-span-4 md:px-4 space-y-2 flex flex-col justify-between"},we={class:"flex justify-start items-center w-full gap-3"},Ce={class:"text-xl font-semibold size-9 flex justify-center items-center border pt-1 rounded-xl"},ke={class:"title-md"},Me={class:"text-sm md:text-base"},$e={class:"flex justify-between"},De={class:"font-bold text-sky-600"},je={key:0},ze={class:"font-bold text-sky-600"},Ae={key:1,class:"bg-pink-50 px-3 rounded-full"},Be={class:"font-bold text-pink-600"},Le={class:"flex flex-wrap gap-4 items-center justify-between"},Oe={class:"flex justify-start items-center gap-2"},Se={class:"flex justify-end items-center gap-2"},Te=["onClick"],Ke={__name:"CourseList",setup(b){const p=l=>{const t=new Date(l);return j(t,"dd-MMM-yyyy")},c=l=>{const t=new Date(l);return j(t,"dd-MMM-yyyy, hh:mm a")},i=z(),u=f([]),r=f(!0),a=f(null),v=f(!1),m=f(!1),y=f(!0),w=async()=>{y.value=!0,await i.fetchCourses(),u.value=i.courses.sort((l,t)=>t.id-l.id),y.value=!1};T(async()=>{await w()});const C=l=>{a.value=l,v.value=!0},k=async()=>{await i.deleteCourse(a.value.id),u.value=i.courses};return(l,t)=>{const _=N("RouterLink");return n(),o("div",ue,[e("div",ce,[t[6]||(t[6]=e("h1",{class:"title-lg text-center"},"Courses",-1)),e("div",{onClick:w,class:"bg-white border flex justify-center items-center gap-2 btn-4 cursor-pointer"},[e("i",{class:D(["fas fa-sync text-lg",{"animate-spin":y.value}])},null,2),t[3]||(t[3]=e("span",{class:"pt-1 hidden md:inline"},"Reload",-1))]),e("label",pe,[V(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),id:"hideInactive"},null,512),[[F,r.value]]),t[4]||(t[4]=e("span",{class:"pt-1 hidden md:inline"},"Hide Inactive",-1))]),x(_,{class:"btn-2",to:{name:"NewCourse"}},{default:M(()=>t[5]||(t[5]=[g("Add New")])),_:1})]),y.value?(n(),o("div",ve,[(n(),o($,null,B(3,s=>e("div",{key:s,class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2 animate-pulse"},t[7]||(t[7]=[I('<div class="md:col-span-1 rounded md:px-2"><div class="aspect-video bg-gray-200"></div></div><div class="md:col-span-3 md:px-2"><div class="h-6 bg-gray-200 rounded-full mb-2"></div><div class="h-4 bg-gray-200 rounded-full"></div></div><div class="md:col-span-1 flex items-center justify-center px-2"><div class="h-6 bg-gray-200 rounded-full w-20"></div></div><div class="md:col-span-3 flex justify-between items-center gap-2 md:px-2"><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div></div>',4)]))),64))])):(n(),o("div",me,[u.value.length===0?(n(),o("div",fe,t[8]||(t[8]=[e("p",null,"No courses available.",-1)]))):(n(),o("ul",be,[(n(!0),o($,null,B(u.value,s=>{var A;return n(),o($,{key:s.id},[!r.value||s.is_active?(n(),o("li",ye,[e("div",ge,[e("img",{class:"aspect-video object-cover rounded-t-md",src:s.thumbnail,alt:"Thumbnail"},null,8,xe),e("p",_e,d((A=s==null?void 0:s.category)==null?void 0:A.name),1)]),e("div",he,[e("div",we,[e("span",Ce,d(s.id),1),e("h2",ke,d(s.title),1)]),e("p",Me,[t[9]||(t[9]=e("b",null,"Created at: ",-1)),g(d(c(s.created_at)),1)]),e("div",$e,[e("p",null,[t[10]||(t[10]=g(" Fee: ")),e("span",De,d(s.price>0?`${s.price} TK`:"Free"),1)]),s.course_type==="Live Course"?(n(),o("p",je,[t[11]||(t[11]=g(" Start Date: ")),e("span",ze,d(p(s.start_date)),1)])):(n(),o("p",Ae,[e("span",Be,d(s.course_type),1)]))]),e("div",Le,[e("div",Oe,[x(O,{course:s,statusKey:"is_active",label:"Active",toggleAction:L(i).toggleActiveStatus},null,8,["course","toggleAction"]),x(O,{course:s,statusKey:"is_published",label:"Publish",toggleAction:L(i).togglePublishStatus},null,8,["course","toggleAction"])]),e("div",Se,[e("button",{class:"btn-1 pb-2",onClick:Ve=>C(s)},t[12]||(t[12]=[e("i",{class:"fas fa-eye"},null,-1),e("p",{class:"hidden md:flex"},"View",-1)]),8,Te),x(_,{to:{name:"CourseEditForm",params:{id:s.id}},class:"btn-1 pb-2"},{default:M(()=>t[13]||(t[13]=[e("i",{class:"far fa-edit"},null,-1),e("p",{class:"hidden md:flex"},"Edit",-1)])),_:2},1032,["to"]),h("",!0),x(_,{class:"btn-1",to:{name:"ModuleList",params:{id:s.id}}},{default:M(()=>t[15]||(t[15]=[e("i",{class:"fas fa-plus"},null,-1),e("p",null,"Module",-1)])),_:2},1032,["to"])])])])])):h("",!0)],64)}),128))]))])),x(de,{class:"absolute top-0 shadow-2xl w-full z-40",course:a.value,isOpen:v.value,onClose:t[1]||(t[1]=s=>v.value=!1)},null,8,["course","isOpen"]),x(X,{class:"absolute top-0 shadow-2xl w-full z-40",course:a.value,isOpen:m.value,onClose:t[2]||(t[2]=s=>m.value=!1),onConfirmDelete:k},null,8,["course","isOpen"])])}}};export{Ke as default};
