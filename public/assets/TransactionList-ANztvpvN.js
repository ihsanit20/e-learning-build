import{G as C,H as L,r as d,o as D,c as v,d as c,e as r,f as e,p as M,v as N,F as S,g as B,t as l,q as V,C as j}from"./index-C9dQhS5a.js";const F=C("transaction",{state:()=>({transactions:[],error:null}),actions:{async fetchTransactions(){var p,i;try{const a=await L.get("/transactions");this.transactions=(a==null?void 0:a.data)??[]}catch(a){this.error=((i=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:i.message)??"An error occurred"}}}}),q={class:"max-w-4xl mx-auto py-4"},A={class:"flex items-center py-4"},E=e("h1",{class:"flex-1 text-2xl font-bold"},"Transaction List",-1),G={key:0,class:"flex justify-center items-center"},H=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1),U=[H],z={key:1,class:"overflow-x-auto card-bg"},I={class:"min-w-full divide-y divide-gray-400"},J=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," SL "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Course Title "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Purchased by "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Phone "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Purchased on ")])],-1),K={class:"bg-white divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap"},Q={class:"px-6 py-4 whitespace-nowrap"},R={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"flex justify-between mt-4"},Z=["disabled"],$=["disabled"],ee={key:2,class:"text-red-500 mt-4"},u=25,se={__name:"TransactionList",setup(p){const i=F(),a=d([]),h=d(""),_=d(null),f=d(!0),o=d(1);D(async()=>{try{await i.fetchTransactions(),a.value=i.transactions}catch(n){_.value=n}finally{f.value=!1}});const b=n=>{const t=new Date(n);return j(t,"dd-MMM-yyyy")},w=v(()=>[...a.value].sort((t,s)=>new Date(s.created_at)-new Date(t.created_at)).filter(t=>{const s=t.course.title.toLowerCase(),x=t.user.name.toLowerCase(),P=t.user.phone.toLowerCase(),y=h.value.toLowerCase();return s.includes(y)||x.includes(y)||P.includes(y)})),m=v(()=>{const n=(o.value-1)*u,t=n+u;return w.value.slice(n,t)}),g=v(()=>Math.ceil(w.value.length/u)),T=()=>{o.value<g.value&&o.value++},k=()=>{o.value>1&&o.value--};return(n,t)=>(c(),r("div",q,[e("div",A,[E,M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),type:"text",placeholder:"Title, Name or Phone",class:"input-1 w-80"},null,512),[[N,h.value]])]),f.value?(c(),r("div",G,U)):(c(),r("div",z,[e("table",I,[J,e("tbody",K,[(c(!0),r(S,null,B(m.value,(s,x)=>(c(),r("tr",{key:s.id},[e("td",O,l((o.value-1)*u+x+1),1),e("td",Q,l(s.course.title),1),e("td",R,l(s.user.name),1),e("td",W,l(s.user.phone),1),e("td",X,l(b(s.created_at)),1)]))),128))])])])),e("div",Y,[e("button",{onClick:k,disabled:o.value===1,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50"}," Previous ",8,Z),e("button",{onClick:T,disabled:o.value===g.value,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50"}," Next ",8,$)]),_.value?(c(),r("p",ee,l(_.value),1)):V("",!0)]))}};export{se as default};
