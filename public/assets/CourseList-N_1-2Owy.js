import{_ as V,u as B,f as P,d as a,o as C,g as $,a as e,t as h,b as k,s as T,x as F,y as I,B as R,e as j,p as M,C as X,F as E,h as z,i as Y,v as D,r as q,z as S,w as U}from"./index-B-DT9d2W.js";import{u as G}from"./category-DSz_56lO.js";const H=s=>(F("data-v-4f90f013"),s=s(),I(),s),J={key:0,class:"modal"},K={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},Q={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},W=["src"],Z=H(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),ee={class:"flex w-full text-center gap-4"},te={class:"text-center text-green-600"},se={class:"text-center text-red-600"},le={class:"title-md"},oe={class:""},ae={class:"font-bold"},ne={class:""},ce={class:"title-sm"},ie={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(s,{emit:v}){const c=s,l=B(),f=v,d=P(()=>l.courses.find(t=>t.id===c.course.id)),p=()=>{f("close")},_=a(null),b=a(""),m=a(""),y=t=>{const i=t.target.files[0];i&&i.size>2*1024*1024?(m.value="File should be less than 2MB",_.value=null,document.getElementById("file-input").value=""):(_.value=i,m.value="")},g=async()=>{if(!_.value)return;const t=new FormData;t.append("thumbnail",_.value);try{await l.uploadThumbnail(c.course.id,t),b.value="Thumbnail uploaded successfully!",_.value=null,document.getElementById("file-input").value=""}catch{m.value="An error occurred while uploading the thumbnail"}};return(t,i)=>s.isOpen?(C(),$("div",J,[e("div",K,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:p},"X")]),e("div",Q,[e("img",{class:"aspect-video object-cover rounded-lg",src:d.value.thumbnail,alt:"Thumbnail"},null,8,W),Z,e("div",ee,[e("input",{id:"file-input",type:"file",onChange:y,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:g},"Upload")]),e("p",te,h(b.value),1),e("p",se,h(m.value),1),e("h2",le,h(d.value.title),1),e("p",oe,h(d.value.description),1),e("p",ae,[k(" Starting From: "),e("span",null,h(d.value.start_date),1)]),e("p",ne,[k(" Price: ৳ "),e("span",ce,h(d.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:p},"Close")])])])):T("",!0)}},ue=V(ie,[["__scopeId","data-v-4f90f013"]]),x=s=>(F("data-v-08981e69"),s=s(),I(),s),de={key:0,class:"modal"},re={class:"card-bg p-4 md:p-8 w-full max-w-5xl h-2/3 mx-2"},pe=x(()=>e("h2",{class:"title-md text-center"},"Edit Course",-1)),_e={class:"overflow-y-scroll scrollbar space-y-2 bg-gray-100 p-2 rounded-md"},ve=x(()=>e("p",null,"Course Category",-1)),me=x(()=>e("option",{disabled:"",value:""},"Select a Category",-1)),he=["value"],fe=x(()=>e("p",null,"Course Title",-1)),be=x(()=>e("p",null,"Course Description",-1)),xe=x(()=>e("p",null,"Course Price",-1)),ye=x(()=>e("p",null,"Start Date",-1)),ge=x(()=>e("p",null,"Course Thumbnail (paste link or upload)",-1)),Ce={class:"flex gap-2 items-center"},$e=["src"],we={class:"flex-1 space-y-2"},Me={class:"flex w-full text-center gap-4"},ke=x(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),De={class:"text-center text-green-600"},Se={class:"text-center text-red-600"},Oe={__name:"CourseEditModal",props:{course:Object,isOpen:Boolean},emits:["close","update"],setup(s,{emit:v}){const c=s,l=v,f=B(),d=G(),p=a(""),_=a(""),b=a(""),m=a(""),y=a(""),g=a(""),t=a(null),i=a(""),w=a("");R(()=>c.course,n=>{n&&(p.value=n.title||"",_.value=n.description||"",b.value=n.price||"",m.value=n.thumbnail||"",y.value=n.start_date||"",g.value=n.course_category||"")},{immediate:!0});const r=async()=>{const n={id:c.course.id,title:p.value,description:_.value,price:b.value,thumbnail:m.value,start_date:y.value,course_category:g.value};await f.updateCourse(c.course.id,n),l("update",n),l("close")},O=()=>{l("close")};j(async()=>{await d.fetchCategories()});const L=n=>{const o=n.target.files[0];o&&o.size>2*1024*1024?(w.value="File should be less than 2MB",t.value=null,document.getElementById("file-input").value=""):(t.value=o,w.value="")},A=async()=>{if(!t.value)return;const n=new FormData;n.append("thumbnail",t.value);try{await f.uploadThumbnail(c.course.id,n),i.value="Thumbnail uploaded successfully!",t.value=null,document.getElementById("file-input").value=""}catch{w.value="An error occurred while uploading the thumbnail"}};return(n,o)=>s.isOpen?(C(),$("div",de,[e("div",re,[pe,e("div",_e,[ve,M(e("select",{"onUpdate:modelValue":o[0]||(o[0]=u=>g.value=u),class:"input-1"},[me,(C(!0),$(E,null,z(Y(d).categories,u=>(C(),$("option",{key:u.id,value:u.name},h(u.name),9,he))),128))],512),[[X,g.value]]),fe,M(e("input",{class:"input-1","onUpdate:modelValue":o[1]||(o[1]=u=>p.value=u),placeholder:"Title"},null,512),[[D,p.value]]),be,M(e("textarea",{class:"input-1","onUpdate:modelValue":o[2]||(o[2]=u=>_.value=u),placeholder:"Description"},null,512),[[D,_.value]]),xe,M(e("input",{class:"input-1","onUpdate:modelValue":o[3]||(o[3]=u=>b.value=u),placeholder:"Price"},null,512),[[D,b.value]]),ye,M(e("input",{class:"input-1",type:"date","onUpdate:modelValue":o[4]||(o[4]=u=>y.value=u),placeholder:"Start Date"},null,512),[[D,y.value]]),ge,e("div",Ce,[e("img",{class:"aspect-video object-cover h-28 rounded-md",src:m.value,alt:""},null,8,$e),e("div",we,[M(e("input",{class:"input-1","onUpdate:modelValue":o[5]||(o[5]=u=>m.value=u),placeholder:"Thumbnail URL"},null,512),[[D,m.value]]),e("div",Me,[e("input",{id:"file-input",type:"file",onChange:L,class:"input-1"},null,32),e("button",{class:"btn-2",onClick:A},"Upload")]),ke,e("p",De,h(i.value),1),e("p",Se,h(w.value),1)])])]),e("div",{class:"flex justify-center gap-4"},[e("button",{class:"btn-2",onClick:r},"Save"),e("button",{class:"btn-contrast",onClick:O},"Close")])])])):T("",!0)}},Be=V(Oe,[["__scopeId","data-v-08981e69"]]),N=s=>(F("data-v-47d6054d"),s=s(),I(),s),Ve={key:0,class:"modal"},Te=N(()=>e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),Fe=N(()=>e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),Ie={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(s,{emit:v}){const c=s,l=v,f=B(),d=async()=>{c.course&&(await f.deleteCourse(c.course.id),l("confirmDelete"),l("close"))},p=()=>{l("close")};return(_,b)=>s.isOpen?(C(),$("div",Ve,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[Te,Fe,e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:d},"Yes"),e("button",{class:"btn-2",onClick:p},"No")])])])):T("",!0)}},Ue=V(Ie,[["__scopeId","data-v-47d6054d"]]),je={class:"my-container space-y-2 relative"},Ee={class:"flex justify-between items-center"},ze=e("h1",{class:"title-lg text-center"},"Courses",-1),Ne={class:"space-y-2"},Le={class:"md:col-span-1 rounded md:px-2"},Ae=["src"],Pe={class:"md:col-span-3 md:px-2"},Re={class:"title-md"},Xe={class:"line-clamp-1"},Ye={class:"md:col-span-1 flex items-center justify-center px-2"},qe={class:"title-sm"},Ge={class:"md:col-span-3 flex justify-between items-center gap-2 md:px-2"},He=["onClick"],Je=e("i",{class:"fas fa-eye"},null,-1),Ke=["onClick"],Qe=e("i",{class:"far fa-edit"},null,-1),We=["onClick"],Ze=e("i",{class:"fas fa-trash-alt"},null,-1),et=[Ze],tt=e("i",{class:"fas fa-plus"},null,-1),ot={__name:"CourseList",setup(s){const v=B(),c=a([]),l=a(null),f=a(!1),d=a(!1),p=a(!1);j(async()=>{await v.fetchCourses(),c.value=v.courses});const _=t=>{l.value=t,f.value=!0},b=t=>{l.value=t,d.value=!0},m=t=>{l.value=t,p.value=!0},y=async t=>{await v.updateCourse(t.id,t),c.value=v.courses},g=async()=>{await v.deleteCourse(l.value.id),c.value=v.courses};return(t,i)=>{const w=q("RouterLink");return C(),$("div",je,[e("div",Ee,[ze,S(w,{class:"btn-2",to:"/new"},{default:U(()=>[k("Add New")]),_:1})]),e("ul",Ne,[(C(!0),$(E,null,z(c.value,r=>(C(),$("li",{class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2",key:r.id},[e("div",Le,[e("img",{class:"aspect-video object-cover",src:r.thumbnail,alt:"Thumbnail"},null,8,Ae)]),e("div",Pe,[e("h2",Re,h(r.title),1),e("p",Xe,h(r.description),1)]),e("div",Ye,[e("p",qe,"Price: ৳"+h(r.price),1)]),e("div",Ge,[e("button",{class:"btn-1 pb-2",onClick:O=>_(r)},[Je,k("View")],8,He),e("button",{class:"btn-1 pb-2",onClick:O=>b(r)},[Qe,k("Edit")],8,Ke),e("button",{class:"btn-contrast pb-2",onClick:O=>m(r)},et,8,We),S(w,{class:"btn-1",to:"/courses/"+r.id+"/modules"},{default:U(()=>[tt,k("Module ")]),_:2},1032,["to"])])]))),128))]),S(ue,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:f.value,onClose:i[0]||(i[0]=r=>f.value=!1)},null,8,["course","isOpen"]),S(Be,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:d.value,onClose:i[1]||(i[1]=r=>d.value=!1),onUpdate:y},null,8,["course","isOpen"]),S(Ue,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:p.value,onClose:i[2]||(i[2]=r=>p.value=!1),onConfirmDelete:g},null,8,["course","isOpen"])])}}};export{ot as default};
