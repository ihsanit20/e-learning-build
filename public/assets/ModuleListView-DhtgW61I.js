import{E as te,G as L,c as we,b as le,r as a,o as se,e as f,f as h,g as e,x as O,z as b,A as w,M as oe,F as q,h as T,t as M,i as I,n as C,p as j,w as Q,K as ae,L as ie,N as $e,B as V,s as U,D as N,m as ke,q as F,v as Me,u as Ee,j as Ce}from"./index-tP5fNA4T.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as de}from"./exam-Paj6IXd_.js";const R=te("module",{state:()=>({modules:[]}),actions:{async fetchModules(t){try{const o=await L.get(`/courses/${t}/modules`);this.modules=o.data}catch(o){console.error("Failed to fetch modules:",o)}},async addModule(t,o){try{const l=await L.post("/modules",{course_id:t,...o});this.modules.push(l.data)}catch(l){console.error("Failed to add module:",l)}},async updateModule(t,o){try{const l=await L.put(`/modules/${t}`,o),s=this.modules.findIndex(x=>x.id===t);s!==-1&&(this.modules[s]=l.data)}catch(l){console.error("Failed to update module:",l)}},async deleteModule(t){try{await L.delete(`/modules/${t}`),this.modules=this.modules.filter(o=>o.id!==t)}catch(o){console.error("Failed to delete module:",o)}}}}),De={key:0,class:"flex items-center justify-center"},je={class:"card-bg p-4 md:p-8 w-full max-w-6xl"},Ve=e("h2",{class:"title-md text-center"},"Add Module",-1),Se=e("p",null,"Title:",-1),Le=e("p",null,"Description:",-1),Ue={class:"grid md:grid-cols-5 gap-4"},qe=e("p",null,"Module Order:",-1),Te=e("p",null,"Duration (minutes):",-1),Oe=e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1),Ae=e("option",{value:""},"Select a prerequisite module",-1),ze=["value"],Fe={class:"flex items-center gap-2"},Ie=e("label",{for:"is_active",class:""},"Active",-1),Ne={class:"flex items-center gap-2"},Re=e("label",{for:"is_paid",class:""},"Paid",-1),Be=e("button",{type:"submit",class:"btn-2"},"Add",-1),Pe={__name:"ModuleAddModal",props:{isOpen:Boolean},emits:["add-module","close"],setup(t,{emit:o}){const l=o,s=R(),x=we(),d=le(),u=a(""),n=a(""),r=a(""),_=a(""),c=a(!1),i=a(!1),m=a(""),y=a("");se(()=>{s.fetchModules(d.params.id)});const $=async()=>{const v=d.params.id,g={title:u.value,description:n.value,order:r.value,duration:_.value,is_active:c.value,is_paid:i.value,prerequisite_module_id:m.value};try{await s.addModule(v,g),y.value="Module is added",u.value="",n.value="",r.value="",_.value="",c.value=!1,i.value=!1,m.value="",setTimeout(()=>{x.push(`/course-list/${v}/modules`)},2e3)}catch(k){console.error("Failed to add module:",k)}},p=()=>{l("close")};return(v,g)=>t.isOpen?(f(),h("div",De,[e("div",je,[Ve,e("form",{onSubmit:O($,["prevent"]),class:"space-y-2"},[e("div",null,[Se,b(e("input",{class:"input-1","onUpdate:modelValue":g[0]||(g[0]=k=>u.value=k),required:"",placeholder:"Title"},null,512),[[w,u.value]])]),e("div",null,[Le,b(e("textarea",{"onUpdate:modelValue":g[1]||(g[1]=k=>n.value=k),class:"input-1"},null,512),[[w,n.value]])]),e("div",Ue,[e("div",null,[qe,b(e("input",{class:"input-1","onUpdate:modelValue":g[2]||(g[2]=k=>r.value=k),type:"number"},null,512),[[w,r.value]])]),e("div",null,[Te,b(e("input",{class:"input-1","onUpdate:modelValue":g[3]||(g[3]=k=>_.value=k),type:"number"},null,512),[[w,_.value,void 0,{number:!0}]])]),e("div",null,[Oe,b(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":g[4]||(g[4]=k=>m.value=k),class:"input-1"},[Ae,(f(!0),h(q,null,T(I(s).modules,k=>(f(),h("option",{key:k.id,value:k.id},M(k.title),9,ze))),128))],512),[[oe,m.value]])]),e("div",Fe,[e("div",{onClick:g[5]||(g[5]=k=>c.value=!c.value),class:C(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":c.value}])},[e("div",{class:C(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":c.value}])},null,2)],2),Ie]),e("div",Ne,[e("div",{onClick:g[6]||(g[6]=k=>i.value=!i.value),class:C(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":i.value}])},[e("div",{class:C(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":i.value}])},null,2)],2),Re])]),e("div",{class:"flex justify-end gap-4"},[Be,e("button",{type:"button",onClick:p,class:"btn-contrast"},"Close")])],32)])])):j("",!0)}},S=t=>(ae("data-v-702f4702"),t=t(),ie(),t),Ye={key:0,class:"modal"},Qe={class:"card-bg p-4 md:p-8 w-full max-w-5xl mx-2"},Ge=S(()=>e("h2",{class:"title-md text-center"},"Edit Module",-1)),Ke=S(()=>e("p",null,"Title:",-1)),He=S(()=>e("p",null,"Description:",-1)),Je=S(()=>e("p",null,"Order:",-1)),We=S(()=>e("label",{for:"duration",class:"block text-sm font-medium text-gray-700"},"Duration (minutes):",-1)),Xe=S(()=>e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1)),Ze=S(()=>e("option",{value:""},"Select a prerequisite module",-1)),et=["value"],tt={class:"flex items-center gap-2"},lt=S(()=>e("label",{class:"ml-2 block text-sm text-gray-900"},"Active",-1)),st={class:"flex items-center gap-2"},ot=S(()=>e("label",{class:"ml-2 block text-sm text-gray-900"},"Paid",-1)),at={__name:"ModuleEditModal",props:{module:Object,isOpen:Boolean},emits:["update","close"],setup(t,{emit:o}){const l=t,s=o,x=R(),d=a(""),u=a(""),n=a(0),r=a(0),_=a(!1),c=a(!1),i=a(0);Q(()=>l.module,$=>{$&&(d.value=$.title||"",u.value=$.description||"",n.value=$.order||0,r.value=$.duration||0,_.value=$.is_active||!1,c.value=$.is_paid||!1,i.value=$.prerequisite_module_id||null)},{immediate:!0});const m=async()=>{const $={id:l.module.id,title:d.value,description:u.value,order:n.value,duration:r.value,is_active:_.value,is_paid:c.value,prerequisite_module_id:i.value};try{await x.updateModule(l.module.id,$),s("update",$),s("close")}catch(p){console.error("Error updating module:",p)}},y=()=>{s("close")};return($,p)=>t.isOpen?(f(),h("div",Ye,[e("div",Qe,[Ge,e("div",null,[Ke,b(e("input",{class:"input-1","onUpdate:modelValue":p[0]||(p[0]=v=>d.value=v),required:"",placeholder:"Title"},null,512),[[w,d.value]])]),e("div",null,[He,b(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=v=>u.value=v),class:"input-1"},null,512),[[w,u.value]])]),e("div",null,[Je,b(e("input",{class:"input-1","onUpdate:modelValue":p[2]||(p[2]=v=>n.value=v),type:"number"},null,512),[[w,n.value]])]),e("div",null,[We,b(e("input",{type:"number",id:"duration","onUpdate:modelValue":p[3]||(p[3]=v=>r.value=v),class:"input-1"},null,512),[[w,r.value,void 0,{number:!0}]])]),e("div",null,[Xe,b(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":p[4]||(p[4]=v=>i.value=v),class:"input-1"},[Ze,(f(!0),h(q,null,T(I(x).modules,v=>(f(),h("option",{key:v.id,value:v.id},M(v.title),9,et))),128))],512),[[oe,i.value]])]),e("div",tt,[e("div",{onClick:p[5]||(p[5]=v=>_.value=!_.value),class:C(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":_.value}])},[e("div",{class:C(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":_.value}])},null,2)],2),lt]),e("div",st,[e("div",{onClick:p[6]||(p[6]=v=>c.value=!c.value),class:C(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":c.value}])},[e("div",{class:C(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":c.value}])},null,2)],2),ot]),e("div",{class:"flex justify-center gap-4"},[e("button",{onClick:m,class:"btn-2"},"Save"),e("button",{onClick:y,class:"btn-contrast"},"Close")])])])):j("",!0)}},it=ne(at,[["__scopeId","data-v-702f4702"]]),ue=t=>(ae("data-v-668780de"),t=t(),ie(),t),nt={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},dt=ue(()=>e("div",{class:"modal-overlay absolute inset-0 bg-gray-500 opacity-75"},null,-1)),ut={class:"modal-container bg-white w-full md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},rt={class:"p-6"},ct={class:"mb-4"},mt=ue(()=>e("h2",{class:"text-2xl font-bold mb-4"},"Delete Module",-1)),pt={key:0,class:"text-gray-700"},vt={__name:"ModuleDeleteModal",props:{isOpen:Boolean,module:Object},emits:["close","confirmDelete"],setup(t,{emit:o}){const l=t,s=o,x=R(),d=async()=>{l.module&&(await x.deleteModule(l.module.id),s("confirmDelete"),s("close"))},u=()=>{s("close")};return(n,r)=>l.isOpen?(f(),h("div",nt,[dt,e("div",ut,[e("div",rt,[e("div",ct,[mt,l.module?(f(),h("p",pt,' Are you sure you want to delete "'+M(l.module.title)+'"? ',1)):j("",!0)]),e("div",{class:"flex justify-end"},[e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:d},"Yes"),e("button",{class:"btn-2",onClick:u},"No")])])])])])):j("",!0)}},_t=ne(vt,[["__scopeId","data-v-668780de"]]),G=te("lecture",{state:()=>({lectures:{}}),actions:{async fetchLectures(t){try{const o=await L.get(`/modules/${t}/lectures`);this.lectures={...this.lectures,[t]:o.data}}catch(o){console.error("Error fetching lectures:",o)}},async addLecture(t,o){try{const l=await L.post(`/modules/${t}/lectures`,o);this.lectures[t]||(this.lectures[t]=[]),this.lectures[t]=[...this.lectures[t],l.data]}catch(l){console.error("Error adding lecture:",l)}},async deleteLecture(t,o){try{await L.delete(`/modules/${t}/lectures/${o}`),this.lectures[t]&&(this.lectures[t]=this.lectures[t].filter(l=>l.id!==o))}catch(l){console.error("Error deleting lecture:",l)}},async updateLecture(t,o,l){try{const s=await L.put(`/modules/${t}/lectures/${o}`,l);if(this.lectures[t]){const x=this.lectures[t].findIndex(d=>d.id===o);x!==-1&&(this.lectures[t][x]=s.data)}}catch(s){console.error("Error updating lecture:",s)}}}}),ft=e("label",null,"Exam Title:",-1),ht=e("label",null,"Duration (minutes):",-1),xt=e("label",null,"Opening Time:",-1),yt=e("label",null,"Result Publish Time:",-1),bt=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-2"},"Add Exam")],-1),gt={__name:"AddExam",props:{moduleId:Number},emits:["submit"],setup(t,{emit:o}){const l=t,s=a({title:"",duration:"",opening_time:"",result_publish_time:"",link:""}),x=o,d=()=>{const u={module_id:l.moduleId,title:s.value.title,duration:s.value.duration,opening_time:s.value.opening_time,result_publish_time:s.value.result_publish_time,link:s.value.link};x("submit",u),s.value={title:"",duration:"",opening_time:"",link:""}};return(u,n)=>(f(),h("div",null,[e("form",{onSubmit:O(d,["prevent"]),class:"space-y-4"},[e("div",null,[ft,b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":n[0]||(n[0]=r=>s.value.title=r),placeholder:"Title",required:""},null,512),[[w,s.value.title]])]),e("div",null,[ht,b(e("input",{class:"input-1",type:"number","onUpdate:modelValue":n[1]||(n[1]=r=>s.value.duration=r),placeholder:"Duration",required:""},null,512),[[w,s.value.duration]])]),e("div",null,[xt,b(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":n[2]||(n[2]=r=>s.value.opening_time=r),placeholder:"Opening Date & Time",required:""},null,512),[[w,s.value.opening_time]])]),e("div",null,[yt,b(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":n[3]||(n[3]=r=>s.value.result_publish_time=r),placeholder:"Opening Date & Time",required:""},null,512),[[w,s.value.result_publish_time]])]),bt],32)]))}},wt={class:"flex flex-col md:flex-row items-center gap-x-2"},$t={key:0,class:"w-full md:w-60 text-left md:text-right"},z={__name:"FormLabel",props:["label"],setup(t){return(o,l)=>(f(),h("label",wt,[t.label?(f(),h("span",$t,M(t.label),1)):j("",!0),$e(o.$slots,"default")]))}},kt=e("hr",{class:"my-3"},null,-1),Mt=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1),Et={__name:"EditExamForm",props:{exam:Object},emits:["close"],setup(t,{emit:o}){const l=t,s=o,x=de(),d=a(l.exam.title),u=a(l.exam.duration),n=a(l.exam.opening_time),r=a(l.exam.result_publish_time),_=a(l.exam.link),c=async()=>{const i={...l.exam,title:d.value,duration:u.value,opening_time:n.value,result_publish_time:r.value,link:_.value};try{await x.updateExam(l.exam.module_id,l.exam.id,i),s("close")}catch(m){console.error("Error updating exam:",m)}};return Q(()=>l.exam,i=>{d.value=i.title,u.value=i.duration,n.value=i.opening_time,_.value=i.link},{immediate:!0}),(i,m)=>(f(),h("div",null,[e("form",{onSubmit:O(c,["prevent"]),class:"space-y-4"},[V(z,{label:"Exam Title"},{default:U(()=>[b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":m[0]||(m[0]=y=>d.value=y),placeholder:"Exam Title",required:""},null,512),[[w,d.value]])]),_:1}),V(z,{label:"Duration (minutes)"},{default:U(()=>[b(e("input",{class:"input-1",type:"number","onUpdate:modelValue":m[1]||(m[1]=y=>u.value=y),placeholder:"Duration (minutes)",required:""},null,512),[[w,u.value]])]),_:1}),V(z,{label:"Opening Time"},{default:U(()=>[b(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":m[2]||(m[2]=y=>n.value=y),placeholder:"Opening Date & Time",required:""},null,512),[[w,n.value]])]),_:1}),V(z,{label:"Result Publish"},{default:U(()=>[b(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":m[3]||(m[3]=y=>r.value=y),placeholder:"Result Publish Time",required:""},null,512),[[w,r.value]])]),_:1}),kt,Mt],32)]))}},Ct={class:"flex flex-col md:flex-row md:justify-center"},Dt=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1),jt=e("label",{for:"virtual_platform"},"Live Class Link",-1),Vt=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Add Lecture")],-1),St={__name:"AddLecture",props:{moduleId:Number,courseId:Number},setup(t){const o=t,l=G(),s=a(""),x=a(""),d=a(""),u=a(""),n=a("video"),r=async()=>{const _={course_id:o.courseId,module_id:o.moduleId,title:s.value,link:x.value,description:d.value,type:n.value,opening_time:u.value};try{await l.addLecture(o.moduleId,_),s.value="",x.value="",d.value="",n.value="video",u.value=""}catch(c){console.error("Error adding lecture:",c)}};return(_,c)=>(f(),h("div",null,[e("form",{onSubmit:O(r,["prevent"]),class:"space-y-4"},[b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[0]||(c[0]=i=>s.value=i),placeholder:"Title",required:""},null,512),[[w,s.value]]),e("div",Ct,[e("div",null,[b(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":c[1]||(c[1]=i=>n.value=i),class:"mr-2"},null,512),[[N,n.value]]),Dt]),e("div",null,[b(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":c[2]||(c[2]=i=>n.value=i),class:"mr-2"},null,512),[[N,n.value]]),jt])]),b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[3]||(c[3]=i=>x.value=i),placeholder:"Link",required:""},null,512),[[w,x.value]]),b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[4]||(c[4]=i=>d.value=i),placeholder:"Description"},null,512),[[w,d.value]]),b(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":c[5]||(c[5]=i=>u.value=i),placeholder:"Opening Date & Time",required:""},null,512),[[w,u.value]]),Vt],32)]))}},Lt={class:"flex flex-col md:flex-row md:justify-center"},Ut=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1),qt=e("label",{for:"virtual_platform"},"Live Class Link",-1),Tt=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1),Ot={__name:"EditLectureForm",props:{lecture:Object},emits:["close"],setup(t,{emit:o}){const l=t,s=o,x=G(),d=a(l.lecture.title),u=a(l.lecture.link),n=a(l.lecture.description),r=a(l.lecture.opening_time),_=a(l.lecture.type),c=async()=>{const i={...l.lecture,title:d.value,link:u.value,description:n.value,type:_.value,opening_time:r.value};try{await x.updateLecture(l.lecture.module_id,l.lecture.id,i),s("close")}catch(m){console.error("Error updating lecture:",m)}};return Q(()=>l.lecture,i=>{d.value=i.title,u.value=i.link,n.value=i.description,_.value=i.type,r.value=i.opening_time},{immediate:!0}),(i,m)=>(f(),h("div",null,[e("form",{onSubmit:O(c,["prevent"]),class:"space-y-4"},[b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":m[0]||(m[0]=y=>d.value=y),placeholder:"Title",required:""},null,512),[[w,d.value]]),e("div",Lt,[e("div",null,[b(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":m[1]||(m[1]=y=>_.value=y),class:"mr-2"},null,512),[[N,_.value]]),Ut]),e("div",null,[b(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":m[2]||(m[2]=y=>_.value=y),class:"mr-2"},null,512),[[N,_.value]]),qt])]),b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":m[3]||(m[3]=y=>u.value=y),placeholder:"Link",required:""},null,512),[[w,u.value]]),b(e("input",{class:"input-1",type:"text","onUpdate:modelValue":m[4]||(m[4]=y=>n.value=y),placeholder:"Description"},null,512),[[w,n.value]]),b(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":m[5]||(m[5]=y=>r.value=y),placeholder:"Opening Date & Time",required:""},null,512),[[w,r.value]]),Tt],32)]))}},At={class:"flex md:flex-row flex-col items-center gap-4"},zt={class:"flex flex-1 items-center gap-4"},Ft={class:"text-center border-2 rounded-md p-1.5"},It=e("div",{class:"text-xs md:text-sm"},"Module",-1),Nt={class:"flex-1"},Rt={class:"line-clamp-1"},Bt={class:"flex items-center gap-2"},Pt=e("p",null,"Content",-1),Yt=e("i",{class:"far fa-edit"},null,-1),Qt=e("i",{class:"fas fa-trash-alt"},null,-1),Gt={key:0},Kt=e("hr",{class:"mb-2"},null,-1),Ht={class:"flex flex-col justify-center space-y-2 divide-y-2"},Jt={class:"flex items-center gap-4"},Wt={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},Xt={class:"text-xs"},Zt={key:0},el={key:1},tl={class:"title-sm"},ll={class:"flex items-center gap-2 text-sm text-gray-400"},sl=e("i",{class:"far fa-calendar-check"},null,-1),ol={class:"flex gap-2"},al=["onClick"],il=e("i",{class:"far fa-edit"},null,-1),nl=e("span",{class:"hidden md:flex"},"Edit",-1),dl=[il,nl],ul=["onClick"],rl=e("i",{class:"fas fa-trash-alt"},null,-1),cl=e("span",{class:"hidden md:flex"},"Delete",-1),ml=[rl,cl],pl={class:"grow shrink flex items-center gap-4"},vl=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-file-alt"}),e("div",{class:"text-xs"},"Exam")],-1),_l={class:"title-sm"},fl={class:"flex items-center gap-2 text-sm text-gray-400"},hl=e("i",{class:"far fa-calendar-check"},null,-1),xl={class:"grow-0 flex flex-wrap justify-end max-w-[110px] md:max-w-fit gap-2"},yl=["onClick"],bl=e("i",{class:"far fa-edit"},null,-1),gl=e("span",{class:"hidden md:flex"},"Edit",-1),wl=[bl,gl],$l=["onClick"],kl=e("i",{class:"fas fa-trash-alt"},null,-1),Ml=e("span",{class:"hidden md:flex"},"Delete",-1),El=[kl,Ml],Cl=e("hr",{class:"my-3"},null,-1),Dl={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},jl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Vl={class:"mt-4"},Sl={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ll={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ul={class:"mt-4"},ql={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Tl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ol={class:"mt-4 text-center"},Al={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},zl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Fl=e("div",{class:"mr-auto font-bold"},"Add Exam Info",-1),Il=e("hr",{class:"my-3"},null,-1),Nl={class:"mt-4"},Rl={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Bl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Pl={class:"flex justify-end"},Yl={class:"mr-auto font-bold"},Ql=e("hr",{class:"my-3"},null,-1),Gl={class:"mt-4"},Kl={key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Hl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Jl={class:"mt-4 text-center"},Wl={__name:"ModuleItem",props:{module:Object},emits:["edit","delete"],setup(t,{emit:o}){const l=t,s=G(),x=de(),d=a(!1),u=a(!1),n=a(!1),r=a(!1),_=a(!1),c=a(!1),i=a(!1),m=a(null),y=a(null),$=a(null),p=a(null),v=o,g=()=>{v("edit",l.module)},k=()=>{v("delete",l.module)},re=async()=>{d.value=!d.value,d.value&&(await s.fetchLectures(l.module.id),await x.fetchExams(l.module.id))},ce=()=>{u.value=!0},K=()=>{u.value=!1},me=D=>{m.value=D,n.value=!0},H=()=>{n.value=!1},pe=D=>{y.value=D,r.value=!0},B=()=>{r.value=!1},ve=async()=>{y.value&&(await s.deleteLecture(l.module.id,y.value.id),B())},_e=async()=>{K()},J=D=>{const A=new Date(D);return Me(A,"hh:mm a, dd-MMM-yyyy")},fe=()=>{_.value=!0},W=()=>{_.value=!1},he=async D=>{try{await x.addExam(l.module.id,D),W()}catch(A){console.error("Error adding exam:",A)}},xe=D=>{$.value=D,c.value=!0},X=()=>{c.value=!1},ye=D=>{p.value=D,i.value=!0},P=()=>{i.value=!1},be=async()=>{p.value&&(await x.deleteExam(l.module.id,p.value.id),P())};return(D,A)=>{var Z,ee;const ge=ke("RouterLink");return f(),h("li",{class:C(["card-bg p-4",{"bg-gray-100 border-2 border-gray-200 text-gray-400":t.module.is_active==0}])},[e("div",At,[e("div",zt,[e("div",Ft,[e("div",{class:C(["text-xl font-bold text-orange-500",{"!text-gray-400":t.module.is_active==0}])},M(t.module.order),3),It]),e("div",Nt,[e("h4",{class:C(["title-md",{"text-gray-400":t.module.is_active==0}])},M(t.module.title),3),e("p",Rt,M(t.module.description),1)])]),e("div",Bt,[e("button",{class:"btn-2",onClick:re},[e("i",{class:C(d.value?"fas fa-angle-up":"fas fa-angle-down")},null,2),Pt]),e("button",{class:"btn-2 pb-2",onClick:g},[Yt,F("Edit")]),e("button",{class:"btn-contrast pb-2",onClick:k},[Qt,F("Delete ")])])]),d.value?(f(),h("div",Gt,[Kt,e("div",Ht,[(f(!0),h(q,null,T(I(s).lectures[t.module.id],E=>(f(),h("div",{key:E.id,class:"flex gap-4 items-center w-full justify-between py-2"},[e("div",Jt,[e("div",Wt,[e("i",{class:C(E.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",Xt,[E.type==="virtual_platform"?(f(),h("p",Zt,"Live")):(f(),h("p",el,"Rec"))])]),e("div",null,[e("h4",tl,M(E.title),1),e("div",ll,[sl,e("p",null,M(J(E.opening_time)),1)])])]),e("div",ol,[e("button",{class:"btn-1 pb-2",onClick:Y=>me(E)},dl,8,al),e("button",{class:"btn-contrast pb-2",onClick:Y=>pe(E)},ml,8,ul)])]))),128)),(f(!0),h(q,null,T(I(x).exams[t.module.id],E=>(f(),h("div",{key:E.id,class:"w-full flex gap-4 items-center justify-between py-2"},[e("div",pl,[vl,e("div",null,[e("h4",_l,M(E.title),1),e("div",fl,[hl,e("p",null,M(J(E.opening_time)),1)])])]),e("div",xl,[V(ge,{to:{name:"ExamQuestionList",params:{courseId:t.module.course_id,moduleId:t.module.id,examId:E.id}},class:"btn-3 px-3.5"},{default:U(()=>[F(" Questions ")]),_:2},1032,["to"]),e("button",{class:"btn-1 pb-2",onClick:Y=>xe(E)},wl,8,yl),e("button",{class:"btn-contrast pb-2",onClick:Y=>ye(E)},El,8,$l)])]))),128))]),Cl,e("div",{class:"flex gap-4 items-center justify-center mt-2"},[e("button",{class:"btn-1",onClick:ce},"Add Lecture"),e("button",{class:"btn-1",onClick:fe},"Add Exam")])])):j("",!0),u.value?(f(),h("div",Dl,[e("div",jl,[e("div",{class:"flex justify-end"},[e("button",{onClick:K,class:"text-gray-500 hover:text-gray-700"},"×")]),e("div",Vl,[V(St,{moduleId:t.module.id,courseId:t.module.course_id,onSubmit:_e},null,8,["moduleId","courseId"])])])])):j("",!0),n.value?(f(),h("div",Sl,[e("div",Ll,[e("div",{class:"flex justify-end"},[e("button",{onClick:H,class:"text-gray-500 hover:text-gray-700"},"×")]),e("div",Ul,[V(Ot,{lecture:m.value,onClose:H},null,8,["lecture"])])])])):j("",!0),r.value?(f(),h("div",ql,[e("div",Tl,[e("div",{class:"flex justify-end"},[e("button",{onClick:B,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Ol,[e("p",null,"Do you want to delete '"+M((Z=y.value)==null?void 0:Z.title)+"' lecture?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:ve},"Yes"),e("button",{class:"btn-contrast",onClick:B},"No")])])])])):j("",!0),_.value?(f(),h("div",Al,[e("div",zl,[e("div",{class:"flex justify-end"},[Fl,e("button",{onClick:W,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),Il,e("div",Nl,[V(gt,{moduleId:t.module.id,onSubmit:he},null,8,["moduleId"])])])])):j("",!0),c.value?(f(),h("div",Rl,[e("div",Bl,[e("div",Pl,[e("div",Yl,"Edit Form : "+M($.value.title),1),e("button",{onClick:X,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),Ql,e("div",Gl,[V(Et,{exam:$.value,onClose:X},null,8,["exam"])])])])):j("",!0),i.value?(f(),h("div",Kl,[e("div",Hl,[e("div",{class:"flex justify-end"},[e("button",{onClick:P,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Jl,[e("p",null,"Do you want to delete '"+M((ee=p.value)==null?void 0:ee.title)+"' exam?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:be},"Yes"),e("button",{class:"btn-contrast",onClick:P},"No")])])])])):j("",!0)],2)}}},Xl={class:"my-container space-y-2"},Zl={class:"title-lg text-center"},es={key:0},ts={class:"space-y-2"},ls={key:1,class:"flex justify-center"},ss=e("p",{class:""},"No modules available for this course.",-1),os=[ss],as={class:"flex justify-center py-2"},is=e("i",{class:"fas fa-plus"},null,-1),rs={__name:"ModuleListView",setup(t){const o=le(),l=Ee(),s=R(),x=a(null),d=a([]),u=a(null),n=a(!1),r=a(!1),_=a(!1);se(async()=>{try{await l.fetchCourse(o.params.id),x.value=l.course,await s.fetchModules(o.params.id),d.value=s.modules}catch(p){console.error("Error fetching data:",p)}});const c=p=>{u.value=p,n.value=!0},i=p=>{u.value=p,r.value=!0},m=async p=>{try{await s.addModule(o.params.id,p),await s.fetchModules(o.params.id),d.value=s.modules,_.value=!1}catch(v){console.error("Error adding module:",v)}},y=async p=>{try{await s.updateModule(p.id,p),await s.fetchModules(o.params.id),d.value=s.modules,n.value=!1}catch(v){console.error("Error updating module:",v)}},$=async()=>{if(u.value)try{await s.deleteModule(u.value.id),await s.fetchModules(o.params.id),d.value=s.modules,r.value=!1}catch(p){console.error("Error deleting module:",p)}};return(p,v)=>(f(),h("div",Xl,[e("h1",Zl,M(x.value?x.value.title:"Loading...")+" Modules",1),d.value.length>0?(f(),h("div",es,[e("ul",ts,[(f(!0),h(q,null,T(d.value,g=>(f(),Ce(Wl,{key:g.id,module:g,onEdit:c,onDelete:i},null,8,["module"]))),128))])])):(f(),h("div",ls,os)),e("div",as,[e("button",{class:"btn-2",onClick:v[0]||(v[0]=g=>_.value=!0)},[is,F("Add Module ")])]),V(Pe,{isOpen:_.value,onAddModule:m,onClose:v[1]||(v[1]=g=>_.value=!1)},null,8,["isOpen"]),V(it,{class:"z-40",module:u.value,isOpen:n.value,onClose:v[2]||(v[2]=g=>n.value=!1),onUpdate:y},null,8,["module","isOpen"]),V(_t,{class:"z-40",module:u.value,isOpen:r.value,onClose:v[3]||(v[3]=g=>r.value=!1),onConfirmDelete:$},null,8,["module","isOpen"])]))}};export{rs as default};
