import{r as n,o as C,e as l,f as p,g as e,z as g,A as $,K as P,t as b,p as U,I as E,J as I,M as N,d as V,F as w,h as j,j as O,i as S}from"./index-h_FQe1qy.js";import{u as L}from"./user-CbRIshZC.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const a=u=>(E("data-v-00f1efd7"),u=u(),I(),u),B={key:0,class:"modal"},D={class:"card-bg p-4 md:p-8 w-full max-w-5xl"},R=a(()=>e("h2",{class:"title-md text-center"},"Edit User",-1)),z=a(()=>e("p",null,"Name",-1)),F=a(()=>e("p",null,"Email",-1)),J=a(()=>e("p",null,"Phone",-1)),K=a(()=>e("p",null,"Photo URL",-1)),T=a(()=>e("p",null,"Role",-1)),q=a(()=>e("option",{value:"developer"},"Developer",-1)),G=a(()=>e("option",{value:"admin"},"Admin",-1)),H=a(()=>e("option",{value:"instructor"},"Instructor",-1)),Q=a(()=>e("option",{value:"student"},"Student",-1)),W=[q,G,H,Q],X={key:0,class:"mt-4 text-red-600"},Y={__name:"EditUser",props:{user:Object,isOpen:Boolean},emits:["close","update"],setup(u,{emit:k}){const r=u,v=k,_=L(),d=n(""),h=n(""),c=n(""),m=n(""),f=n("student"),y=n(null);C(()=>{r.user&&(d.value=r.user.name,h.value=r.user.email,c.value=r.user.phone,m.value=r.user.photo,f.value=r.user.role)});const i=async()=>{try{const t={name:d.value,email:h.value,phone:c.value,photo:m.value,role:f.value};await _.updateUser(r.user.id,t),v("update",t),v("close")}catch(t){y.value=t.message}},x=()=>{v("close")};return(t,o)=>u.isOpen?(l(),p("div",B,[e("div",D,[R,z,g(e("input",{class:"input-1","onUpdate:modelValue":o[0]||(o[0]=s=>d.value=s),placeholder:"Name"},null,512),[[$,d.value]]),F,g(e("input",{class:"input-1","onUpdate:modelValue":o[1]||(o[1]=s=>h.value=s),placeholder:"Email"},null,512),[[$,h.value]]),J,g(e("input",{class:"input-1","onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),placeholder:"Phone"},null,512),[[$,c.value]]),K,g(e("input",{class:"input-1","onUpdate:modelValue":o[3]||(o[3]=s=>m.value=s),placeholder:"Photo URL"},null,512),[[$,m.value]]),T,g(e("select",{class:"input-1","onUpdate:modelValue":o[4]||(o[4]=s=>f.value=s)},W,512),[[P,f.value]]),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-2",onClick:i},"Save"),e("button",{class:"btn-contrast",onClick:x},"Close")]),y.value?(l(),p("div",X,b(y.value),1)):U("",!0)])])):U("",!0)}},Z=A(Y,[["__scopeId","data-v-00f1efd7"]]);function ee(u){return`https://ui-avatars.com/api/?name=${u}&length=1`}const te={class:"my-container p-4"},oe=e("div",{class:"flex items-center justify-between"},[e("h1",{class:"text-2xl font-bold mb-4"},"User List")],-1),se={class:"overflow-x-auto"},le={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden"},ne=e("thead",{class:"font-bold"},[e("tr",{class:"*:py-2 *:px-4 *:bg-gray-200 *:text-left *:text-sm *:text-gray-700 *:uppercase *:tracking-wider"},[e("th",null,"SL"),e("th",null,"Photo"),e("th",null,"Name"),e("th",null,"Phone"),e("th",null,"Role"),e("th",null,"Actions")])],-1),ae={key:0},ue=e("td",{class:"py-2 px-4 border-b border-gray-200 text-center",colspan:"6"},[e("div",{class:"flex justify-center items-center space-x-2"},[e("div",{class:"w-4 h-4 border-4 border-t-4 border-gray-200 rounded-full animate-spin"}),e("span",null,"Loading...")])],-1),re=[ue],de=["src","onClick"],ce=["onClick"],ie={key:0},pe=e("td",{class:"py-2 px-4 border-b border-gray-200",colspan:"6"},"No users found",-1),ve=[pe],he={key:0,class:"mt-4 text-red-600"},be={__name:"UserList",setup(u){const k=L(),r=N(),v=n(null),_=n(!1),d=n(null),h=n(!0);C(async()=>{try{await k.fetchUsers()}catch(i){v.value=i.message}finally{h.value=!1}});const c=V(()=>k.users),m=i=>{d.value=i,_.value=!0},f=()=>{_.value=!1,d.value=null},y=i=>{const x=c.value.findIndex(t=>t.id===i.id);x!==-1&&(c.value[x]=i)};return(i,x)=>(l(),p("div",te,[oe,e("div",se,[e("table",le,[ne,e("tbody",null,[h.value?(l(),p("tr",ae,re)):(l(),p(w,{key:1},[(l(!0),p(w,null,j(c.value,(t,o)=>(l(),p("tr",{key:t.id,class:"hover:bg-gray-100 *:py-2 *:px-4 *:border-b *:border-gray-200"},[e("td",null,b(o+1),1),e("td",null,[e("img",{src:t.photo??S(ee)(t.name),alt:"Photo",class:"size-10 rounded-full object-cover cursor-pointer",onClick:s=>S(r).openPhotoModal("user",t.id,M=>t.photo=M,1)},null,8,de)]),e("td",null,b(t.name),1),e("td",null,b(t.phone),1),e("td",null,b(t.role||"N/A"),1),e("td",null,[e("button",{class:"btn-2",onClick:s=>m(t)},"Edit",8,ce)])]))),128)),c.value.length===0?(l(),p("tr",ie,ve)):U("",!0)],64))])])]),v.value?(l(),p("div",he,b(v.value),1)):U("",!0),_.value&&d.value?(l(),O(Z,{key:1,user:d.value,isOpen:_.value,onClose:f,onUpdate:y},null,8,["user","isOpen"])):U("",!0)]))}};export{be as default};
