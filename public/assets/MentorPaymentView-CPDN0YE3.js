import{r as p,Q as f,x as i,y as u,z as e,C as a,X as h,U as x,a9 as g,d as w,I as _,a2 as C,B as d,F as I,G as M,O as P}from"./vue-CAqJJQzZ.js";import{k}from"./index-CCZtyDAV.js";import"./vendor-PJuFQbji.js";const N={class:"hover:bg-sky-700/15 *:px-2 *:py-1.5 *:border"},j={class:"text-left"},$={class:"text-center"},F={class:"flex justify-between gap-1"},S={class:"flex justify-between gap-1"},W={class:"flex justify-between gap-1"},A={class:"flex justify-between gap-1"},B={class:"flex justify-between gap-1"},T={class:"font-semibold"},V={class:"text-center"},D={class:"flex justify-between gap-1 font-semibold text-green-700"},L={__name:"CourseWiseTableRow",props:{courseIncome:{type:Object,required:!0},softwareChargePercentage:{type:Number,default:5},bkashChargePercentage:{type:Number,default:1.5}},setup(o){const t=o,l=p(50),n=f(()=>Number((t.courseIncome.total_income*t.softwareChargePercentage/100).toFixed(0))),r=f(()=>t.courseIncome.total_income-n.value),m=f(()=>Number((r.value*t.bkashChargePercentage/100).toFixed(0))),b=f(()=>r.value-m.value),y=f(()=>Number((b.value*l.value/100).toFixed(0)));return(c,s)=>(u(),i("tr",N,[e("td",null,a(o.courseIncome.course_id),1),e("td",j,a(o.courseIncome.course_name||"-"),1),e("td",$,a(o.courseIncome.total_purchases||"-"),1),e("td",null,[e("div",F,[s[1]||(s[1]=e("span",null,"৳",-1)),h(a(Number(o.courseIncome.total_income).toFixed(0)),1)])]),e("td",null,[e("div",S,[s[2]||(s[2]=e("span",null,"৳",-1)),h(a(n.value),1)])]),e("td",null,[e("div",W,[s[3]||(s[3]=e("span",null,"৳",-1)),h(a(r.value),1)])]),e("td",null,[e("div",A,[s[4]||(s[4]=e("span",null,"৳",-1)),h(a(m.value),1)])]),e("td",null,[e("div",B,[s[5]||(s[5]=e("span",null,"৳",-1)),e("span",T,a(b.value),1)])]),e("td",V,[x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=v=>l.value=v),type:"number",min:"0",max:"100",class:"w-16 px-1 border rounded text-center"},null,512),[[g,l.value,void 0,{number:!0}]])]),e("td",null,[e("div",D,[s[6]||(s[6]=e("span",null,"৳",-1)),h(a(y.value),1)])])]))}},O=w("mentor-payment",()=>{const o=p(new Date().toISOString().slice(0,7)),t=p([]),l=p(!1),n=p(null);return{error:n,isLoading:l,selectedMonth:o,courseWiseMonthlyIncomes:t,fetchCourseWiseMonthlyIncome:async(m=null)=>{var b,y;l.value=!0,m&&(o.value=m);try{const{data:c}=await k.get(`/course-wise-monthly-incomes/${o.value}`);t.value=c||[]}catch(c){throw n.value=((y=(b=c==null?void 0:c.response)==null?void 0:b.data)==null?void 0:y.message)??"An error occurred",n.value}finally{l.value=!1}}}}),U={class:"container max-w-7xl mx-auto p-4 space-y-4"},q={class:"flex flex-wrap justify-between items-center gap-x-4 gap-y-2"},z={key:0,class:"text-center mt-2"},E={key:1,class:"text-red-500 text-center mb-4"},G={key:2,class:"overflow-x-auto"},K={class:"w-full table table-auto text-center text-xs md:text-sm bg-white"},H={__name:"MentorPaymentView",setup(o){const t=O();return _(async()=>{await t.fetchCourseWiseMonthlyIncome()}),C(()=>t.selectedMonth,async()=>{await t.fetchCourseWiseMonthlyIncome()}),(l,n)=>(u(),i("div",U,[e("div",q,[n[1]||(n[1]=e("h1",{class:"text-3xl font-bold text-center"},"Mentor Payment",-1)),e("div",null,[x(e("input",{type:"month","onUpdate:modelValue":n[0]||(n[0]=r=>d(t).selectedMonth=r),class:"input-1"},null,512),[[g,d(t).selectedMonth]])])]),d(t).isLoading?(u(),i("div",z,"Loading...")):d(t).error?(u(),i("div",E,a(d(t).error),1)):(u(),i("div",G,[e("table",K,[n[2]||(n[2]=e("thead",null,[e("tr",{class:"bg-gray-200 *:px-2 *:py-1.5"},[e("th",{class:"border"},"ID"),e("th",{class:"border"},"Course Name"),e("th",{class:"border"},"Count"),e("th",{class:"border"},"Transaction"),e("th",{class:"border"},"Software Fee"),e("th",{class:"border"},"Net Amount"),e("th",{class:"border"},"bKash Charge"),e("th",{class:"border"},"Net After All"),e("th",{class:"border"},"Percentage (%)"),e("th",{class:"border"},"Mentor Payable")])],-1)),e("tbody",null,[(u(!0),i(I,null,M(d(t).courseWiseMonthlyIncomes,r=>(u(),P(L,{key:r.course_Id,courseIncome:r,softwareChargePercentage:5,bkashChargePercentage:1.5},null,8,["courseIncome"]))),128))])])]))]))}};export{H as default};
