import{d as n}from"./vue-CAqJJQzZ.js";import{k as o}from"./index-CCZtyDAV.js";const u=n("purchase",{state:()=>({purchases:[],purchase:null,error:null}),actions:{async fetchPurchases(a={}){var s,r;try{const t=await o.get("/user/courses",{params:a,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.purchases=t.data}catch(t){this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||t.message}},async createPayment(a,s={}){var r,t;try{return(await o.post(`courses/${a}/payment`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw this.error=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||e.message,e}},async executePayment(a,s={}){var r,t;try{return(await o.post(`courses/${a}/enroll`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw this.error=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||e.message,e}},async createBundlePayment(a,s={}){var r,t;try{return(await o.post(`bundles/${a}/payment`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw this.error=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||e.message,e}},async executeBundlePayment(a,s={}){var r,t;try{return(await o.post(`bundles/${a}/enroll`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw this.error=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||e.message,e}},async findNotEnrolledUserByPhone(a,s){try{return(await o.get(`/courses/${a}/not-enrolled-user-by-phone/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(r){throw console.log(r),r}}}});export{u};
