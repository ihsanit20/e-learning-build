import{u as $,f as M}from"./index-BnhZ8BsX.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as F,r as v,x as n,A as D,z as e,C as d,W as f,y as a,I as V,D as h,L as k,Y as B,F as j,G as O,Z as N}from"./vue-BP9P6hCg.js";import"./vendor-PJuFQbji.js";const S={key:0,class:"modal"},z={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},E={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},A=["src"],I={class:"flex w-full text-center gap-4"},H={class:"text-center text-green-600"},R={class:"text-center text-red-600"},U={class:"title-md"},Y={class:"md:flex justify-between"},G=["innerHTML"],K={key:0},P={class:"font-bold text-sky-600"},Q={class:""},W={class:"title-sm"},X={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(b,{emit:x}){const y=b,r=$(),p=x,o=F(()=>r.courses.find(s=>s.id===y.course.id)),m=()=>{p("close")},u=v(null),c=v(""),_=v(""),C=s=>{const l=s.target.files[0];l&&l.size>2*1024*1024?(_.value="File should be less than 2MB",u.value=null,document.getElementById("file-input").value=""):(u.value=l,_.value="")},w=async()=>{if(!u.value)return;const s=new FormData;s.append("thumbnail",u.value);try{await r.uploadThumbnail(y.course.id,s),c.value="Thumbnail uploaded successfully!",u.value=null,document.getElementById("file-input").value=""}catch{_.value="An error occurred while uploading the thumbnail"}},i=s=>M(new Date(s),"dd-MMM-yyyy");return(s,l)=>{var t,g;return b.isOpen?(a(),n("div",S,[e("div",z,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:m},"X")]),e("div",E,[e("img",{class:"aspect-video object-cover rounded-lg",src:o.value.thumbnail,alt:"Thumbnail"},null,8,A),l[5]||(l[5]=e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),e("div",I,[e("input",{id:"file-input",type:"file",onChange:C,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:w},"Upload")]),e("p",H,d(c.value),1),e("p",R,d(_.value),1),e("h2",U,d(o.value.title),1),e("div",Y,[e("p",null,[l[0]||(l[0]=f(" Course Category: ")),e("b",null,d((g=(t=o.value)==null?void 0:t.category)==null?void 0:g.name),1)]),e("p",null,[l[1]||(l[1]=f(" Course Type: ")),e("b",null,d(o.value.course_type),1)])]),e("div",null,[l[2]||(l[2]=e("b",null,"Course Description:",-1)),e("div",{innerHTML:o.value.description,class:""},null,8,G)]),o.value.course_type==="Live Course"?(a(),n("p",K,[l[3]||(l[3]=f(" Start Date: ")),e("span",P,d(i(o.value.start_date)),1)])):D("",!0),e("p",Q,[l[4]||(l[4]=f(" Price: à§³ ")),e("span",W,d(o.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:m},"Close")])])])):D("",!0)}}},Z=T(X,[["__scopeId","data-v-d1fbb8fe"]]),q={key:0,class:"modal"},J={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(b,{emit:x}){const y=b,r=x,p=$(),o=async()=>{y.course&&(await p.deleteCourse(y.course.id),r("confirmDelete"),r("close"))},m=()=>{r("close")};return(u,c)=>b.isOpen?(a(),n("div",q,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[c[0]||(c[0]=e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),c[1]||(c[1]=e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:o},"Yes"),e("button",{class:"btn-2",onClick:m},"No")])])])):D("",!0)}},ee={class:"my-container space-y-2 relative"},se={class:"flex justify-between items-center"},te={key:0,class:"space-y-2"},le={key:1},oe={key:0,class:"text-center"},ne={key:1,class:"space-y-2"},ae={class:"md:col-span-1 px-2"},de=["src"],ie={class:"font-bold text-sky-600 bg-sky-100 px-6 text-center rounded-b-md"},re={class:"md:col-span-4 md:px-4 space-y-2 flex flex-col justify-between"},ue={class:"title-md"},ce={class:"text-sm md:text-base"},pe={class:"flex justify-between"},me={class:"font-bold text-sky-600"},ve={key:0},fe={class:"font-bold text-sky-600"},ye={key:1,class:"bg-pink-50 px-3 rounded-full"},be={class:"font-bold text-pink-600"},_e={class:"flex justify-between items-center gap-2"},xe=["onClick"],ge=["onClick"],Me={__name:"CourseList",setup(b){const x=i=>{const s=new Date(i);return M(s,"dd-MMM-yyyy")},y=i=>{const s=new Date(i);return M(s,"dd-MMM-yyyy, hh:mm a")},r=$(),p=v([]),o=v(null),m=v(!1),u=v(!1),c=v(!0);V(async()=>{await r.fetchCourses(),p.value=r.courses.sort((i,s)=>s.id-i.id),c.value=!1});const _=i=>{o.value=i,m.value=!0},C=i=>{o.value=i,u.value=!0},w=async()=>{await r.deleteCourse(o.value.id),p.value=r.courses};return(i,s)=>{const l=B("RouterLink");return a(),n("div",ee,[e("div",se,[s[3]||(s[3]=e("h1",{class:"title-lg text-center"},"Courses",-1)),h(l,{class:"btn-2",to:{name:"NewCourse"}},{default:k(()=>s[2]||(s[2]=[f("Add New")])),_:1})]),c.value?(a(),n("div",te,[(a(),n(j,null,O(3,t=>e("div",{key:t,class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2 animate-pulse"},s[4]||(s[4]=[N('<div class="md:col-span-1 rounded md:px-2"><div class="aspect-video bg-gray-200"></div></div><div class="md:col-span-3 md:px-2"><div class="h-6 bg-gray-200 rounded-full mb-2"></div><div class="h-4 bg-gray-200 rounded-full"></div></div><div class="md:col-span-1 flex items-center justify-center px-2"><div class="h-6 bg-gray-200 rounded-full w-20"></div></div><div class="md:col-span-3 flex justify-between items-center gap-2 md:px-2"><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div></div>',4)]))),64))])):(a(),n("div",le,[p.value.length===0?(a(),n("div",oe,s[5]||(s[5]=[e("p",null,"No courses available.",-1)]))):(a(),n("ul",ne,[(a(!0),n(j,null,O(p.value,t=>{var g;return a(),n("li",{class:"card-bg md:py-4 p-4 md:p-2 grid md:grid-cols-5 md:divide-x-2",key:t.id},[e("div",ae,[e("img",{class:"aspect-video object-cover rounded-t-md",src:t.thumbnail,alt:"Thumbnail"},null,8,de),e("p",ie,d((g=t==null?void 0:t.category)==null?void 0:g.name),1)]),e("div",re,[e("h2",ue,d(t.title),1),e("p",ce,[s[6]||(s[6]=e("b",null,"Created at: ",-1)),f(d(y(t.created_at)),1)]),e("div",pe,[e("p",null,[s[7]||(s[7]=f(" Fee: ")),e("span",me,d(t.price>0?`${t.price} TK`:"Free"),1)]),t.course_type==="Live Course"?(a(),n("p",ve,[s[8]||(s[8]=f(" Start Date: ")),e("span",fe,d(x(t.start_date)),1)])):(a(),n("p",ye,[e("span",be,d(t.course_type),1)]))]),e("div",_e,[e("button",{class:"btn-1 pb-2",onClick:L=>_(t)},s[9]||(s[9]=[e("i",{class:"fas fa-eye"},null,-1),e("p",{class:"hidden md:flex"},"View",-1)]),8,xe),h(l,{to:{name:"CourseEditForm",params:{id:t.id}},class:"btn-1 pb-2"},{default:k(()=>s[10]||(s[10]=[e("i",{class:"far fa-edit"},null,-1),e("p",{class:"hidden md:flex"},"Edit",-1)])),_:2},1032,["to"]),e("button",{class:"btn-contrast pb-2",onClick:L=>C(t)},s[11]||(s[11]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,ge),h(l,{class:"btn-1",to:{name:"ModuleList",params:{id:t.id}}},{default:k(()=>s[12]||(s[12]=[e("i",{class:"fas fa-plus"},null,-1),e("p",null,"Module",-1)])),_:2},1032,["to"])])])])}),128))]))])),h(Z,{class:"absolute top-0 shadow-2xl w-full z-40",course:o.value,isOpen:m.value,onClose:s[0]||(s[0]=t=>m.value=!1)},null,8,["course","isOpen"]),h(J,{class:"absolute top-0 shadow-2xl w-full z-40",course:o.value,isOpen:u.value,onClose:s[1]||(s[1]=t=>u.value=!1),onConfirmDelete:w},null,8,["course","isOpen"])])}}};export{Me as default};
