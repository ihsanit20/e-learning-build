import{E as K,G as F,b as Q,c as W,u as X,l as Z,r,o as ee,e as l,f as a,g as e,t as n,H as te,F as C,h as M,p as h,x as f,z as se,I as oe,n as y,q as S}from"./index-C1RGtMrd.js";const le=K("courseProgress",{state:()=>({userId:null}),actions:{async completeLecture(u,v,d){try{return(await F.post(`/lectures/${v}/complete`,{course_id:u,is_completed:d})).data}catch(_){throw console.error("Error completing lecture:",_),_}},async getLectureCompletionStatus(u,v){try{return(await F.get(`/users/${u}/lectures/${v}/completion`)).data.is_completed}catch(d){throw console.error("Error fetching lecture completion status:",d),d}},setUserId(u){this.userId=u}}}),ae={class:"my-container py-4"},ne={key:0,class:"error"},ce={key:1,class:"grid md:grid-cols-3 gap-4"},ie={class:"md:col-span-2 space-y-4"},re={class:"title-xl"},de=e("hr",{class:"my-2"},null,-1),ue={class:"relative pt-1"},_e={class:"flex mb-2 items-center justify-between"},pe=e("div",null,[e("span",null,"Course Progress")],-1),he={class:"text-right"},ve={class:"text-xs font-semibold inline-block text-sky-600"},me={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-sky-200"},xe=e("h2",{class:"title-lg"},"Modules",-1),fe={class:"space-y-4"},ye=["onClick"],ge={class:"text-center border-2 rounded-md p-1.5"},be=e("div",{class:"text-xs md:text-sm"},"Module",-1),ke={class:"flex-1"},we={class:"line-clamp-1"},Ce={key:0},Ee={class:""},$e={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Me={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},Se={class:"text-xs"},Le={key:0},je={key:1},ze={class:"flex-1"},Pe={key:0,class:"fas fa-check-circle text-green-700"},qe={class:"text-gray-500 text-xs line-clamp-1"},Ve=["onClick"],Ne={class:"flex items-center text-sm pt-2"},De=["id","checked","onChange","disabled"],Ie=["for"],Re={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Ae=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-file-alt"}),e("div",{class:"text-xs"},"Exam")],-1),Be={class:"w-full"},Oe={class:"title-sm"},Fe={key:0,class:"fas fa-check-circle text-green-700"},He={class:"flex justify-between gap-2 text-sm text-gray-400"},Te={class:"flex items-center gap-2"},Ue=e("i",{class:"far fa-clock"},null,-1),Ge=e("span",null,"Duration:",-1),Je=["onClick"],Ye={key:2},Ke={key:3,class:"fixed inset-0 flex items-center justify-center z-50"},Qe=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1),We={class:"card-bg items-center justify-center p-6 md:p-8 overflow-hidden transform transition-all sm:max-w-lg sm:w-full text-center mx-2"},Xe=e("h3",{class:"title-lg",id:"modal-title"},"Confirm Lecture Completion",-1),Ze={class:""},et={class:"text-red-500"},tt={class:"flex gap-4"},st={class:"modal-content !px-3 !py-4 !max-w-xl"},ot={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},lt=e("div",{class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},[e("h3",{class:"title-lg text-center",id:"modal-title"},"সাবধান!! গুরুত্বপূর্ণ তথ্য সমূহ")],-1),at={class:"size-full grow shrink border-y py-4 overflow-y-auto scrollbar"},nt={class:"w-full list-[square] space-y-3 list-outside pl-5"},ct=e("li",null," Exam ওপেন করা (“Start Exam” বাটনে ক্লিক) মাত্র আপনার টাইমার চালু হয়ে যাবে। আপনি Exam থেকে বেরিয়ে গেলেও টাইমার চলতে থাকবে এবং টাইম শেষে সাবমিট করতে হবে। ",-1),it=e("li",null," Exam দেয়ার সময়ে যদি কোনো কারনে কানেকশন লস হয়ে যায় এবং আপনার টাইম শেষ হয়ে যায় আর সাবমিট করতে না পারেন, তাহলে আর Exam দেয়ার সুযোগ পাবেন না। ",-1),rt={class:"flex items-center gap-1 md:gap-2"},dt=e("span",{class:"pt-1 text-xs md:text-base"},"আমি পরীক্ষা শুরু করতে চাই",-1),ut={class:"modal-content !px-3 !py-4 !max-w-sm"},_t={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},pt={class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},ht={class:"title-lg text-center"},vt={class:"size-full grow shrink border-t py-4 overflow-y-auto scrollbar flex flex-col gap-4 justify-center items-center"},mt={class:"table table-auto text-sm"},xt=e("td",{class:"text-right px-3 py-1.5"},"Correct Mark",-1),ft={class:"text-center px-3 py-1.5"},yt={class:"text-red-500"},gt=e("td",{class:"text-right px-3 py-1.5"},"Negative Mark",-1),bt={class:"text-center px-3 py-1.5"},kt={class:"border-t font-bold"},wt=e("td",{class:"text-right px-3 py-1.5"},"Obtained Mark",-1),Ct={class:"text-center px-3 py-1.5"},Et=e("hr",{class:"w-full"},null,-1),Mt={__name:"MyCourseDetails",setup(u){const v=Q(),d=W(),_=X(),L=le(),j=Z(),g=v.params.id,p=r(null),E=r(null),m=r([]),b=r(!1),k=r(!1),w=r(!1),x=r(null),i=r(null),$=r(!1);ee(async()=>{try{await _.fetchPurchasedCourse(g),p.value=_.course}catch(s){E.value=s.message||"An error occurred",s.response&&s.response.status===403&&d.push("/")}});const H=s=>{const c=m.value.indexOf(s);c===-1?m.value.push(s):m.value.splice(c,1)},T=s=>{s.type==="video"?(j.endedCallback=async()=>{const c=await L.completeLecture(g,s.id,!0);s.is_completed=c.is_completed},j.showPlayer(s.link)):window.open(s.link,"_blank")},U=s=>(i.value=s,console.log(i.value),s.is_completed?w.value=!0:k.value=!0),G=async()=>{if(x.value)try{await L.completeLecture(g,x.value.id,!0),x.value.is_completed=!0,b.value=!1}catch(s){console.error("Error confirming lecture completion:",s)}},J=s=>{x.value=s,b.value=!0},Y=async()=>{d.push({path:`/my/course/${g}/exam/${i.value.id}`})};return(s,c)=>{var z,P,q,V,N,D,I,R,A,B;return l(),a(C,null,[e("div",ae,[E.value?(l(),a("div",ne,n(E.value),1)):p.value?(l(),a("div",ce,[e("div",ie,[e("div",null,[e("h1",re,n(p.value.title),1),de]),e("div",null,[e("div",ue,[e("div",_e,[pe,e("div",he,[e("span",ve,n(p.value.progress)+"% ",1)])]),e("div",me,[e("div",{style:te({width:p.value.progress+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-sky-600"},null,4)])])]),xe,e("ul",fe,[(l(!0),a(C,null,M(p.value.modules,o=>(l(),a("li",{class:"card-bg p-4",key:o.id},[e("div",{onClick:t=>H(o.id),class:"flex flex-1 items-center gap-4 cursor-pointer"},[e("div",ge,[e("div",{class:y(["text-xl font-bold text-orange-500",{"!text-gray-400":o.is_active==0}])},n(o.order),3),be]),e("div",ke,[e("h4",{class:y(["title-md",{"text-gray-400":o.is_active==0}])},n(o.title),3),e("p",we,n(o.description),1)]),e("button",null,[e("i",{class:y(m.value.includes(o.id)?"fas fa-angle-up":"fas fa-angle-down")},null,2)])],8,ye),m.value.includes(o.id)?(l(),a("div",Ce,[e("ul",Ee,[(l(!0),a(C,null,M(o.lectures,t=>(l(),a("li",{class:"pt-6",key:t.id},[e("div",$e,[e("div",Me,[e("i",{class:y(t.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",Se,[t.type==="virtual_platform"?(l(),a("p",Le,"Video")):(l(),a("p",je,"Lecture"))])]),e("div",ze,[e("h4",null,[t.is_completed?(l(),a("i",Pe)):h("",!0),S(" "+n(t.title),1)]),e("p",qe,n(t.description),1)]),e("button",{onClick:f(O=>T(t),["prevent"]),type:"button",class:"btn-2"},n(t.type==="video"?"Play Video":"Join Live"),9,Ve)]),e("div",Ne,[e("input",{type:"checkbox",id:`completed-${t.id}`,class:"form-checkbox h-3 w-3 text-sky-600 transition duration-150 ease-in-out",checked:t.is_completed,onChange:O=>J(t),disabled:t.is_completed},null,40,De),e("label",{for:`completed-${t.id}`,class:"ml-2"}," Have you completed this lecture? ",8,Ie)])]))),128)),(l(!0),a(C,null,M(o.exams,t=>(l(),a("li",{class:"pt-6",key:t.id},[e("div",Re,[Ae,e("div",Be,[e("h4",Oe,[t.is_completed?(l(),a("i",Fe)):h("",!0),S(" "+n(t.title),1)]),e("div",He,[e("div",Te,[Ue,e("p",null,[Ge,S(" "+n(t.duration),1)])])])]),e("button",{onClick:f(O=>U(t),["prevent"]),type:"button",class:"btn-2"},n(t.is_completed?"result":"Open"),9,Je)])]))),128))])])):h("",!0)]))),128))])])])):(l(),a("div",Ye,"Loading...")),b.value?(l(),a("div",Ke,[Qe,e("div",We,[Xe,e("div",Ze,[e("p",et,' Are you sure you have completed the lecture "'+n((z=x.value)==null?void 0:z.title)+'"? ',1)]),e("div",tt,[e("button",{onClick:G,type:"button",class:"btn-2"},"Yes"),e("button",{onClick:c[0]||(c[0]=o=>b.value=!1),type:"button",class:"btn-3"},"No")])])])):h("",!0)]),k.value?(l(),a("div",{key:0,class:"modal",onClick:c[3]||(c[3]=f(o=>k.value=!1,["self"]))},[e("div",st,[e("div",ot,[lt,e("div",at,[e("ul",nt,[e("li",null," Exam এর সময়সীমা থাকবে "+n((P=i.value)==null?void 0:P.duration)+" মিনিট। এই সময়ের মধ্যে আপনাকে Exam সাবমিট করতে হবে। ",1),ct,it])]),e("form",{onSubmit:f(Y,["prevent"]),class:"grow-0 shrink-0 w-full flex justify-end gap-1 md:gap-4"},[e("button",{onClick:c[1]||(c[1]=o=>k.value=!1),type:"button",class:"mr-auto btn-contrast px-1 md:px-4 text-xs md:text-base"}," Cancel "),e("label",rt,[se(e("input",{"onUpdate:modelValue":c[2]||(c[2]=o=>$.value=o),type:"checkbox",required:""},null,512),[[oe,$.value]]),dt]),e("button",{type:"submit",class:y(["btn-2 disabled:opacity-50 px-1 md:px-4 text-xs md:text-base",{"opacity-50":!$.value}])}," Start Exam ",2)],32)])])])):h("",!0),w.value?(l(),a("div",{key:1,class:"modal",onClick:c[5]||(c[5]=f(o=>w.value=!1,["self"]))},[e("div",ut,[e("div",_t,[e("div",pt,[e("h3",ht,"Result of "+n(i.value.title),1)]),e("div",vt,[e("table",mt,[e("tr",null,[xt,e("td",ft,n((V=(q=i.value)==null?void 0:q.user_exam)==null?void 0:V.mcq_correct_mark),1)]),e("tr",yt,[gt,e("td",bt,n((D=(N=i.value)==null?void 0:N.user_exam)==null?void 0:D.mcq_negative_mark),1)]),e("tr",kt,[wt,e("td",Ct,n(((R=(I=i.value)==null?void 0:I.user_exam)==null?void 0:R.mcq_correct_mark)-((B=(A=i.value)==null?void 0:A.user_exam)==null?void 0:B.mcq_negative_mark)),1)])]),Et,e("button",{onClick:c[4]||(c[4]=o=>w.value=!1),type:"button",class:"btn-contrast"}," Close ")])])])])):h("",!0)],64)}}};export{Mt as default};
