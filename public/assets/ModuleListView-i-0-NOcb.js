import{h as T,f as Oe,u as Ae}from"./index-CZpWfS7Z.js";import{d as K,T as ze,P as me,r as u,I as pe,x as g,A as D,y,z as e,M as U,U as w,a9 as M,ag as ve,F as q,G as O,C as E,B as V,H as L,a2 as P,a4 as Fe,D as j,L as S,ac as R,Z as Ne,X as z,O as fe}from"./vue-CcEtAIOs.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ye}from"./exam-o5ujCzbV.js";import"./vendor-PJuFQbji.js";const B=K("module",{state:()=>({modules:[]}),actions:{async fetchModules(t){try{const s=await T.get(`/courses/${t}/modules`);this.modules=s.data}catch(s){console.error("Failed to fetch modules:",s)}},async addModule(t,s){try{const l=await T.post("/modules",{course_id:t,...s});this.modules.push(l.data),await this.fetchModules(t)}catch(l){console.error("Failed to add module:",l)}},async updateModule(t,s){try{const l=await T.put(`/modules/${t}`,s),o=this.modules.findIndex(b=>b.id===t);o!==-1&&(this.modules[o]=l.data)}catch(l){console.error("Failed to update module:",l)}},async deleteModule(t){try{await T.delete(`/modules/${t}`),this.modules=this.modules.filter(s=>s.id!==t)}catch(s){console.error("Failed to delete module:",s)}}}}),Re={key:0,class:"flex items-center justify-center"},Pe={class:"card-bg p-4 md:p-8 w-full max-w-6xl"},Be={class:"grid md:grid-cols-5 gap-4"},Ie=["value"],Qe={class:"flex items-center gap-2"},Ye={class:"flex items-center gap-2"},Ge={__name:"ModuleAddModal",props:{isOpen:Boolean},emits:["add-module","close"],setup(t,{emit:s}){const l=s,o=B();ze();const b=me(),m=u(""),f=u(""),n=u(""),x=u(""),c=u(!1),d=u(!1),a=u(""),p=u("");pe(()=>{o.fetchModules(b.params.id)});const _=async()=>{const r=b.params.id,i={title:m.value,description:f.value,order:n.value,duration:x.value,is_active:c.value,is_paid:d.value,prerequisite_module_id:a.value};try{await o.addModule(r,i),p.value="Module is added",m.value="",f.value="",n.value="",x.value="",c.value=!1,d.value=!1,a.value=""}catch($){console.error("Failed to add module:",$)}},k=()=>{l("close")};return(r,i)=>t.isOpen?(y(),g("div",Re,[e("div",Pe,[i[16]||(i[16]=e("h2",{class:"title-md text-center"},"Add Module",-1)),e("form",{onSubmit:U(_,["prevent"]),class:"space-y-2"},[e("div",null,[i[7]||(i[7]=e("p",null,"Title:",-1)),w(e("input",{class:"input-1","onUpdate:modelValue":i[0]||(i[0]=$=>m.value=$),required:"",placeholder:"Title"},null,512),[[M,m.value]])]),e("div",null,[i[8]||(i[8]=e("p",null,"Description:",-1)),w(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=$=>f.value=$),class:"input-1"},null,512),[[M,f.value]])]),e("div",Be,[e("div",null,[i[9]||(i[9]=e("p",null,"Module Order:",-1)),w(e("input",{class:"input-1","onUpdate:modelValue":i[2]||(i[2]=$=>n.value=$),type:"number"},null,512),[[M,n.value]])]),e("div",null,[i[10]||(i[10]=e("p",null,"Duration (minutes):",-1)),w(e("input",{class:"input-1","onUpdate:modelValue":i[3]||(i[3]=$=>x.value=$),type:"number"},null,512),[[M,x.value,void 0,{number:!0}]])]),e("div",null,[i[12]||(i[12]=e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1)),w(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":i[4]||(i[4]=$=>a.value=$),class:"input-1"},[i[11]||(i[11]=e("option",{value:""},"Select a prerequisite module",-1)),(y(!0),g(q,null,O(V(o).modules,$=>(y(),g("option",{key:$.id,value:$.id},E($.title),9,Ie))),128))],512),[[ve,a.value]])]),e("div",Qe,[e("div",{onClick:i[5]||(i[5]=$=>c.value=!c.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":c.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":c.value}])},null,2)],2),i[13]||(i[13]=e("label",{for:"is_active",class:""},"Active",-1))]),e("div",Ye,[e("div",{onClick:i[6]||(i[6]=$=>d.value=!d.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":d.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":d.value}])},null,2)],2),i[14]||(i[14]=e("label",{for:"is_paid",class:""},"Paid",-1))])]),e("div",{class:"flex justify-end gap-4"},[i[15]||(i[15]=e("button",{type:"submit",class:"btn-2"},"Add",-1)),e("button",{type:"button",onClick:k,class:"btn-contrast"},"Close")])],32)])])):D("",!0)}},He={key:0,class:"modal"},Xe={class:"card-bg p-4 md:p-8 w-full max-w-5xl mx-2"},Ze=["value"],Je={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},We={__name:"ModuleEditModal",props:{module:Object,isOpen:Boolean},emits:["update","close"],setup(t,{emit:s}){const l=t,o=s,b=B(),m=u(""),f=u(""),n=u(0),x=u(0),c=u(!1),d=u(!1),a=u(0);P(()=>l.module,k=>{k&&(m.value=k.title||"",f.value=k.description||"",n.value=k.order||0,x.value=k.duration||0,c.value=k.is_active||!1,d.value=k.is_paid||!1,a.value=k.prerequisite_module_id||null)},{immediate:!0});const p=async()=>{const k={id:l.module.id,title:m.value,description:f.value,order:n.value,duration:x.value,is_active:c.value,is_paid:d.value,prerequisite_module_id:a.value};try{await b.updateModule(l.module.id,k),o("update",k),o("close")}catch(r){console.error("Error updating module:",r)}},_=()=>{o("close")};return(k,r)=>t.isOpen?(y(),g("div",He,[e("div",Xe,[r[15]||(r[15]=e("h2",{class:"title-md text-center"},"Edit Module",-1)),e("div",null,[r[7]||(r[7]=e("p",null,"Title:",-1)),w(e("input",{class:"input-1","onUpdate:modelValue":r[0]||(r[0]=i=>m.value=i),required:"",placeholder:"Title"},null,512),[[M,m.value]])]),e("div",null,[r[8]||(r[8]=e("p",null,"Description:",-1)),w(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=i=>f.value=i),class:"input-1"},null,512),[[M,f.value]])]),e("div",null,[r[9]||(r[9]=e("p",null,"Order:",-1)),w(e("input",{class:"input-1","onUpdate:modelValue":r[2]||(r[2]=i=>n.value=i),type:"number"},null,512),[[M,n.value]])]),e("div",null,[r[10]||(r[10]=e("label",{for:"duration",class:"block text-sm font-medium text-gray-700"},"Duration (minutes):",-1)),w(e("input",{type:"number",id:"duration","onUpdate:modelValue":r[3]||(r[3]=i=>x.value=i),class:"input-1"},null,512),[[M,x.value,void 0,{number:!0}]])]),e("div",null,[r[12]||(r[12]=e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1)),w(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":r[4]||(r[4]=i=>a.value=i),class:"input-1"},[r[11]||(r[11]=e("option",{value:""},"Select a prerequisite module",-1)),(y(!0),g(q,null,O(V(b).modules,i=>(y(),g("option",{key:i.id,value:i.id},E(i.title),9,Ze))),128))],512),[[ve,a.value]])]),e("div",Je,[e("div",{onClick:r[5]||(r[5]=i=>c.value=!c.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":c.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":c.value}])},null,2)],2),r[13]||(r[13]=e("label",{class:"ml-2 block text-sm text-gray-900"},"Active",-1))]),e("div",Ke,[e("div",{onClick:r[6]||(r[6]=i=>d.value=!d.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":d.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":d.value}])},null,2)],2),r[14]||(r[14]=e("label",{class:"ml-2 block text-sm text-gray-900"},"Paid",-1))]),e("div",{class:"flex justify-center gap-4"},[e("button",{onClick:p,class:"btn-2"},"Save"),e("button",{onClick:_,class:"btn-contrast"},"Close")])])])):D("",!0)}},et=xe(We,[["__scopeId","data-v-702f4702"]]),tt={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},lt={class:"modal-container bg-white w-full md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},st={class:"p-6"},ot={class:"mb-4"},at={key:0,class:"text-gray-700"},it={__name:"ModuleDeleteModal",props:{isOpen:Boolean,module:Object},emits:["close","confirmDelete"],setup(t,{emit:s}){const l=t,o=s,b=B(),m=async()=>{l.module&&(await b.deleteModule(l.module.id),o("confirmDelete"),o("close"))},f=()=>{o("close")};return(n,x)=>l.isOpen?(y(),g("div",tt,[x[1]||(x[1]=e("div",{class:"modal-overlay absolute inset-0 bg-gray-500 opacity-75"},null,-1)),e("div",lt,[e("div",st,[e("div",ot,[x[0]||(x[0]=e("h2",{class:"text-2xl font-bold mb-4"},"Delete Module",-1)),l.module?(y(),g("p",at,' Are you sure you want to delete "'+E(l.module.title)+'"? ',1)):D("",!0)]),e("div",{class:"flex justify-end"},[e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:m},"Yes"),e("button",{class:"btn-2",onClick:f},"No")])])])])])):D("",!0)}},nt=xe(it,[["__scopeId","data-v-668780de"]]),W=K("material",{state:()=>({materials:{}}),actions:{async fetchMaterials(t){try{const s=await T.get(`/modules/${t}/materials`);this.materials={...this.materials,[t]:s.data}}catch(s){console.error("Error fetching materials:",s)}},async addMaterial(t,s){try{const l=await T.post(`/modules/${t}/materials`,s);this.materials[t]||(this.materials[t]=[]),this.materials[t]=[...this.materials[t],l.data]}catch(l){console.error("Error adding material:",l)}},async deleteMaterial(t,s){try{await T.delete(`/modules/${t}/materials/${s}`),this.materials[t]&&(this.materials[t]=this.materials[t].filter(l=>l.id!==s))}catch(l){console.error("Error deleting material:",l)}},async updateMaterial(t,s,l){try{const o=await T.put(`/modules/${t}/materials/${s}`,l);if(this.materials[t]){const b=this.materials[t].findIndex(m=>m.id===s);b!==-1&&(this.materials[t][b]=o.data)}}catch(o){console.error("Error updating material:",o)}}}}),ee=K("lecture",{state:()=>({lectures:{}}),actions:{async fetchLectures(t){try{const s=await T.get(`/modules/${t}/lectures`);this.lectures={...this.lectures,[t]:s.data}}catch(s){console.error("Error fetching lectures:",s)}},async addLecture(t,s){try{const l=await T.post(`/modules/${t}/lectures`,s);this.lectures[t]||(this.lectures[t]=[]),this.lectures[t]=[...this.lectures[t],l.data]}catch(l){console.error("Error adding lecture:",l)}},async deleteLecture(t,s){try{await T.delete(`/modules/${t}/lectures/${s}`),this.lectures[t]&&(this.lectures[t]=this.lectures[t].filter(l=>l.id!==s))}catch(l){console.error("Error deleting lecture:",l)}},async updateLecture(t,s,l){try{const o=await T.put(`/modules/${t}/lectures/${s}`,l);if(this.lectures[t]){const b=this.lectures[t].findIndex(m=>m.id===s);b!==-1&&(this.lectures[t][b]=o.data)}}catch(o){console.error("Error updating lecture:",o)}}}}),ut={__name:"AddExam",props:{moduleId:{required:!0},examType:{type:String,required:!0}},emits:["submit"],setup(t,{emit:s}){const l=t,o=u({title:"",duration:"",opening_time:"",result_publish_time:"",link:""}),b=s,m=()=>{const f={module_id:l.moduleId,title:o.value.title,type:l.examType,duration:o.value.duration,opening_time:o.value.opening_time,result_publish_time:o.value.result_publish_time,link:o.value.link};b("submit",f),o.value={title:"",duration:"",opening_time:"",link:""}};return(f,n)=>(y(),g("div",null,[e("form",{onSubmit:U(m,["prevent"]),class:"space-y-4"},[e("div",null,[n[4]||(n[4]=e("label",null,"Exam Title:",-1)),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":n[0]||(n[0]=x=>o.value.title=x),placeholder:"Title",required:""},null,512),[[M,o.value.title]])]),e("div",null,[n[5]||(n[5]=e("label",null,"Duration (minutes):",-1)),w(e("input",{class:"input-1",type:"number","onUpdate:modelValue":n[1]||(n[1]=x=>o.value.duration=x),placeholder:"Duration",required:""},null,512),[[M,o.value.duration]])]),e("div",null,[n[6]||(n[6]=e("label",null,"Opening Time:",-1)),w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":n[2]||(n[2]=x=>o.value.opening_time=x),placeholder:"Opening Date & Time",required:""},null,512),[[M,o.value.opening_time]])]),e("div",null,[n[7]||(n[7]=e("label",null,"Result Publish Time:",-1)),w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":n[3]||(n[3]=x=>o.value.result_publish_time=x),placeholder:"Opening Date & Time",required:""},null,512),[[M,o.value.result_publish_time]])]),n[8]||(n[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-2"},"Add Exam")],-1))],32)]))}},dt={class:"flex flex-col md:flex-row items-center gap-x-2"},rt={key:0,class:"w-full md:w-60 text-left md:text-right"},N={__name:"FormLabel",props:["label"],setup(t){return(s,l)=>(y(),g("label",dt,[t.label?(y(),g("span",rt,E(t.label),1)):D("",!0),Fe(s.$slots,"default")]))}},ct={__name:"EditExamForm",props:{exam:Object},emits:["close"],setup(t,{emit:s}){const l=t,o=s,b=ye(),m=u(l.exam.title),f=u(l.exam.duration),n=u(l.exam.opening_time),x=u(l.exam.result_publish_time),c=u(l.exam.link),d=async()=>{const a={...l.exam,title:m.value,duration:f.value,opening_time:n.value,result_publish_time:x.value,link:c.value};try{await b.updateExam(l.exam.module_id,l.exam.id,a),o("close")}catch(p){console.error("Error updating exam:",p)}};return P(()=>l.exam,a=>{m.value=a.title,f.value=a.duration,n.value=a.opening_time,c.value=a.link},{immediate:!0}),(a,p)=>(y(),g("div",null,[e("form",{onSubmit:U(d,["prevent"]),class:"space-y-4"},[j(N,{label:"Exam Title"},{default:S(()=>[w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[0]||(p[0]=_=>m.value=_),placeholder:"Exam Title",required:""},null,512),[[M,m.value]])]),_:1}),j(N,{label:"Duration (minutes)"},{default:S(()=>[w(e("input",{class:"input-1",type:"number","onUpdate:modelValue":p[1]||(p[1]=_=>f.value=_),placeholder:"Duration (minutes)",required:""},null,512),[[M,f.value]])]),_:1}),j(N,{label:"Opening Time"},{default:S(()=>[w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":p[2]||(p[2]=_=>n.value=_),placeholder:"Opening Date & Time",required:""},null,512),[[M,n.value]])]),_:1}),j(N,{label:"Result Publish"},{default:S(()=>[w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":p[3]||(p[3]=_=>x.value=_),placeholder:"Result Publish Time",required:""},null,512),[[M,x.value]])]),_:1}),p[4]||(p[4]=e("hr",{class:"my-3"},null,-1)),p[5]||(p[5]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1))],32)]))}},mt={class:"flex flex-col md:flex-row md:justify-center"},pt={__name:"AddLecture",props:{moduleId:Number,courseId:Number},setup(t){const s=t,l=ee(),o=u(""),b=u(""),m=u(""),f=u(""),n=u("video"),x=async()=>{const c={course_id:s.courseId,module_id:s.moduleId,title:o.value,link:b.value,description:m.value,type:n.value,opening_time:f.value};try{await l.addLecture(s.moduleId,c),o.value="",b.value="",m.value="",n.value="video",f.value=""}catch(d){console.error("Error adding lecture:",d)}};return(c,d)=>(y(),g("div",null,[e("form",{onSubmit:U(x,["prevent"]),class:"space-y-4"},[w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":d[0]||(d[0]=a=>o.value=a),placeholder:"Title",required:""},null,512),[[M,o.value]]),e("div",mt,[e("div",null,[w(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":d[1]||(d[1]=a=>n.value=a),class:"mr-2"},null,512),[[R,n.value]]),d[6]||(d[6]=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1))]),e("div",null,[w(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":d[2]||(d[2]=a=>n.value=a),class:"mr-2"},null,512),[[R,n.value]]),d[7]||(d[7]=e("label",{for:"virtual_platform"},"Live Class Link",-1))])]),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":d[3]||(d[3]=a=>b.value=a),placeholder:"Link",required:""},null,512),[[M,b.value]]),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":d[4]||(d[4]=a=>m.value=a),placeholder:"Description"},null,512),[[M,m.value]]),w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":d[5]||(d[5]=a=>f.value=a),placeholder:"Opening Date & Time",required:""},null,512),[[M,f.value]]),d[8]||(d[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Add Lecture")],-1))],32)]))}},vt={class:"flex flex-col md:flex-row md:justify-center"},ft={__name:"EditLectureForm",props:{lecture:Object},emits:["close"],setup(t,{emit:s}){const l=t,o=s,b=ee(),m=u(l.lecture.title),f=u(l.lecture.link),n=u(l.lecture.description),x=u(l.lecture.opening_time),c=u(l.lecture.type),d=async()=>{const a={...l.lecture,title:m.value,link:f.value,description:n.value,type:c.value,opening_time:x.value};try{await b.updateLecture(l.lecture.module_id,l.lecture.id,a),o("close")}catch(p){console.error("Error updating lecture:",p)}};return P(()=>l.lecture,a=>{m.value=a.title,f.value=a.link,n.value=a.description,c.value=a.type,x.value=a.opening_time},{immediate:!0}),(a,p)=>(y(),g("div",null,[e("form",{onSubmit:U(d,["prevent"]),class:"space-y-4"},[w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[0]||(p[0]=_=>m.value=_),placeholder:"Title",required:""},null,512),[[M,m.value]]),e("div",vt,[e("div",null,[w(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":p[1]||(p[1]=_=>c.value=_),class:"mr-2"},null,512),[[R,c.value]]),p[6]||(p[6]=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1))]),e("div",null,[w(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":p[2]||(p[2]=_=>c.value=_),class:"mr-2"},null,512),[[R,c.value]]),p[7]||(p[7]=e("label",{for:"virtual_platform"},"Live Class Link",-1))])]),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[3]||(p[3]=_=>f.value=_),placeholder:"Link",required:""},null,512),[[M,f.value]]),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[4]||(p[4]=_=>n.value=_),placeholder:"Description"},null,512),[[M,n.value]]),w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":p[5]||(p[5]=_=>x.value=_),placeholder:"Opening Date & Time",required:""},null,512),[[M,x.value]]),p[8]||(p[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1))],32)]))}},xt={class:"mt-4"},yt={class:"mt-4"},bt={class:"mt-4"},gt={class:"mt-4"},wt={__name:"AddMaterial",props:{moduleId:Number,courseId:Number},setup(t){const s=t,l=W(),o=u(""),b=u(""),m=u(""),f=u(""),n=async()=>{const x={course_id:s.courseId,module_id:s.moduleId,title:o.value,link:b.value,description:m.value,opening_time:f.value};try{await l.addMaterial(s.moduleId,x),o.value="",b.value="",m.value="",f.value=""}catch(c){console.error("Error adding material:",c)}};return(x,c)=>(y(),g("div",null,[e("form",{onSubmit:U(n,["prevent"]),class:""},[e("div",xt,[c[4]||(c[4]=e("label",{class:"text-sm"},"Material Title",-1)),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>o.value=d),placeholder:"Title",required:""},null,512),[[M,o.value]])]),e("div",yt,[c[5]||(c[5]=e("label",{class:"text-sm"},"Google Drive Link (Anyone with the link)",-1)),w(e("input",{class:"input-1",type:"url","onUpdate:modelValue":c[1]||(c[1]=d=>b.value=d),placeholder:"Link",required:""},null,512),[[M,b.value]])]),e("div",bt,[c[6]||(c[6]=e("label",{class:"text-sm"},"Description (Optional)",-1)),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[2]||(c[2]=d=>m.value=d),placeholder:"Description"},null,512),[[M,m.value]])]),e("div",gt,[c[7]||(c[7]=e("label",{class:"text-sm"},"Opening Date & Time",-1)),w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":c[3]||(c[3]=d=>f.value=d),placeholder:"Opening Date & Time",required:""},null,512),[[M,f.value]])]),c[8]||(c[8]=e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{type:"submit",class:"btn-2"},"Add Material")],-1))],32)]))}},kt={class:"mt-4"},Mt={class:"mt-4"},_t={class:"mt-4"},ht={class:"mt-4"},$t={__name:"EditMaterialForm",props:{material:Object},emits:["close"],setup(t,{emit:s}){const l=t,o=s,b=W(),m=u(l.material.title),f=u(l.material.link),n=u(l.material.description),x=u(l.material.opening_time),c=async()=>{const d={...l.material,title:m.value,link:f.value,description:n.value,opening_time:x.value};try{await b.updateMaterial(l.material.module_id,l.material.id,d),o("close")}catch(a){console.error("Error updating material:",a)}};return P(()=>l.material,d=>{m.value=d.title,f.value=d.link,n.value=d.description,x.value=d.opening_time},{immediate:!0}),(d,a)=>(y(),g("div",null,[e("form",{onSubmit:U(c,["prevent"])},[e("div",kt,[a[4]||(a[4]=e("label",{class:"text-sm"},"Material Title",-1)),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":a[0]||(a[0]=p=>m.value=p),placeholder:"Title",required:""},null,512),[[M,m.value]])]),e("div",Mt,[a[5]||(a[5]=e("label",{class:"text-sm"},"Google Drive Link (Anyone with the link)",-1)),w(e("input",{class:"input-1",type:"url","onUpdate:modelValue":a[1]||(a[1]=p=>f.value=p),placeholder:"Link",required:""},null,512),[[M,f.value]])]),e("div",_t,[a[6]||(a[6]=e("label",{class:"text-sm"},"Description (Optional)",-1)),w(e("input",{class:"input-1",type:"text","onUpdate:modelValue":a[2]||(a[2]=p=>n.value=p),placeholder:"Description"},null,512),[[M,n.value]])]),e("div",ht,[a[7]||(a[7]=e("label",{class:"text-sm"},"Opening Date & Time",-1)),w(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":a[3]||(a[3]=p=>x.value=p),placeholder:"Opening Date & Time",required:""},null,512),[[M,x.value]])]),a[8]||(a[8]=e("div",{class:"flex justify-center gap-4 mt-6"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1))],32)]))}},Et={class:"flex md:flex-row flex-col items-center gap-4"},Ct={class:"flex flex-1 items-center gap-4"},Dt={class:"text-center border-2 rounded-md p-1.5"},jt={class:"flex-1"},Lt={class:"line-clamp-1"},Tt={class:"flex items-center gap-2"},Vt={key:0},Ut={class:"flex flex-col justify-center space-y-2 divide-y-2"},St={class:"flex items-center gap-4"},qt={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},Ot={class:"text-xs"},At={key:0},zt={key:1},Ft={class:"title-sm"},Nt={class:"text-sm"},Rt={class:"flex items-center gap-2 text-sm text-gray-400"},Pt={class:"flex gap-2"},Bt=["onClick"],It=["onClick"],Qt={class:"flex items-center gap-4"},Yt={class:"title-sm"},Gt={class:"text-sm"},Ht={class:"flex items-center gap-2 text-sm text-gray-400"},Xt={class:"flex gap-2"},Zt=["onClick"],Jt=["onClick"],Kt={class:"grow shrink flex items-center gap-4"},Wt={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},el={key:0,class:"fal fa-ballot-check text-2xl"},tl={key:1,class:"fal fa-question text-3xl"},ll={class:"title-sm"},sl={class:"flex items-center gap-2 text-sm text-gray-400"},ol={class:"grow-0 flex flex-wrap justify-end max-w-[110px] md:max-w-fit gap-2"},al=["onClick"],il=["onClick"],nl={class:"flex gap-4 items-center justify-center mt-2"},ul={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},dl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},rl={class:"mt-4"},cl={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ml={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},pl={class:"mt-4"},vl={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},fl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},xl={class:"mt-4 text-center"},yl={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},bl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},gl={class:"mt-4"},wl={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},kl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ml={class:"mt-4"},_l={key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},hl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},$l={class:"mt-4 text-center"},El={key:7,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Cl={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Dl={class:"mt-4"},jl={key:8,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ll={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Tl={class:"flex justify-end"},Vl={class:"mr-auto font-bold"},Ul={class:"mt-4"},Sl={key:9,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ql={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ol={class:"mt-4 text-center"},Al={__name:"ModuleItem",props:{module:Object},emits:["edit","delete"],setup(t,{emit:s}){const l=t,o=ee(),b=W(),m=ye(),f=u(!1),n=u(!1),x=u(!1),c=u(!1),d=u(null),a=u(null),p=u(!1),_=u(!1),k=u(!1),r=u(null),i=u(null),$=u(!1),I=u(!1),Q=u(!1),Y=u(null),F=u(null),G=u(""),te=s,be=()=>{te("edit",l.module)},ge=()=>{te("delete",l.module)},we=async()=>{f.value=!f.value,f.value&&(await o.fetchLectures(l.module.id),await b.fetchMaterials(l.module.id),await m.fetchExams(l.module.id))},ke=()=>{n.value=!0},le=()=>{n.value=!1},Me=C=>{d.value=C,x.value=!0},se=()=>{x.value=!1},_e=C=>{a.value=C,c.value=!0},H=()=>{c.value=!1},he=async()=>{a.value&&(await o.deleteLecture(l.module.id,a.value.id),H())},$e=async()=>{le()},Ee=()=>{p.value=!0},oe=()=>{p.value=!1},Ce=C=>{r.value=C,_.value=!0},ae=()=>{_.value=!1},De=C=>{i.value=C,k.value=!0},X=()=>{k.value=!1},je=async()=>{i.value&&(await b.deleteMaterial(l.module.id,i.value.id),X())},Le=async()=>{oe()},Z=C=>{const v=new Date(C);return Oe(v,"hh:mm a, dd-MMM-yyyy")},Te=C=>{G.value=C,$.value=!0},ie=()=>{G.value="",$.value=!1},Ve=async C=>{try{await m.addExam(l.module.id,C),ie()}catch(v){console.error("Error adding exam:",v)}},Ue=C=>{Y.value=C,I.value=!0},ne=()=>{I.value=!1},Se=C=>{F.value=C,Q.value=!0},J=()=>{Q.value=!1},qe=async()=>{F.value&&(await m.deleteExam(l.module.id,F.value.id),J())};return(C,v)=>{var de,re,ce;const ue=Ne("RouterLink");return y(),g("li",{class:L(["card-bg p-4",{"bg-gray-100 border-2 border-gray-200 text-gray-400":t.module.is_active==0}])},[e("div",Et,[e("div",Ct,[e("div",Dt,[e("div",{class:L(["text-xl font-bold text-orange-500",{"!text-gray-400":t.module.is_active==0}])},E(t.module.order),3),v[2]||(v[2]=e("div",{class:"text-xs md:text-sm"},"Module",-1))]),e("div",jt,[e("h4",{class:L(["title-md",{"text-gray-400":t.module.is_active==0}])},E(t.module.title),3),e("p",Lt,E(t.module.description),1)])]),e("div",Tt,[e("button",{class:"btn-2",onClick:we},[e("i",{class:L(f.value?"fas fa-angle-up":"fas fa-angle-down")},null,2),v[3]||(v[3]=e("p",null,"Content",-1))]),e("button",{class:"btn-2 pb-2",onClick:be},v[4]||(v[4]=[e("i",{class:"far fa-edit"},null,-1),z("Edit")])),e("button",{class:"btn-contrast pb-2",onClick:ge},v[5]||(v[5]=[e("i",{class:"fas fa-trash-alt"},null,-1),z("Delete ")]))])]),f.value?(y(),g("div",Vt,[v[18]||(v[18]=e("hr",{class:"mb-2"},null,-1)),e("div",Ut,[(y(!0),g(q,null,O(V(o).lectures[t.module.id],h=>(y(),g("div",{key:h.id,class:"flex gap-4 items-center w-full justify-between py-2"},[e("div",St,[e("div",qt,[e("i",{class:L(h.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",Ot,[h.type==="virtual_platform"?(y(),g("p",At,"Live")):(y(),g("p",zt,"Rec"))])]),e("div",null,[e("h4",Ft,E(h.title),1),e("p",Nt,E(h.description),1),e("div",Rt,[v[6]||(v[6]=e("i",{class:"far fa-calendar-check"},null,-1)),e("p",null,E(Z(h.opening_time)),1)])])]),e("div",Pt,[e("button",{class:"btn-1 pb-2",onClick:A=>Me(h)},v[7]||(v[7]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"Edit",-1)]),8,Bt),e("button",{class:"btn-contrast pb-2",onClick:A=>_e(h)},v[8]||(v[8]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",{class:"hidden md:flex"},"Delete",-1)]),8,It)])]))),128)),(y(!0),g(q,null,O(V(b).materials[t.module.id],h=>(y(),g("div",{key:h.id,class:"flex gap-4 items-center w-full justify-between py-2"},[e("div",Qt,[v[10]||(v[10]=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-download"}),e("div",{class:"text-xs"},"Material")],-1)),e("div",null,[e("h4",Yt,E(h.title),1),e("p",Gt,E(h.description),1),e("div",Ht,[v[9]||(v[9]=e("i",{class:"far fa-calendar-check"},null,-1)),e("p",null,E(Z(h.opening_time)),1)])])]),e("div",Xt,[e("button",{class:"btn-1 pb-2",onClick:A=>Ce(h)},v[11]||(v[11]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"Edit",-1)]),8,Zt),e("button",{class:"btn-contrast pb-2",onClick:A=>De(h)},v[12]||(v[12]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",{class:"hidden md:flex"},"Delete",-1)]),8,Jt)])]))),128)),(y(!0),g(q,null,O(V(m).exams[t.module.id],h=>(y(),g("div",{key:h.id,class:"w-full flex gap-4 items-center justify-between py-2"},[e("div",Kt,[e("div",Wt,[h.type==="MCQ"?(y(),g("i",el)):(y(),g("i",tl)),v[13]||(v[13]=e("div",{class:"text-xs"},"Exam",-1))]),e("div",null,[e("h4",ll,E(h.title),1),e("div",sl,[v[14]||(v[14]=e("i",{class:"far fa-calendar-check"},null,-1)),e("p",null,E(Z(h.opening_time)),1)])])]),e("div",ol,[h.user_regular_exams_count>0?(y(),fe(ue,{key:0,to:{name:"ExamResultList",params:{courseId:t.module.course_id,moduleId:t.module.id,examId:h.id}},class:"btn-3 px-3.5"},{default:S(()=>[z(" Results ("+E(h.user_regular_exams_count)+") ",1)]),_:2},1032,["to"])):D("",!0),j(ue,{to:{name:"ExamQuestionList",params:{courseId:t.module.course_id,moduleId:t.module.id,examId:h.id}},class:"btn-3 px-3.5"},{default:S(()=>v[15]||(v[15]=[z(" Questions ")])),_:2},1032,["to"]),e("button",{class:"btn-1 pb-2",onClick:A=>Ue(h)},v[16]||(v[16]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"Edit",-1)]),8,al),e("button",{class:"btn-contrast pb-2",onClick:A=>Se(h)},v[17]||(v[17]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",{class:"hidden md:flex"},"Delete",-1)]),8,il)])]))),128))]),v[19]||(v[19]=e("hr",{class:"my-3"},null,-1)),e("div",nl,[e("button",{class:"btn-1",onClick:ke},"Add Lecture"),e("button",{class:"btn-1",onClick:Ee},"Add Material"),e("button",{class:"btn-1",onClick:v[0]||(v[0]=h=>Te("MCQ"))},"Add MCQ Exam"),D("",!0)])])):D("",!0),n.value?(y(),g("div",ul,[e("div",dl,[e("div",{class:"flex justify-end"},[e("button",{onClick:le,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",rl,[j(pt,{moduleId:t.module.id,courseId:t.module.course_id,onSubmit:$e},null,8,["moduleId","courseId"])])])])):D("",!0),x.value?(y(),g("div",cl,[e("div",ml,[e("div",{class:"flex justify-end"},[e("button",{onClick:se,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",pl,[j(ft,{lecture:d.value,onClose:se},null,8,["lecture"])])])])):D("",!0),c.value?(y(),g("div",vl,[e("div",fl,[e("div",{class:"flex justify-end"},[e("button",{onClick:H,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",xl,[e("p",null,"Do you want to delete '"+E((de=a.value)==null?void 0:de.title)+"' lecture?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:he},"Yes"),e("button",{class:"btn-contrast",onClick:H},"No")])])])])):D("",!0),p.value?(y(),g("div",yl,[e("div",bl,[e("div",{class:"flex justify-between"},[v[20]||(v[20]=e("h2",{class:"title-md"},"Material Create Form",-1)),e("button",{onClick:oe,class:"text-red-500 hover:text-red-700 text-3xl"}," × ")]),e("div",gl,[j(wt,{moduleId:t.module.id,courseId:t.module.course_id,onSubmit:Le},null,8,["moduleId","courseId"])])])])):D("",!0),_.value?(y(),g("div",wl,[e("div",kl,[e("div",{class:"flex justify-between"},[v[21]||(v[21]=e("h2",{class:"title-md"},"Material Edit Form",-1)),e("button",{onClick:ae,class:"text-red-500 hover:text-red-700 text-3xl"}," × ")]),e("div",Ml,[j($t,{material:r.value,onClose:ae},null,8,["material"])])])])):D("",!0),k.value?(y(),g("div",_l,[e("div",hl,[e("div",{class:"flex justify-end"},[e("button",{onClick:X,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",$l,[e("p",null,"Do you want to delete '"+E((re=i.value)==null?void 0:re.title)+"' material?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:je},"Yes"),e("button",{class:"btn-contrast",onClick:X},"No")])])])])):D("",!0),$.value?(y(),g("div",El,[e("div",Cl,[e("div",{class:"flex justify-end"},[v[22]||(v[22]=e("div",{class:"mr-auto font-bold"},"Add Exam Info",-1)),e("button",{onClick:ie,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),v[23]||(v[23]=e("hr",{class:"my-3"},null,-1)),e("div",Dl,[j(ut,{moduleId:t.module.id,examType:G.value,onSubmit:Ve},null,8,["moduleId","examType"])])])])):D("",!0),I.value?(y(),g("div",jl,[e("div",Ll,[e("div",Tl,[e("div",Vl,"Edit Form : "+E(Y.value.title),1),e("button",{onClick:ne,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),v[24]||(v[24]=e("hr",{class:"my-3"},null,-1)),e("div",Ul,[j(ct,{exam:Y.value,onClose:ne},null,8,["exam"])])])])):D("",!0),Q.value?(y(),g("div",Sl,[e("div",ql,[e("div",{class:"flex justify-end"},[e("button",{onClick:J,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Ol,[e("p",null,"Do you want to delete '"+E((ce=F.value)==null?void 0:ce.title)+"' exam?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:qe},"Yes"),e("button",{class:"btn-contrast",onClick:J},"No")])])])])):D("",!0)],2)}}},zl={class:"my-container space-y-2"},Fl={class:"title-lg text-center"},Nl={key:0},Rl={class:"space-y-2"},Pl={key:1,class:"flex justify-center"},Bl={class:"flex justify-center py-2"},Xl={__name:"ModuleListView",setup(t){const s=me(),l=Ae(),o=B(),b=u(null),m=u(null),f=u(!1),n=u(!1),x=u(!1);pe(async()=>{try{await l.fetchCourse(s.params.id),b.value=l.course,await o.fetchModules(s.params.id)}catch(k){console.error("Error fetching data:",k)}});const c=k=>{m.value=k,f.value=!0},d=k=>{m.value=k,n.value=!0},a=async k=>{try{await o.addModule(s.params.id,k),await o.fetchModules(s.params.id),x.value=!1}catch(r){console.error("Error adding module:",r)}},p=async k=>{try{await o.updateModule(k.id,k),await o.fetchModules(s.params.id),f.value=!1}catch(r){console.error("Error updating module:",r)}},_=async()=>{if(m.value)try{await o.deleteModule(m.value.id),await o.fetchModules(s.params.id),n.value=!1}catch(k){console.error("Error deleting module:",k)}};return(k,r)=>(y(),g("div",zl,[e("h1",Fl,E(b.value?b.value.title:"Loading...")+" Modules",1),V(o).modules.length>0?(y(),g("div",Nl,[e("ul",Rl,[(y(!0),g(q,null,O(V(o).modules,i=>(y(),fe(Al,{key:i.id,module:i,onEdit:c,onDelete:d},null,8,["module"]))),128))])])):(y(),g("div",Pl,r[4]||(r[4]=[e("p",{class:""},"No modules available for this course.",-1)]))),e("div",Bl,[e("button",{class:"btn-2",onClick:r[0]||(r[0]=i=>x.value=!0)},r[5]||(r[5]=[e("i",{class:"fas fa-plus"},null,-1),z("Add Module ")]))]),j(Ge,{isOpen:x.value,onAddModule:a,onClose:r[1]||(r[1]=i=>x.value=!1)},null,8,["isOpen"]),j(et,{class:"z-40",module:m.value,isOpen:f.value,onClose:r[2]||(r[2]=i=>f.value=!1),onUpdate:p},null,8,["module","isOpen"]),j(nt,{class:"z-40",module:m.value,isOpen:n.value,onClose:r[3]||(r[3]=i=>n.value=!1),onConfirmDelete:_},null,8,["module","isOpen"])]))}};export{Xl as default};
