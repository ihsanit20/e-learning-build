import{$ as X,a0 as T,c as Ne,b as pe,r as a,o as ve,e as v,f as _,g as e,x as S,z as h,A as b,a5 as _e,F as O,h as A,t as M,i as N,n as L,p as D,w as P,B as fe,C as he,Z as Re,E as j,s as U,G as B,m as Ie,q as F,j as xe,v as Be,u as Pe}from"./index-C_Bbi4Qr.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as be}from"./exam-BVvfwEt3.js";const Q=X("module",{state:()=>({modules:[]}),actions:{async fetchModules(t){try{const o=await T.get(`/courses/${t}/modules`);this.modules=o.data}catch(o){console.error("Failed to fetch modules:",o)}},async addModule(t,o){try{const l=await T.post("/modules",{course_id:t,...o});this.modules.push(l.data)}catch(l){console.error("Failed to add module:",l)}},async updateModule(t,o){try{const l=await T.put(`/modules/${t}`,o),s=this.modules.findIndex(f=>f.id===t);s!==-1&&(this.modules[s]=l.data)}catch(l){console.error("Failed to update module:",l)}},async deleteModule(t){try{await T.delete(`/modules/${t}`),this.modules=this.modules.filter(o=>o.id!==t)}catch(o){console.error("Failed to delete module:",o)}}}}),Qe={key:0,class:"flex items-center justify-center"},Ye={class:"card-bg p-4 md:p-8 w-full max-w-6xl"},Ge=e("h2",{class:"title-md text-center"},"Add Module",-1),Ze=e("p",null,"Title:",-1),He=e("p",null,"Description:",-1),Je={class:"grid md:grid-cols-5 gap-4"},Ke=e("p",null,"Module Order:",-1),We=e("p",null,"Duration (minutes):",-1),Xe=e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1),et=e("option",{value:""},"Select a prerequisite module",-1),tt=["value"],lt={class:"flex items-center gap-2"},st=e("label",{for:"is_active",class:""},"Active",-1),ot={class:"flex items-center gap-2"},at=e("label",{for:"is_paid",class:""},"Paid",-1),it=e("button",{type:"submit",class:"btn-2"},"Add",-1),nt={__name:"ModuleAddModal",props:{isOpen:Boolean},emits:["add-module","close"],setup(t,{emit:o}){const l=o,s=Q(),f=Ne(),d=pe(),u=a(""),r=a(""),c=a(""),m=a(""),n=a(!1),i=a(!1),p=a(""),g=a("");ve(()=>{s.fetchModules(d.params.id)});const E=async()=>{const x=d.params.id,w={title:u.value,description:r.value,order:c.value,duration:m.value,is_active:n.value,is_paid:i.value,prerequisite_module_id:p.value};try{await s.addModule(x,w),g.value="Module is added",u.value="",r.value="",c.value="",m.value="",n.value=!1,i.value=!1,p.value="",setTimeout(()=>{f.push(`/course-list/${x}/modules`)},2e3)}catch(k){console.error("Failed to add module:",k)}},y=()=>{l("close")};return(x,w)=>t.isOpen?(v(),_("div",Qe,[e("div",Ye,[Ge,e("form",{onSubmit:S(E,["prevent"]),class:"space-y-2"},[e("div",null,[Ze,h(e("input",{class:"input-1","onUpdate:modelValue":w[0]||(w[0]=k=>u.value=k),required:"",placeholder:"Title"},null,512),[[b,u.value]])]),e("div",null,[He,h(e("textarea",{"onUpdate:modelValue":w[1]||(w[1]=k=>r.value=k),class:"input-1"},null,512),[[b,r.value]])]),e("div",Je,[e("div",null,[Ke,h(e("input",{class:"input-1","onUpdate:modelValue":w[2]||(w[2]=k=>c.value=k),type:"number"},null,512),[[b,c.value]])]),e("div",null,[We,h(e("input",{class:"input-1","onUpdate:modelValue":w[3]||(w[3]=k=>m.value=k),type:"number"},null,512),[[b,m.value,void 0,{number:!0}]])]),e("div",null,[Xe,h(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":w[4]||(w[4]=k=>p.value=k),class:"input-1"},[et,(v(!0),_(O,null,A(N(s).modules,k=>(v(),_("option",{key:k.id,value:k.id},M(k.title),9,tt))),128))],512),[[_e,p.value]])]),e("div",lt,[e("div",{onClick:w[5]||(w[5]=k=>n.value=!n.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":n.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":n.value}])},null,2)],2),st]),e("div",ot,[e("div",{onClick:w[6]||(w[6]=k=>i.value=!i.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":i.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":i.value}])},null,2)],2),at])]),e("div",{class:"flex justify-end gap-4"},[it,e("button",{type:"button",onClick:y,class:"btn-contrast"},"Close")])],32)])])):D("",!0)}},V=t=>(fe("data-v-702f4702"),t=t(),he(),t),dt={key:0,class:"modal"},ut={class:"card-bg p-4 md:p-8 w-full max-w-5xl mx-2"},rt=V(()=>e("h2",{class:"title-md text-center"},"Edit Module",-1)),ct=V(()=>e("p",null,"Title:",-1)),mt=V(()=>e("p",null,"Description:",-1)),pt=V(()=>e("p",null,"Order:",-1)),vt=V(()=>e("label",{for:"duration",class:"block text-sm font-medium text-gray-700"},"Duration (minutes):",-1)),_t=V(()=>e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1)),ft=V(()=>e("option",{value:""},"Select a prerequisite module",-1)),ht=["value"],xt={class:"flex items-center gap-2"},yt=V(()=>e("label",{class:"ml-2 block text-sm text-gray-900"},"Active",-1)),bt={class:"flex items-center gap-2"},gt=V(()=>e("label",{class:"ml-2 block text-sm text-gray-900"},"Paid",-1)),wt={__name:"ModuleEditModal",props:{module:Object,isOpen:Boolean},emits:["update","close"],setup(t,{emit:o}){const l=t,s=o,f=Q(),d=a(""),u=a(""),r=a(0),c=a(0),m=a(!1),n=a(!1),i=a(0);P(()=>l.module,E=>{E&&(d.value=E.title||"",u.value=E.description||"",r.value=E.order||0,c.value=E.duration||0,m.value=E.is_active||!1,n.value=E.is_paid||!1,i.value=E.prerequisite_module_id||null)},{immediate:!0});const p=async()=>{const E={id:l.module.id,title:d.value,description:u.value,order:r.value,duration:c.value,is_active:m.value,is_paid:n.value,prerequisite_module_id:i.value};try{await f.updateModule(l.module.id,E),s("update",E),s("close")}catch(y){console.error("Error updating module:",y)}},g=()=>{s("close")};return(E,y)=>t.isOpen?(v(),_("div",dt,[e("div",ut,[rt,e("div",null,[ct,h(e("input",{class:"input-1","onUpdate:modelValue":y[0]||(y[0]=x=>d.value=x),required:"",placeholder:"Title"},null,512),[[b,d.value]])]),e("div",null,[mt,h(e("textarea",{"onUpdate:modelValue":y[1]||(y[1]=x=>u.value=x),class:"input-1"},null,512),[[b,u.value]])]),e("div",null,[pt,h(e("input",{class:"input-1","onUpdate:modelValue":y[2]||(y[2]=x=>r.value=x),type:"number"},null,512),[[b,r.value]])]),e("div",null,[vt,h(e("input",{type:"number",id:"duration","onUpdate:modelValue":y[3]||(y[3]=x=>c.value=x),class:"input-1"},null,512),[[b,c.value,void 0,{number:!0}]])]),e("div",null,[_t,h(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":y[4]||(y[4]=x=>i.value=x),class:"input-1"},[ft,(v(!0),_(O,null,A(N(f).modules,x=>(v(),_("option",{key:x.id,value:x.id},M(x.title),9,ht))),128))],512),[[_e,i.value]])]),e("div",xt,[e("div",{onClick:y[5]||(y[5]=x=>m.value=!m.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":m.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":m.value}])},null,2)],2),yt]),e("div",bt,[e("div",{onClick:y[6]||(y[6]=x=>n.value=!n.value),class:L(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":n.value}])},[e("div",{class:L(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":n.value}])},null,2)],2),gt]),e("div",{class:"flex justify-center gap-4"},[e("button",{onClick:p,class:"btn-2"},"Save"),e("button",{onClick:g,class:"btn-contrast"},"Close")])])])):D("",!0)}},$t=ye(wt,[["__scopeId","data-v-702f4702"]]),ge=t=>(fe("data-v-668780de"),t=t(),he(),t),kt={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},Mt=ge(()=>e("div",{class:"modal-overlay absolute inset-0 bg-gray-500 opacity-75"},null,-1)),Et={class:"modal-container bg-white w-full md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},Ct={class:"p-6"},Dt={class:"mb-4"},jt=ge(()=>e("h2",{class:"text-2xl font-bold mb-4"},"Delete Module",-1)),Lt={key:0,class:"text-gray-700"},Tt={__name:"ModuleDeleteModal",props:{isOpen:Boolean,module:Object},emits:["close","confirmDelete"],setup(t,{emit:o}){const l=t,s=o,f=Q(),d=async()=>{l.module&&(await f.deleteModule(l.module.id),s("confirmDelete"),s("close"))},u=()=>{s("close")};return(r,c)=>l.isOpen?(v(),_("div",kt,[Mt,e("div",Et,[e("div",Ct,[e("div",Dt,[jt,l.module?(v(),_("p",Lt,' Are you sure you want to delete "'+M(l.module.title)+'"? ',1)):D("",!0)]),e("div",{class:"flex justify-end"},[e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:d},"Yes"),e("button",{class:"btn-2",onClick:u},"No")])])])])])):D("",!0)}},Vt=ye(Tt,[["__scopeId","data-v-668780de"]]),ee=X("material",{state:()=>({materials:{}}),actions:{async fetchMaterials(t){try{const o=await T.get(`/modules/${t}/materials`);this.materials={...this.materials,[t]:o.data}}catch(o){console.error("Error fetching materials:",o)}},async addMaterial(t,o){try{const l=await T.post(`/modules/${t}/materials`,o);this.materials[t]||(this.materials[t]=[]),this.materials[t]=[...this.materials[t],l.data]}catch(l){console.error("Error adding material:",l)}},async deleteMaterial(t,o){try{await T.delete(`/modules/${t}/materials/${o}`),this.materials[t]&&(this.materials[t]=this.materials[t].filter(l=>l.id!==o))}catch(l){console.error("Error deleting material:",l)}},async updateMaterial(t,o,l){try{const s=await T.put(`/modules/${t}/materials/${o}`,l);if(this.materials[t]){const f=this.materials[t].findIndex(d=>d.id===o);f!==-1&&(this.materials[t][f]=s.data)}}catch(s){console.error("Error updating material:",s)}}}}),te=X("lecture",{state:()=>({lectures:{}}),actions:{async fetchLectures(t){try{const o=await T.get(`/modules/${t}/lectures`);this.lectures={...this.lectures,[t]:o.data}}catch(o){console.error("Error fetching lectures:",o)}},async addLecture(t,o){try{const l=await T.post(`/modules/${t}/lectures`,o);this.lectures[t]||(this.lectures[t]=[]),this.lectures[t]=[...this.lectures[t],l.data]}catch(l){console.error("Error adding lecture:",l)}},async deleteLecture(t,o){try{await T.delete(`/modules/${t}/lectures/${o}`),this.lectures[t]&&(this.lectures[t]=this.lectures[t].filter(l=>l.id!==o))}catch(l){console.error("Error deleting lecture:",l)}},async updateLecture(t,o,l){try{const s=await T.put(`/modules/${t}/lectures/${o}`,l);if(this.lectures[t]){const f=this.lectures[t].findIndex(d=>d.id===o);f!==-1&&(this.lectures[t][f]=s.data)}}catch(s){console.error("Error updating lecture:",s)}}}}),St=e("label",null,"Exam Title:",-1),qt=e("label",null,"Duration (minutes):",-1),Ut=e("label",null,"Opening Time:",-1),Ot=e("label",null,"Result Publish Time:",-1),At=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-2"},"Add Exam")],-1),zt={__name:"AddExam",props:{moduleId:{required:!0},examType:{type:String,required:!0}},emits:["submit"],setup(t,{emit:o}){const l=t,s=a({title:"",duration:"",opening_time:"",result_publish_time:"",link:""}),f=o,d=()=>{const u={module_id:l.moduleId,title:s.value.title,type:l.examType,duration:s.value.duration,opening_time:s.value.opening_time,result_publish_time:s.value.result_publish_time,link:s.value.link};f("submit",u),s.value={title:"",duration:"",opening_time:"",link:""}};return(u,r)=>(v(),_("div",null,[e("form",{onSubmit:S(d,["prevent"]),class:"space-y-4"},[e("div",null,[St,h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":r[0]||(r[0]=c=>s.value.title=c),placeholder:"Title",required:""},null,512),[[b,s.value.title]])]),e("div",null,[qt,h(e("input",{class:"input-1",type:"number","onUpdate:modelValue":r[1]||(r[1]=c=>s.value.duration=c),placeholder:"Duration",required:""},null,512),[[b,s.value.duration]])]),e("div",null,[Ut,h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":r[2]||(r[2]=c=>s.value.opening_time=c),placeholder:"Opening Date & Time",required:""},null,512),[[b,s.value.opening_time]])]),e("div",null,[Ot,h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":r[3]||(r[3]=c=>s.value.result_publish_time=c),placeholder:"Opening Date & Time",required:""},null,512),[[b,s.value.result_publish_time]])]),At],32)]))}},Ft={class:"flex flex-col md:flex-row items-center gap-x-2"},Nt={key:0,class:"w-full md:w-60 text-left md:text-right"},I={__name:"FormLabel",props:["label"],setup(t){return(o,l)=>(v(),_("label",Ft,[t.label?(v(),_("span",Nt,M(t.label),1)):D("",!0),Re(o.$slots,"default")]))}},Rt=e("hr",{class:"my-3"},null,-1),It=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1),Bt={__name:"EditExamForm",props:{exam:Object},emits:["close"],setup(t,{emit:o}){const l=t,s=o,f=be(),d=a(l.exam.title),u=a(l.exam.duration),r=a(l.exam.opening_time),c=a(l.exam.result_publish_time),m=a(l.exam.link),n=async()=>{const i={...l.exam,title:d.value,duration:u.value,opening_time:r.value,result_publish_time:c.value,link:m.value};try{await f.updateExam(l.exam.module_id,l.exam.id,i),s("close")}catch(p){console.error("Error updating exam:",p)}};return P(()=>l.exam,i=>{d.value=i.title,u.value=i.duration,r.value=i.opening_time,m.value=i.link},{immediate:!0}),(i,p)=>(v(),_("div",null,[e("form",{onSubmit:S(n,["prevent"]),class:"space-y-4"},[j(I,{label:"Exam Title"},{default:U(()=>[h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[0]||(p[0]=g=>d.value=g),placeholder:"Exam Title",required:""},null,512),[[b,d.value]])]),_:1}),j(I,{label:"Duration (minutes)"},{default:U(()=>[h(e("input",{class:"input-1",type:"number","onUpdate:modelValue":p[1]||(p[1]=g=>u.value=g),placeholder:"Duration (minutes)",required:""},null,512),[[b,u.value]])]),_:1}),j(I,{label:"Opening Time"},{default:U(()=>[h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":p[2]||(p[2]=g=>r.value=g),placeholder:"Opening Date & Time",required:""},null,512),[[b,r.value]])]),_:1}),j(I,{label:"Result Publish"},{default:U(()=>[h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":p[3]||(p[3]=g=>c.value=g),placeholder:"Result Publish Time",required:""},null,512),[[b,c.value]])]),_:1}),Rt,It],32)]))}},Pt={class:"flex flex-col md:flex-row md:justify-center"},Qt=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1),Yt=e("label",{for:"virtual_platform"},"Live Class Link",-1),Gt=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Add Lecture")],-1),Zt={__name:"AddLecture",props:{moduleId:Number,courseId:Number},setup(t){const o=t,l=te(),s=a(""),f=a(""),d=a(""),u=a(""),r=a("video"),c=async()=>{const m={course_id:o.courseId,module_id:o.moduleId,title:s.value,link:f.value,description:d.value,type:r.value,opening_time:u.value};try{await l.addLecture(o.moduleId,m),s.value="",f.value="",d.value="",r.value="video",u.value=""}catch(n){console.error("Error adding lecture:",n)}};return(m,n)=>(v(),_("div",null,[e("form",{onSubmit:S(c,["prevent"]),class:"space-y-4"},[h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":n[0]||(n[0]=i=>s.value=i),placeholder:"Title",required:""},null,512),[[b,s.value]]),e("div",Pt,[e("div",null,[h(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":n[1]||(n[1]=i=>r.value=i),class:"mr-2"},null,512),[[B,r.value]]),Qt]),e("div",null,[h(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":n[2]||(n[2]=i=>r.value=i),class:"mr-2"},null,512),[[B,r.value]]),Yt])]),h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":n[3]||(n[3]=i=>f.value=i),placeholder:"Link",required:""},null,512),[[b,f.value]]),h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":n[4]||(n[4]=i=>d.value=i),placeholder:"Description"},null,512),[[b,d.value]]),h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":n[5]||(n[5]=i=>u.value=i),placeholder:"Opening Date & Time",required:""},null,512),[[b,u.value]]),Gt],32)]))}},Ht={class:"flex flex-col md:flex-row md:justify-center"},Jt=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1),Kt=e("label",{for:"virtual_platform"},"Live Class Link",-1),Wt=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1),Xt={__name:"EditLectureForm",props:{lecture:Object},emits:["close"],setup(t,{emit:o}){const l=t,s=o,f=te(),d=a(l.lecture.title),u=a(l.lecture.link),r=a(l.lecture.description),c=a(l.lecture.opening_time),m=a(l.lecture.type),n=async()=>{const i={...l.lecture,title:d.value,link:u.value,description:r.value,type:m.value,opening_time:c.value};try{await f.updateLecture(l.lecture.module_id,l.lecture.id,i),s("close")}catch(p){console.error("Error updating lecture:",p)}};return P(()=>l.lecture,i=>{d.value=i.title,u.value=i.link,r.value=i.description,m.value=i.type,c.value=i.opening_time},{immediate:!0}),(i,p)=>(v(),_("div",null,[e("form",{onSubmit:S(n,["prevent"]),class:"space-y-4"},[h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[0]||(p[0]=g=>d.value=g),placeholder:"Title",required:""},null,512),[[b,d.value]]),e("div",Ht,[e("div",null,[h(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":p[1]||(p[1]=g=>m.value=g),class:"mr-2"},null,512),[[B,m.value]]),Jt]),e("div",null,[h(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":p[2]||(p[2]=g=>m.value=g),class:"mr-2"},null,512),[[B,m.value]]),Kt])]),h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[3]||(p[3]=g=>u.value=g),placeholder:"Link",required:""},null,512),[[b,u.value]]),h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":p[4]||(p[4]=g=>r.value=g),placeholder:"Description"},null,512),[[b,r.value]]),h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":p[5]||(p[5]=g=>c.value=g),placeholder:"Opening Date & Time",required:""},null,512),[[b,c.value]]),Wt],32)]))}},el={class:"mt-4"},tl=e("label",{class:"text-sm"},"Material Title",-1),ll={class:"mt-4"},sl=e("label",{class:"text-sm"},"Google Drive Link (Anyone with the link)",-1),ol={class:"mt-4"},al=e("label",{class:"text-sm"},"Description (Optional)",-1),il={class:"mt-4"},nl=e("label",{class:"text-sm"},"Opening Date & Time",-1),dl=e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{type:"submit",class:"btn-2"},"Add Material")],-1),ul={__name:"AddMaterial",props:{moduleId:Number,courseId:Number},setup(t){const o=t,l=ee(),s=a(""),f=a(""),d=a(""),u=a(""),r=async()=>{const c={course_id:o.courseId,module_id:o.moduleId,title:s.value,link:f.value,description:d.value,opening_time:u.value};try{await l.addMaterial(o.moduleId,c),s.value="",f.value="",d.value="",u.value=""}catch(m){console.error("Error adding material:",m)}};return(c,m)=>(v(),_("div",null,[e("form",{onSubmit:S(r,["prevent"]),class:""},[e("div",el,[tl,h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":m[0]||(m[0]=n=>s.value=n),placeholder:"Title",required:""},null,512),[[b,s.value]])]),e("div",ll,[sl,h(e("input",{class:"input-1",type:"url","onUpdate:modelValue":m[1]||(m[1]=n=>f.value=n),placeholder:"Link",required:""},null,512),[[b,f.value]])]),e("div",ol,[al,h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":m[2]||(m[2]=n=>d.value=n),placeholder:"Description"},null,512),[[b,d.value]])]),e("div",il,[nl,h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":m[3]||(m[3]=n=>u.value=n),placeholder:"Opening Date & Time",required:""},null,512),[[b,u.value]])]),dl],32)]))}},rl={class:"mt-4"},cl=e("label",{class:"text-sm"},"Material Title",-1),ml={class:"mt-4"},pl=e("label",{class:"text-sm"},"Google Drive Link (Anyone with the link)",-1),vl={class:"mt-4"},_l=e("label",{class:"text-sm"},"Description (Optional)",-1),fl={class:"mt-4"},hl=e("label",{class:"text-sm"},"Opening Date & Time",-1),xl=e("div",{class:"flex justify-center gap-4 mt-6"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1),yl={__name:"EditMaterialForm",props:{material:Object},emits:["close"],setup(t,{emit:o}){const l=t,s=o,f=ee(),d=a(l.material.title),u=a(l.material.link),r=a(l.material.description),c=a(l.material.opening_time),m=async()=>{const n={...l.material,title:d.value,link:u.value,description:r.value,opening_time:c.value};try{await f.updateMaterial(l.material.module_id,l.material.id,n),s("close")}catch(i){console.error("Error updating material:",i)}};return P(()=>l.material,n=>{d.value=n.title,u.value=n.link,r.value=n.description,c.value=n.opening_time},{immediate:!0}),(n,i)=>(v(),_("div",null,[e("form",{onSubmit:S(m,["prevent"])},[e("div",rl,[cl,h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":i[0]||(i[0]=p=>d.value=p),placeholder:"Title",required:""},null,512),[[b,d.value]])]),e("div",ml,[pl,h(e("input",{class:"input-1",type:"url","onUpdate:modelValue":i[1]||(i[1]=p=>u.value=p),placeholder:"Link",required:""},null,512),[[b,u.value]])]),e("div",vl,[_l,h(e("input",{class:"input-1",type:"text","onUpdate:modelValue":i[2]||(i[2]=p=>r.value=p),placeholder:"Description"},null,512),[[b,r.value]])]),e("div",fl,[hl,h(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":i[3]||(i[3]=p=>c.value=p),placeholder:"Opening Date & Time",required:""},null,512),[[b,c.value]])]),xl],32)]))}},bl={class:"flex md:flex-row flex-col items-center gap-4"},gl={class:"flex flex-1 items-center gap-4"},wl={class:"text-center border-2 rounded-md p-1.5"},$l=e("div",{class:"text-xs md:text-sm"},"Module",-1),kl={class:"flex-1"},Ml={class:"line-clamp-1"},El={class:"flex items-center gap-2"},Cl=e("p",null,"Content",-1),Dl=e("i",{class:"far fa-edit"},null,-1),jl=e("i",{class:"fas fa-trash-alt"},null,-1),Ll={key:0},Tl=e("hr",{class:"mb-2"},null,-1),Vl={class:"flex flex-col justify-center space-y-2 divide-y-2"},Sl={class:"flex items-center gap-4"},ql={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},Ul={class:"text-xs"},Ol={key:0},Al={key:1},zl={class:"title-sm"},Fl={class:"text-sm"},Nl={class:"flex items-center gap-2 text-sm text-gray-400"},Rl=e("i",{class:"far fa-calendar-check"},null,-1),Il={class:"flex gap-2"},Bl=["onClick"],Pl=e("i",{class:"far fa-edit"},null,-1),Ql=e("span",{class:"hidden md:flex"},"Edit",-1),Yl=[Pl,Ql],Gl=["onClick"],Zl=e("i",{class:"fas fa-trash-alt"},null,-1),Hl=e("span",{class:"hidden md:flex"},"Delete",-1),Jl=[Zl,Hl],Kl={class:"flex items-center gap-4"},Wl=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-download"}),e("div",{class:"text-xs"},"Material")],-1),Xl={class:"title-sm"},es={class:"text-sm"},ts={class:"flex items-center gap-2 text-sm text-gray-400"},ls=e("i",{class:"far fa-calendar-check"},null,-1),ss={class:"flex gap-2"},os=["onClick"],as=e("i",{class:"far fa-edit"},null,-1),is=e("span",{class:"hidden md:flex"},"Edit",-1),ns=[as,is],ds=["onClick"],us=e("i",{class:"fas fa-trash-alt"},null,-1),rs=e("span",{class:"hidden md:flex"},"Delete",-1),cs=[us,rs],ms={class:"grow shrink flex items-center gap-4"},ps={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},vs={key:0,class:"fal fa-ballot-check text-2xl"},_s={key:1,class:"fal fa-question text-3xl"},fs=e("div",{class:"text-xs"},"Exam",-1),hs={class:"title-sm"},xs={class:"flex items-center gap-2 text-sm text-gray-400"},ys=e("i",{class:"far fa-calendar-check"},null,-1),bs={class:"grow-0 flex flex-wrap justify-end max-w-[110px] md:max-w-fit gap-2"},gs=["onClick"],ws=e("i",{class:"far fa-edit"},null,-1),$s=e("span",{class:"hidden md:flex"},"Edit",-1),ks=[ws,$s],Ms=["onClick"],Es=e("i",{class:"fas fa-trash-alt"},null,-1),Cs=e("span",{class:"hidden md:flex"},"Delete",-1),Ds=[Es,Cs],js=e("hr",{class:"my-3"},null,-1),Ls={class:"flex gap-4 items-center justify-center mt-2"},Ts={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Vs={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ss={class:"mt-4"},qs={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Us={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Os={class:"mt-4"},As={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},zs={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Fs={class:"mt-4 text-center"},Ns={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Rs={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Is=e("h2",{class:"title-md"},"Material Create Form",-1),Bs={class:"mt-4"},Ps={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Qs={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ys=e("h2",{class:"title-md"},"Material Edit Form",-1),Gs={class:"mt-4"},Zs={key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Hs={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Js={class:"mt-4 text-center"},Ks={key:7,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ws={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Xs=e("div",{class:"mr-auto font-bold"},"Add Exam Info",-1),eo=e("hr",{class:"my-3"},null,-1),to={class:"mt-4"},lo={key:8,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},so={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},oo={class:"flex justify-end"},ao={class:"mr-auto font-bold"},io=e("hr",{class:"my-3"},null,-1),no={class:"mt-4"},uo={key:9,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ro={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},co={class:"mt-4 text-center"},mo={__name:"ModuleItem",props:{module:Object},emits:["edit","delete"],setup(t,{emit:o}){const l=t,s=te(),f=ee(),d=be(),u=a(!1),r=a(!1),c=a(!1),m=a(!1),n=a(null),i=a(null),p=a(!1),g=a(!1),E=a(!1),y=a(null),x=a(null),w=a(!1),k=a(!1),Y=a(!1),G=a(null),R=a(null),Z=a(""),le=o,we=()=>{le("edit",l.module)},$e=()=>{le("delete",l.module)},ke=async()=>{u.value=!u.value,u.value&&(await s.fetchLectures(l.module.id),await f.fetchMaterials(l.module.id),await d.fetchExams(l.module.id))},Me=()=>{r.value=!0},se=()=>{r.value=!1},Ee=C=>{n.value=C,c.value=!0},oe=()=>{c.value=!1},Ce=C=>{i.value=C,m.value=!0},H=()=>{m.value=!1},De=async()=>{i.value&&(await s.deleteLecture(l.module.id,i.value.id),H())},je=async()=>{se()},Le=()=>{p.value=!0},ae=()=>{p.value=!1},Te=C=>{y.value=C,g.value=!0},ie=()=>{g.value=!1},Ve=C=>{x.value=C,E.value=!0},J=()=>{E.value=!1},Se=async()=>{x.value&&(await f.deleteMaterial(l.module.id,x.value.id),J())},qe=async()=>{ae()},K=C=>{const q=new Date(C);return Be(q,"hh:mm a, dd-MMM-yyyy")},Ue=C=>{Z.value=C,w.value=!0},ne=()=>{Z.value="",w.value=!1},Oe=async C=>{try{await d.addExam(l.module.id,C),ne()}catch(q){console.error("Error adding exam:",q)}},Ae=C=>{G.value=C,k.value=!0},de=()=>{k.value=!1},ze=C=>{R.value=C,Y.value=!0},W=()=>{Y.value=!1},Fe=async()=>{R.value&&(await d.deleteExam(l.module.id,R.value.id),W())};return(C,q)=>{var re,ce,me;const ue=Ie("RouterLink");return v(),_("li",{class:L(["card-bg p-4",{"bg-gray-100 border-2 border-gray-200 text-gray-400":t.module.is_active==0}])},[e("div",bl,[e("div",gl,[e("div",wl,[e("div",{class:L(["text-xl font-bold text-orange-500",{"!text-gray-400":t.module.is_active==0}])},M(t.module.order),3),$l]),e("div",kl,[e("h4",{class:L(["title-md",{"text-gray-400":t.module.is_active==0}])},M(t.module.title),3),e("p",Ml,M(t.module.description),1)])]),e("div",El,[e("button",{class:"btn-2",onClick:ke},[e("i",{class:L(u.value?"fas fa-angle-up":"fas fa-angle-down")},null,2),Cl]),e("button",{class:"btn-2 pb-2",onClick:we},[Dl,F("Edit")]),e("button",{class:"btn-contrast pb-2",onClick:$e},[jl,F("Delete ")])])]),u.value?(v(),_("div",Ll,[Tl,e("div",Vl,[(v(!0),_(O,null,A(N(s).lectures[t.module.id],$=>(v(),_("div",{key:$.id,class:"flex gap-4 items-center w-full justify-between py-2"},[e("div",Sl,[e("div",ql,[e("i",{class:L($.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",Ul,[$.type==="virtual_platform"?(v(),_("p",Ol,"Live")):(v(),_("p",Al,"Rec"))])]),e("div",null,[e("h4",zl,M($.title),1),e("p",Fl,M($.description),1),e("div",Nl,[Rl,e("p",null,M(K($.opening_time)),1)])])]),e("div",Il,[e("button",{class:"btn-1 pb-2",onClick:z=>Ee($)},Yl,8,Bl),e("button",{class:"btn-contrast pb-2",onClick:z=>Ce($)},Jl,8,Gl)])]))),128)),(v(!0),_(O,null,A(N(f).materials[t.module.id],$=>(v(),_("div",{key:$.id,class:"flex gap-4 items-center w-full justify-between py-2"},[e("div",Kl,[Wl,e("div",null,[e("h4",Xl,M($.title),1),e("p",es,M($.description),1),e("div",ts,[ls,e("p",null,M(K($.opening_time)),1)])])]),e("div",ss,[e("button",{class:"btn-1 pb-2",onClick:z=>Te($)},ns,8,os),e("button",{class:"btn-contrast pb-2",onClick:z=>Ve($)},cs,8,ds)])]))),128)),(v(!0),_(O,null,A(N(d).exams[t.module.id],$=>(v(),_("div",{key:$.id,class:"w-full flex gap-4 items-center justify-between py-2"},[e("div",ms,[e("div",ps,[$.type==="MCQ"?(v(),_("i",vs)):(v(),_("i",_s)),fs]),e("div",null,[e("h4",hs,M($.title),1),e("div",xs,[ys,e("p",null,M(K($.opening_time)),1)])])]),e("div",bs,[$.user_exams_count?(v(),xe(ue,{key:0,to:{name:"ExamResultList",params:{courseId:t.module.course_id,moduleId:t.module.id,examId:$.id}},class:"btn-3 px-3.5"},{default:U(()=>[F(" Results ("+M($.user_exams_count)+") ",1)]),_:2},1032,["to"])):D("",!0),j(ue,{to:{name:"ExamQuestionList",params:{courseId:t.module.course_id,moduleId:t.module.id,examId:$.id}},class:"btn-3 px-3.5"},{default:U(()=>[F(" Questions ")]),_:2},1032,["to"]),e("button",{class:"btn-1 pb-2",onClick:z=>Ae($)},ks,8,gs),e("button",{class:"btn-contrast pb-2",onClick:z=>ze($)},Ds,8,Ms)])]))),128))]),js,e("div",Ls,[e("button",{class:"btn-1",onClick:Me},"Add Lecture"),e("button",{class:"btn-1",onClick:Le},"Add Material"),e("button",{class:"btn-1",onClick:q[0]||(q[0]=$=>Ue("MCQ"))},"Add MCQ Exam"),D("",!0)])])):D("",!0),r.value?(v(),_("div",Ts,[e("div",Vs,[e("div",{class:"flex justify-end"},[e("button",{onClick:se,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Ss,[j(Zt,{moduleId:t.module.id,courseId:t.module.course_id,onSubmit:je},null,8,["moduleId","courseId"])])])])):D("",!0),c.value?(v(),_("div",qs,[e("div",Us,[e("div",{class:"flex justify-end"},[e("button",{onClick:oe,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Os,[j(Xt,{lecture:n.value,onClose:oe},null,8,["lecture"])])])])):D("",!0),m.value?(v(),_("div",As,[e("div",zs,[e("div",{class:"flex justify-end"},[e("button",{onClick:H,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Fs,[e("p",null,"Do you want to delete '"+M((re=i.value)==null?void 0:re.title)+"' lecture?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:De},"Yes"),e("button",{class:"btn-contrast",onClick:H},"No")])])])])):D("",!0),p.value?(v(),_("div",Ns,[e("div",Rs,[e("div",{class:"flex justify-between"},[Is,e("button",{onClick:ae,class:"text-red-500 hover:text-red-700 text-3xl"}," × ")]),e("div",Bs,[j(ul,{moduleId:t.module.id,courseId:t.module.course_id,onSubmit:qe},null,8,["moduleId","courseId"])])])])):D("",!0),g.value?(v(),_("div",Ps,[e("div",Qs,[e("div",{class:"flex justify-between"},[Ys,e("button",{onClick:ie,class:"text-red-500 hover:text-red-700 text-3xl"}," × ")]),e("div",Gs,[j(yl,{material:y.value,onClose:ie},null,8,["material"])])])])):D("",!0),E.value?(v(),_("div",Zs,[e("div",Hs,[e("div",{class:"flex justify-end"},[e("button",{onClick:J,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Js,[e("p",null,"Do you want to delete '"+M((ce=x.value)==null?void 0:ce.title)+"' material?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:Se},"Yes"),e("button",{class:"btn-contrast",onClick:J},"No")])])])])):D("",!0),w.value?(v(),_("div",Ks,[e("div",Ws,[e("div",{class:"flex justify-end"},[Xs,e("button",{onClick:ne,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),eo,e("div",to,[j(zt,{moduleId:t.module.id,examType:Z.value,onSubmit:Oe},null,8,["moduleId","examType"])])])])):D("",!0),k.value?(v(),_("div",lo,[e("div",so,[e("div",oo,[e("div",ao,"Edit Form : "+M(G.value.title),1),e("button",{onClick:de,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),io,e("div",no,[j(Bt,{exam:G.value,onClose:de},null,8,["exam"])])])])):D("",!0),Y.value?(v(),_("div",uo,[e("div",ro,[e("div",{class:"flex justify-end"},[e("button",{onClick:W,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",co,[e("p",null,"Do you want to delete '"+M((me=R.value)==null?void 0:me.title)+"' exam?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:Fe},"Yes"),e("button",{class:"btn-contrast",onClick:W},"No")])])])])):D("",!0)],2)}}},po={class:"my-container space-y-2"},vo={class:"title-lg text-center"},_o={key:0},fo={class:"space-y-2"},ho={key:1,class:"flex justify-center"},xo=e("p",{class:""},"No modules available for this course.",-1),yo=[xo],bo={class:"flex justify-center py-2"},go=e("i",{class:"fas fa-plus"},null,-1),Mo={__name:"ModuleListView",setup(t){const o=pe(),l=Pe(),s=Q(),f=a(null),d=a([]),u=a(null),r=a(!1),c=a(!1),m=a(!1);ve(async()=>{try{await l.fetchCourse(o.params.id),f.value=l.course,await s.fetchModules(o.params.id),d.value=s.modules}catch(y){console.error("Error fetching data:",y)}});const n=y=>{u.value=y,r.value=!0},i=y=>{u.value=y,c.value=!0},p=async y=>{try{await s.addModule(o.params.id,y),await s.fetchModules(o.params.id),d.value=s.modules,m.value=!1}catch(x){console.error("Error adding module:",x)}},g=async y=>{try{await s.updateModule(y.id,y),await s.fetchModules(o.params.id),d.value=s.modules,r.value=!1}catch(x){console.error("Error updating module:",x)}},E=async()=>{if(u.value)try{await s.deleteModule(u.value.id),await s.fetchModules(o.params.id),d.value=s.modules,c.value=!1}catch(y){console.error("Error deleting module:",y)}};return(y,x)=>(v(),_("div",po,[e("h1",vo,M(f.value?f.value.title:"Loading...")+" Modules",1),d.value.length>0?(v(),_("div",_o,[e("ul",fo,[(v(!0),_(O,null,A(d.value,w=>(v(),xe(mo,{key:w.id,module:w,onEdit:n,onDelete:i},null,8,["module"]))),128))])])):(v(),_("div",ho,yo)),e("div",bo,[e("button",{class:"btn-2",onClick:x[0]||(x[0]=w=>m.value=!0)},[go,F("Add Module ")])]),j(nt,{isOpen:m.value,onAddModule:p,onClose:x[1]||(x[1]=w=>m.value=!1)},null,8,["isOpen"]),j($t,{class:"z-40",module:u.value,isOpen:r.value,onClose:x[2]||(x[2]=w=>r.value=!1),onUpdate:g},null,8,["module","isOpen"]),j(Vt,{class:"z-40",module:u.value,isOpen:c.value,onClose:x[3]||(x[3]=w=>c.value=!1),onConfirmDelete:E},null,8,["module","isOpen"])]))}};export{Mo as default};
