import{E as oe,G as Y,b as le,c as ae,u as ce,l as ne,r,o as ie,e as a,f as c,g as e,t as o,H as re,F as C,h as $,p as h,x as f,z as de,I as ue,n as y,q as S}from"./index-tP5fNA4T.js";const _e=oe("courseProgress",{state:()=>({userId:null}),actions:{async completeLecture(u,x,d){try{return(await Y.post(`/lectures/${x}/complete`,{course_id:u,is_completed:d})).data}catch(_){throw console.error("Error completing lecture:",_),_}},async getLectureCompletionStatus(u,x){try{return(await Y.get(`/users/${u}/lectures/${x}/completion`)).data.is_completed}catch(d){throw console.error("Error fetching lecture completion status:",d),d}},setUserId(u){this.userId=u}}}),pe={class:"my-container py-4"},he={key:0,class:"error"},xe={key:1,class:"grid md:grid-cols-3 gap-4"},me={class:"md:col-span-2 space-y-4"},ve={class:"title-xl"},fe=e("hr",{class:"my-2"},null,-1),ye={class:"relative pt-1"},ge={class:"flex mb-2 items-center justify-between"},be=e("div",null,[e("span",null,"Course Progress")],-1),ke={class:"text-right"},we={class:"text-xs font-semibold inline-block text-sky-600"},Ce={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-sky-200"},Me=e("h2",{class:"title-lg"},"Modules",-1),Ee={class:"space-y-4"},$e=["onClick"],Se={class:"text-center border-2 rounded-md p-1.5"},Le=e("div",{class:"text-xs md:text-sm"},"Module",-1),je={class:"flex-1"},qe={class:"line-clamp-1"},ze={key:0},Pe={class:""},Ve={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Ne={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},De={class:"text-xs"},Ie={key:0},Re={key:1},Ae={class:"flex-1"},Be={key:0,class:"fas fa-check-circle text-green-700"},Oe={class:"text-gray-500 text-xs line-clamp-1"},Qe=["onClick"],Te={class:"flex items-center text-sm pt-2"},Fe=["id","checked","onChange","disabled"],He=["for"],Ue={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Ge=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-file-alt"}),e("div",{class:"text-xs"},"Exam")],-1),Je={class:"w-full"},We={class:"title-sm"},Ye={key:0,class:"fas fa-check-circle text-green-700"},Ke={class:"flex justify-between gap-2 text-sm text-gray-400"},Xe={class:"flex items-center gap-2"},Ze=e("i",{class:"far fa-clock"},null,-1),et=e("span",null,"Duration:",-1),tt=["onClick"],st={key:2},ot={key:3,class:"fixed inset-0 flex items-center justify-center z-50"},lt=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1),at={class:"card-bg items-center justify-center p-6 md:p-8 overflow-hidden transform transition-all sm:max-w-lg sm:w-full text-center mx-2"},ct=e("h3",{class:"title-lg",id:"modal-title"},"Confirm Lecture Completion",-1),nt={class:""},it={class:"text-red-500"},rt={class:"flex gap-4"},dt={class:"modal-content !px-3 !py-4 !max-w-xl"},ut={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},_t=e("div",{class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},[e("h3",{class:"title-lg text-center",id:"modal-title"},"সাবধান!! গুরুত্বপূর্ণ তথ্য সমূহ")],-1),pt={class:"size-full grow shrink border-y py-4 overflow-y-auto scrollbar"},ht={class:"w-full list-[square] space-y-3 list-outside pl-5"},xt=e("li",null," Exam ওপেন করা (“Start Exam” বাটনে ক্লিক) মাত্র আপনার টাইমার চালু হয়ে যাবে। আপনি Exam থেকে বেরিয়ে গেলেও টাইমার চলতে থাকবে এবং টাইম শেষে সাবমিট করতে হবে। ",-1),mt=e("li",null," Exam দেয়ার সময়ে যদি কোনো কারনে কানেকশন লস হয়ে যায় এবং আপনার টাইম শেষ হয়ে যায় আর সাবমিট করতে না পারেন, তাহলে আর Exam দেয়ার সুযোগ পাবেন না। ",-1),vt={class:"flex items-center gap-1 md:gap-2"},ft=e("span",{class:"pt-1 text-xs md:text-base"},"আমি পরীক্ষা শুরু করতে চাই",-1),yt={class:"modal-content !px-3 !py-4 !max-w-sm"},gt={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},bt={class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},kt={class:"title-lg text-center"},wt={class:"size-full grow shrink border-t py-4 overflow-y-auto scrollbar flex flex-col gap-4 justify-center items-center"},Ct={class:"table table-auto text-sm"},Mt=e("td",{class:"text-right px-3 py-1.5"},"MCQ Correct Mark",-1),Et={class:"text-center px-3 py-1.5"},$t={class:"text-red-500"},St=e("td",{class:"text-right px-3 py-1.5"},"MCQ Negative Mark",-1),Lt={class:"text-center px-3 py-1.5"},jt={class:"border-t"},qt=e("td",{class:"text-right px-3 py-1.5"},"MCQ Obtained Mark",-1),zt={class:"text-center px-3 py-1.5"},Pt=e("td",{class:"text-right px-3 py-1.5"},"Written Mark",-1),Vt={class:"text-center px-3 py-1.5"},Nt={class:"border-t font-bold"},Dt=e("td",{class:"text-right px-3 py-1.5"},"Total Mark",-1),It={class:"text-center px-3 py-1.5"},Rt=e("hr",{class:"w-full"},null,-1),Bt={__name:"MyCourseDetails",setup(u){const x=le(),d=ae(),_=ce(),L=_e(),j=ne(),g=x.params.id,p=r(null),M=r(null),m=r([]),b=r(!1),k=r(!1),w=r(!1),v=r(null),i=r(null),E=r(!1);ie(async()=>{try{await _.fetchPurchasedCourse(g),p.value=_.course}catch(s){M.value=s.message||"An error occurred",s.response&&s.response.status===403&&d.push("/")}});const K=s=>{const n=m.value.indexOf(s);n===-1?m.value.push(s):m.value.splice(n,1)},X=s=>{s.type==="video"?(j.endedCallback=async()=>{const n=await L.completeLecture(g,s.id,!0);s.is_completed=n.is_completed},j.showPlayer(s.link)):window.open(s.link,"_blank")},Z=s=>(i.value=s,console.log(i.value),s.is_completed?w.value=!0:k.value=!0),ee=async()=>{if(v.value)try{await L.completeLecture(g,v.value.id,!0),v.value.is_completed=!0,b.value=!1}catch(s){console.error("Error confirming lecture completion:",s)}},te=s=>{v.value=s,b.value=!0},se=async()=>{d.push({path:`/my/course/${g}/exam/${i.value.id}`})};return(s,n)=>{var q,z,P,V,N,D,I,R,A,B,O,Q,T,F,H,U,G,J;return a(),c(C,null,[e("div",pe,[M.value?(a(),c("div",he,o(M.value),1)):p.value?(a(),c("div",xe,[e("div",me,[e("div",null,[e("h1",ve,o(p.value.title),1),fe]),e("div",null,[e("div",ye,[e("div",ge,[be,e("div",ke,[e("span",we,o(p.value.progress)+"% ",1)])]),e("div",Ce,[e("div",{style:re({width:p.value.progress+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-sky-600"},null,4)])])]),Me,e("ul",Ee,[(a(!0),c(C,null,$(p.value.modules,l=>(a(),c("li",{class:"card-bg p-4",key:l.id},[e("div",{onClick:t=>K(l.id),class:"flex flex-1 items-center gap-4 cursor-pointer"},[e("div",Se,[e("div",{class:y(["text-xl font-bold text-orange-500",{"!text-gray-400":l.is_active==0}])},o(l.order),3),Le]),e("div",je,[e("h4",{class:y(["title-md",{"text-gray-400":l.is_active==0}])},o(l.title),3),e("p",qe,o(l.description),1)]),e("button",null,[e("i",{class:y(m.value.includes(l.id)?"fas fa-angle-up":"fas fa-angle-down")},null,2)])],8,$e),m.value.includes(l.id)?(a(),c("div",ze,[e("ul",Pe,[(a(!0),c(C,null,$(l.lectures,t=>(a(),c("li",{class:"pt-6",key:t.id},[e("div",Ve,[e("div",Ne,[e("i",{class:y(t.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",De,[t.type==="virtual_platform"?(a(),c("p",Ie,"Video")):(a(),c("p",Re,"Lecture"))])]),e("div",Ae,[e("h4",null,[t.is_completed?(a(),c("i",Be)):h("",!0),S(" "+o(t.title),1)]),e("p",Oe,o(t.description),1)]),e("button",{onClick:f(W=>X(t),["prevent"]),type:"button",class:"btn-2"},o(t.type==="video"?"Play Video":"Join Live"),9,Qe)]),e("div",Te,[e("input",{type:"checkbox",id:`completed-${t.id}`,class:"form-checkbox h-3 w-3 text-sky-600 transition duration-150 ease-in-out",checked:t.is_completed,onChange:W=>te(t),disabled:t.is_completed},null,40,Fe),e("label",{for:`completed-${t.id}`,class:"ml-2"}," Have you completed this lecture? ",8,He)])]))),128)),(a(!0),c(C,null,$(l.exams,t=>(a(),c("li",{class:"pt-6",key:t.id},[e("div",Ue,[Ge,e("div",Je,[e("h4",We,[t.is_completed?(a(),c("i",Ye)):h("",!0),S(" "+o(t.title),1)]),e("div",Ke,[e("div",Xe,[Ze,e("p",null,[et,S(" "+o(t.duration),1)])])])]),e("button",{onClick:f(W=>Z(t),["prevent"]),type:"button",class:"btn-2"},o(t.is_completed?"result":"Open"),9,tt)])]))),128))])])):h("",!0)]))),128))])])])):(a(),c("div",st,"Loading...")),b.value?(a(),c("div",ot,[lt,e("div",at,[ct,e("div",nt,[e("p",it,' Are you sure you have completed the lecture "'+o((q=v.value)==null?void 0:q.title)+'"? ',1)]),e("div",rt,[e("button",{onClick:ee,type:"button",class:"btn-2"},"Yes"),e("button",{onClick:n[0]||(n[0]=l=>b.value=!1),type:"button",class:"btn-3"},"No")])])])):h("",!0)]),k.value?(a(),c("div",{key:0,class:"modal",onClick:n[3]||(n[3]=f(l=>k.value=!1,["self"]))},[e("div",dt,[e("div",ut,[_t,e("div",pt,[e("ul",ht,[e("li",null," Exam এর সময়সীমা থাকবে "+o((z=i.value)==null?void 0:z.duration)+" মিনিট। এই সময়ের মধ্যে আপনাকে Exam সাবমিট করতে হবে। ",1),xt,mt])]),e("form",{onSubmit:f(se,["prevent"]),class:"grow-0 shrink-0 w-full flex justify-end gap-1 md:gap-4"},[e("button",{onClick:n[1]||(n[1]=l=>k.value=!1),type:"button",class:"mr-auto btn-contrast px-1 md:px-4 text-xs md:text-base"}," Cancel "),e("label",vt,[de(e("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>E.value=l),type:"checkbox",required:""},null,512),[[ue,E.value]]),ft]),e("button",{type:"submit",class:y(["btn-2 disabled:opacity-50 px-1 md:px-4 text-xs md:text-base",{"opacity-50":!E.value}])}," Start Exam ",2)],32)])])])):h("",!0),w.value?(a(),c("div",{key:1,class:"modal",onClick:n[5]||(n[5]=f(l=>w.value=!1,["self"]))},[e("div",yt,[e("div",gt,[e("div",bt,[e("h3",kt,"Result of "+o(i.value.title),1)]),e("div",wt,[e("table",Ct,[e("tr",null,[Mt,e("td",Et,o((V=(P=i.value)==null?void 0:P.user_exam)==null?void 0:V.mcq_correct_mark),1)]),e("tr",$t,[St,e("td",Lt,o((D=(N=i.value)==null?void 0:N.user_exam)==null?void 0:D.mcq_negative_mark),1)]),e("tr",jt,[qt,e("td",zt,o(((R=(I=i.value)==null?void 0:I.user_exam)==null?void 0:R.mcq_correct_mark)-((B=(A=i.value)==null?void 0:A.user_exam)==null?void 0:B.mcq_negative_mark)),1)]),e("tr",null,[Pt,e("td",Vt,o(((Q=(O=i.value)==null?void 0:O.user_exam)==null?void 0:Q.written_mark)??"-"),1)]),e("tr",Nt,[Dt,e("td",It,o(((F=(T=i.value)==null?void 0:T.user_exam)==null?void 0:F.mcq_correct_mark)-((U=(H=i.value)==null?void 0:H.user_exam)==null?void 0:U.mcq_negative_mark)+((J=(G=i.value)==null?void 0:G.user_exam)==null?void 0:J.written_mark)),1)])]),Rt,e("button",{onClick:n[4]||(n[4]=l=>w.value=!1),type:"button",class:"btn-contrast"}," Close ")])])])])):h("",!0)],64)}}};export{Bt as default};
