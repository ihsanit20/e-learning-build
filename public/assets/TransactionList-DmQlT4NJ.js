import{Y as C,Z as L,r as d,o as D,d as w,e as n,f as l,g as e,z as M,A as N,F as S,h as A,t as o,q as B,x as V}from"./index-qZuTYeIO.js";const j=C("transaction",{state:()=>({transactions:[],error:null}),actions:{async fetchTransactions(){var u,i;try{const a=await L.get("/transactions");this.transactions=(a==null?void 0:a.data)??[]}catch(a){this.error=((i=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:i.message)??"An error occurred"}}}}),F={class:"my-container mx-auto py-4"},K={class:"flex items-center py-4"},q={key:0,class:"flex justify-center items-center"},z={key:1,class:"overflow-x-auto card-bg"},E={class:"min-w-full divide-y divide-gray-400 text-sm"},I={class:"bg-white divide-y divide-gray-200"},U={class:"px-3 py-3 whitespace-nowrap"},Y={class:"px-3 py-3 max-w-xs"},Z={class:"px-3 py-3 whitespace-nowrap"},G={class:"px-3 py-3 whitespace-nowrap"},H={class:"px-3 py-3 whitespace-nowrap"},J={class:"px-3 py-3 whitespace-nowrap text-center"},O={class:"px-3 py-3 whitespace-nowrap text-right"},Q={class:"px-3 py-3 whitespace-nowrap text-right"},R={class:"px-3 py-3 whitespace-nowrap text-center"},W={class:"flex justify-between mt-4"},X=["disabled"],$=["disabled"],ee={key:2,class:"text-red-500 mt-4"},p=25,se={__name:"TransactionList",setup(u){const i=j(),a=d([]),x=d(""),h=d(null),f=d(!0),r=d(1);D(async()=>{try{await i.fetchTransactions(),a.value=i.transactions}catch(c){h.value=c}finally{f.value=!1}});const m=c=>{const t=new Date(c);return V(t,"dd-MMM-yyyy")},g=w(()=>[...a.value].sort((t,s)=>new Date(s.created_at)-new Date(t.created_at)).filter(t=>{const s=t.course.title.toLowerCase(),y=t.user.name.toLowerCase(),P=t.user.phone.toLowerCase(),_=x.value.toLowerCase();return s.includes(_)||y.includes(_)||P.includes(_)})),b=w(()=>{const c=(r.value-1)*p,t=c+p;return g.value.slice(c,t)}),v=w(()=>Math.ceil(g.value.length/p)),k=()=>{r.value<v.value&&r.value++},T=()=>{r.value>1&&r.value--};return(c,t)=>(n(),l("div",F,[e("div",K,[t[1]||(t[1]=e("h1",{class:"flex-1 text-2xl font-bold"},"Transaction List",-1)),M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),type:"text",placeholder:"Title, Name or Phone",class:"input-1 w-80"},null,512),[[N,x.value]])]),f.value?(n(),l("div",q,t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1)]))):(n(),l("div",z,[e("table",E,[t[3]||(t[3]=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-bold uppercase tracking-wider"}," SL "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Course Title "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Purchased by "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Phone "),e("th",{scope:"col",class:"px-3 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Purchased on "),e("th",{scope:"col",class:"px-3 py-3 text-center text-xs font-bold uppercase tracking-wider"}," TrxID "),e("th",{scope:"col",class:"px-3 py-3 text-right text-xs font-bold uppercase tracking-wider"}," Amount "),e("th",{scope:"col",class:"px-3 py-3 text-right text-xs font-bold uppercase tracking-wider"}," Discount "),e("th",{scope:"col",class:"px-3 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Coupon Code ")])],-1)),e("tbody",I,[(n(!0),l(S,null,A(b.value,(s,y)=>(n(),l("tr",{key:s.id},[e("td",U,o((r.value-1)*p+y+1),1),e("td",Y,o(s.course.title),1),e("td",Z,o(s.user.name),1),e("td",G,o(s.user.phone),1),e("td",H,o(m(s.created_at)),1),e("td",J,o(s.trx_id),1),e("td",O,o(s.paid_amount)+" TK",1),e("td",Q,o(s.discount_amount)+" TK",1),e("td",R,o(s.coupon_code),1)]))),128))])])])),e("div",W,[e("button",{onClick:T,disabled:r.value===1,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50"}," Previous ",8,X),e("button",{onClick:k,disabled:r.value===v.value,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50"}," Next ",8,$)]),h.value?(n(),l("p",ee,o(h.value),1)):B("",!0)]))}};export{se as default};
