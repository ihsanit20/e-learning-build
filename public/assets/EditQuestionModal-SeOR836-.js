import{D as H,E as f,r as x,d as c,e as u,f as t,t as y,m as T,y as A,q as h,F as I,g as D,p as w,M as U,v as j,H as k,I as S,w as E,x as L}from"./index-BrS3nTk0.js";import{_ as N}from"./TextEditor-CzS60N2V.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V=H("question",{state:()=>({questions:[],error:null,loading:!1}),actions:{async index(s,a){var o,e;this.loading=!0,this.error=null;try{const n=await f.get(`/questions?chapter_id=${s}&question_type=${a}`);this.questions=(n==null?void 0:n.data)??[]}catch(n){this.error=((e=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:e.message)??"An error occurred while fetching questions"}finally{this.loading=!1}},async show(s){var a,o;this.error=null;try{const e=await f.get(`/questions/${s}`);return(e==null?void 0:e.data)??null}catch(e){throw this.error=((o=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:o.message)??"An error occurred while fetching the question",e}},async store(s){var a,o;this.error=null;try{const e=await f.post("/questions",s);this.questions.push(e==null?void 0:e.data)}catch(e){throw this.error=((o=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:o.message)??"An error occurred while creating the question",e}},async update(s,a){var o,e;this.error=null;try{const n=await f.put(`/questions/${s}`,a),i=this.questions.findIndex(d=>d.id===s);i!==-1&&(this.questions[i]=(n==null?void 0:n.data)??this.questions[i])}catch(n){throw this.error=((e=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:e.message)??"An error occurred while updating the question",n}},async delete(s){var a,o;this.error=null;try{await f.delete(`/questions/${s}`),this.questions=this.questions.filter(e=>e.id!==s)}catch(e){throw this.error=((o=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:o.message)??"An error occurred while deleting the question",e}}}}),B=s=>(k("data-v-f588aade"),s=s(),S(),s),F={class:"modal"},z={class:"modal-content space-y-2 max-w-[720px] min-w-80 md:min-w-[480px] lg:min-w-[580px]"},G={key:0,class:"text-red-500"},J={key:1,class:"text-red-500"},K={key:2,class:"grid gap-3 py-4 bg-gray-200 rounded-lg"},P=B(()=>t("div",{class:"flex justify-between text-sm px-2"},[t("p",null,"Ans"),t("p",null,"Options"),t("p",null,"Delete")],-1)),R=["onUpdate:modelValue"],W=["onUpdate:modelValue"],X={class:"grow-0 shrink-0 pt-1"},Y=["onClick"],Z={class:"flex gap-4 justify-center"},ee=B(()=>t("button",{type:"submit",class:"btn-2"},"Save Question",-1)),te={__name:"AddQuestionModal",props:{chapterId:{required:!0},questionType:String},emits:["close"],setup(s,{emit:a}){const o=a,e=s,n=V(),i=x({}),d=x(""),r=x([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),q=()=>{r.value.push({option_text:"",is_correct:!1})},g=_=>{r.value.splice(_,1)},$=async()=>{i.value={};try{await n.store({chapter_id:e.chapterId,type:e.questionType,question_text:d.value,mcq_options:r.value}),d.value="",o("close")}catch(_){_.response&&_.response.data&&_.response.data.errors&&(i.value=_.response.data.errors)}};return(_,m)=>(c(),u("div",F,[t("div",z,[t("h2",null,y(s.questionType)+" Question",1),t("form",{onSubmit:T($,["prevent"]),class:"space-y-4"},[A(N,{modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=l=>d.value=l),placeholder:"Question Text",required:""},null,8,["modelValue"]),i.value.question_text?(c(),u("div",G,y(i.value.question_text[0]),1)):h("",!0),i.value.chapter_id?(c(),u("div",J,y(i.value.chapter_id[0]),1)):h("",!0),s.questionType==="MCQ"?(c(),u("div",K,[P,(c(!0),u(I,null,D(r.value,(l,v)=>(c(),u("div",{key:v,class:"flex items-center gap-4 px-4"},[w(t("input",{class:"grow-0 shrink-0",value:!0,name:"correct",type:"checkbox","onUpdate:modelValue":p=>l.is_correct=p},null,8,R),[[U,l.is_correct]]),w(t("input",{class:"input-1 text-black placeholder:italic bg-white",type:"text","onUpdate:modelValue":p=>l.option_text=p,placeholder:"Option",required:""},null,8,W),[[j,l.option_text]]),t("div",X,[t("i",{onClick:p=>g(v),class:"fa fa-trash text-red-700 cursor-pointer"},null,8,Y)])]))),128)),t("div",{class:"flex justify-center items-center"},[t("button",{type:"button",onClick:q,class:"px-2 pt-1 border rounded bg-gray-300 border-gray-400"}," + Add Option ")])])):h("",!0),t("div",Z,[ee,t("button",{type:"button",onClick:m[1]||(m[1]=l=>o("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},Qe=C(te,[["__scopeId","data-v-f588aade"]]),Q=s=>(k("data-v-f81944bd"),s=s(),S(),s),se={key:0,class:"modal"},oe={class:"modal-content space-y-2"},ne=Q(()=>t("h2",null,"Delete Question",-1)),ie={class:"py-2 space-y-1"},ae=Q(()=>t("hr",null,null,-1)),re=["innerHTML"],le=Q(()=>t("hr",null,null,-1)),ce={key:0,class:"text-red-500"},ue={class:"flex gap-4"},de={__name:"DeleteQuestionModal",props:{question:{type:Object,required:!0,default:()=>({name:"",id:null})}},emits:["close"],setup(s,{emit:a}){const o=a,e=s,n=V(),i=x({});E(()=>e.question,r=>{},{immediate:!0});const d=async()=>{i.value={};try{await n.delete(e.question.id),o("close")}catch(r){r.response&&r.response.data&&r.response.data.errors&&(i.value=r.response.data.errors)}};return(r,q)=>e.question?(c(),u("div",se,[t("div",oe,[ne,t("div",ie,[L(" Are you sure you want to delete the question ID:"+y(s.question.id)+"? ",1),ae,t("div",{class:"overflow-hidden whitespace-pre-wrap line-clamp-3 italic",innerHTML:e.question.question_text},null,8,re),le]),i.value.chapter_id?(c(),u("div",ce,y(i.value.chapter_id[0]),1)):h("",!0),t("div",ue,[t("button",{onClick:d,class:"btn-2"},"Delete"),t("button",{type:"button",onClick:q[0]||(q[0]=g=>o("close")),class:"btn-contrast"},"Cancel")])])])):h("",!0)}},Me=C(de,[["__scopeId","data-v-f81944bd"]]),M=s=>(k("data-v-a3e8e788"),s=s(),S(),s),pe={class:"modal"},_e={class:"modal-content space-y-2 max-w-[720px] min-w-80 md:min-w-[480px] lg:min-w-[580px]"},he=M(()=>t("h2",null,"Edit Question",-1)),me={key:0,class:"text-red-500"},ve={key:1,class:"text-red-500"},xe={key:2,class:"grid gap-3 py-4 bg-gray-200 rounded-lg"},ye=M(()=>t("div",{class:"flex justify-between text-sm px-2"},[t("p",null,"Ans"),t("p",null,"Options"),t("p",null,"Delete")],-1)),qe=["onUpdate:modelValue"],fe=["onUpdate:modelValue"],ge={class:"grow-0 shrink-0 pt-1"},be=["onClick"],we={class:"flex gap-4 justify-center"},$e=M(()=>t("button",{type:"submit",class:"btn-2"},"Save Question",-1)),ke={__name:"EditQuestionModal",props:{question:{type:Object,required:!0},questionType:String},emits:["close"],setup(s,{emit:a}){var _,m;const o=a,e=s,n=V(),i=x(((_=e.question)==null?void 0:_.question_text)||""),d=x(((m=e.question)==null?void 0:m.mcq_options)||[]),r=x({}),q=()=>{d.value.push({option_text:"",is_correct:!1})},g=l=>{d.value.splice(l,1)};E(()=>e.question,l=>{l&&(i.value=l.question_text)},{immediate:!0});const $=async()=>{r.value={};try{await n.update(e.question.id,{question_text:i.value,chapter_id:e.question.chapter_id,mcq_options:d.value}),o("close")}catch(l){l.response&&l.response.data&&l.response.data.errors&&(r.value=l.response.data.errors)}};return(l,v)=>(c(),u("div",pe,[t("div",_e,[he,t("form",{onSubmit:T($,["prevent"]),class:"space-y-4"},[A(N,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=p=>i.value=p),placeholder:"Question Text",required:""},null,8,["modelValue"]),r.value.question_text?(c(),u("div",me,y(r.value.question_text[0]),1)):h("",!0),r.value.chapter_id?(c(),u("div",ve,y(r.value.chapter_id[0]),1)):h("",!0),s.questionType==="MCQ"?(c(),u("div",xe,[ye,(c(!0),u(I,null,D(d.value,(p,O)=>(c(),u("div",{key:O,class:"flex items-center gap-4 px-4"},[w(t("input",{class:"grow-0 shrink-0",value:!0,name:"correct",type:"checkbox","onUpdate:modelValue":b=>p.is_correct=b},null,8,qe),[[U,p.is_correct]]),w(t("input",{class:"input-1 text-black placeholder:italic bg-white",type:"text","onUpdate:modelValue":b=>p.option_text=b,placeholder:"Option",required:""},null,8,fe),[[j,p.option_text]]),t("div",ge,[t("i",{onClick:b=>g(O),class:"fa fa-trash text-red-700 cursor-pointer"},null,8,be)])]))),128)),t("div",{class:"flex justify-center items-center"},[t("button",{type:"button",onClick:q,class:"px-2 pt-1 border rounded bg-gray-300 border-gray-400"}," + Add Option ")])])):h("",!0),t("div",we,[$e,t("button",{type:"button",onClick:v[1]||(v[1]=p=>o("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},Oe=C(ke,[["__scopeId","data-v-a3e8e788"]]);export{Qe as A,Me as D,Oe as E,V as u};
