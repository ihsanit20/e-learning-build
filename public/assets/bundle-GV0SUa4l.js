import{d as c}from"./vue-CcEtAIOs.js";import{h as r}from"./index-B8R8XCyq.js";const o=c("bundle",{state:()=>({bundles:[],bundle:null,error:null}),actions:{updateBundleInState(s,a){const t=this.bundles.findIndex(e=>e.id===s);t!==-1&&(this.bundles[t]=a??this.bundles[t])},async fetchBundles(s={}){var a,t;try{const e=await r.get("/bundles",{params:s});this.bundles=(e==null?void 0:e.data)??[]}catch(e){this.error=((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)??"An error occurred"}},async fetchBundle(s){var a,t;try{const e=await r.get(`/bundles/${s}`);return this.bundle=(e==null?void 0:e.data)??null,this.bundle}catch(e){this.error=((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)??"An error occurred"}},async createBundle(s){var a,t;try{const e=await r.post("/bundles",s);this.bundles.push(e==null?void 0:e.data)}catch(e){throw this.error=((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)??"An error occurred",e}},async updateBundle(s,a){var t,e;try{const n=await r.put(`/bundles/${s}`,a);this.updateBundleInState(s,n.data)}catch(n){this.error=((e=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:e.message)??"An error occurred"}},async toggleActiveStatus(s,a){var t,e;try{const n=await r.patch(`/bundles/${s}/update-active-status`,{is_active:a});this.updateBundleInState(s,n.data)}catch(n){this.error=((e=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:e.message)??"An error occurred"}},async deleteBundle(s){var a,t;try{await r.delete(`/bundles/${s}`),this.bundles=this.bundles.filter(e=>e.id!==s)}catch(e){this.error=((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)??"An error occurred"}},async uploadThumbnail(s,a){var t,e;this.error=null;try{const n=await r.post(`/bundles/${s}/thumbnail`,a,{headers:{"Content-Type":"multipart/form-data"}}),d=this.bundles.find(u=>u.id===s);d&&(d.thumbnail=n.data.path)}catch(n){throw this.error=((e=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:e.message)??"An error occurred while uploading the thumbnail",n}}}});export{o as u};
