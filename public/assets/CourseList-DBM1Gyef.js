import{u as $,c as I,r as v,d as a,e as n,f as e,t as c,x as h,q as k,A as M,H as O,I as S,o as L,s as N,y as x,z as C,F as D,g as j,j as z}from"./index-CoSo7CmJ.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V=l=>(O("data-v-c0ad9860"),l=l(),S(),l),A={key:0,class:"modal"},E={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},H={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},R=["src"],U=V(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),q={class:"flex w-full text-center gap-4"},K={class:"text-center text-green-600"},P={class:"text-center text-red-600"},X={class:"title-md"},Y={class:"md:flex justify-between"},G=V(()=>e("b",null,"Course Description:",-1)),J=["innerHTML"],Q={key:0},W={class:"font-bold text-sky-600"},Z={class:""},ee={class:"title-sm"},se={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(l,{emit:b}){const m=l,i=$(),_=b,o=I(()=>i.courses.find(s=>s.id===m.course.id)),p=()=>{_("close")},u=v(null),f=v(""),y=v(""),g=s=>{const r=s.target.files[0];r&&r.size>2*1024*1024?(y.value="File should be less than 2MB",u.value=null,document.getElementById("file-input").value=""):(u.value=r,y.value="")},w=async()=>{if(!u.value)return;const s=new FormData;s.append("thumbnail",u.value);try{await i.uploadThumbnail(m.course.id,s),f.value="Thumbnail uploaded successfully!",u.value=null,document.getElementById("file-input").value=""}catch{y.value="An error occurred while uploading the thumbnail"}},d=s=>M(new Date(s),"dd-MMM-yyyy");return(s,r)=>l.isOpen?(a(),n("div",A,[e("div",E,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:p},"X")]),e("div",H,[e("img",{class:"aspect-video object-cover rounded-lg",src:o.value.thumbnail,alt:"Thumbnail"},null,8,R),U,e("div",q,[e("input",{id:"file-input",type:"file",onChange:g,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:w},"Upload")]),e("p",K,c(f.value),1),e("p",P,c(y.value),1),e("h2",X,c(o.value.title),1),e("div",Y,[e("p",null,[h(" Course Category: "),e("b",null,c(o.value.course_category),1)]),e("p",null,[h(" Course Type: "),e("b",null,c(o.value.course_type),1)])]),e("div",null,[G,e("div",{innerHTML:o.value.description,class:""},null,8,J)]),o.value.course_type==="Live Course"?(a(),n("p",Q,[h(" Start Date: "),e("span",W,c(d(o.value.start_date)),1)])):k("",!0),e("p",Z,[h(" Price: à§³ "),e("span",ee,c(o.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:p},"Close")])])])):k("",!0)}},te=T(se,[["__scopeId","data-v-c0ad9860"]]),B=l=>(O("data-v-47d6054d"),l=l(),S(),l),oe={key:0,class:"modal"},le=B(()=>e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),ae=B(()=>e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),ne={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(l,{emit:b}){const m=l,i=b,_=$(),o=async()=>{m.course&&(await _.deleteCourse(m.course.id),i("confirmDelete"),i("close"))},p=()=>{i("close")};return(u,f)=>l.isOpen?(a(),n("div",oe,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[le,ae,e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:o},"Yes"),e("button",{class:"btn-2",onClick:p},"No")])])])):k("",!0)}},ce=T(ne,[["__scopeId","data-v-47d6054d"]]),de={class:"my-container space-y-2 relative"},ie={class:"flex justify-between items-center"},ue=e("h1",{class:"title-lg text-center"},"Courses",-1),re={key:0,class:"space-y-2"},_e=z('<div class="md:col-span-1 rounded md:px-2"><div class="aspect-video bg-gray-200"></div></div><div class="md:col-span-3 md:px-2"><div class="h-6 bg-gray-200 rounded-full mb-2"></div><div class="h-4 bg-gray-200 rounded-full"></div></div><div class="md:col-span-1 flex items-center justify-center px-2"><div class="h-6 bg-gray-200 rounded-full w-20"></div></div><div class="md:col-span-3 flex justify-between items-center gap-2 md:px-2"><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div></div>',4),pe=[_e],ve={key:1},he={key:0,class:"text-center"},me=e("p",null,"No courses available.",-1),fe=[me],ye={key:1,class:"space-y-2"},be={class:"md:col-span-1 px-2"},xe=["src"],ge={class:"font-bold text-sky-600 bg-sky-100 px-6 text-center rounded-b-md"},we={class:"md:col-span-4 md:px-4 space-y-2 flex flex-col justify-between"},Ce={class:"title-md"},ke={class:"text-sm md:text-base"},Me=e("b",null,"Created at: ",-1),$e={class:"flex justify-between"},De={class:"font-bold text-sky-600"},je={key:0},Oe={class:"font-bold text-sky-600"},Se={key:1,class:"bg-pink-50 px-3 rounded-full"},Te={class:"font-bold text-pink-600"},Ve={class:"flex justify-between items-center gap-2"},Be=["onClick"],Fe=e("i",{class:"fas fa-eye"},null,-1),Ie=e("p",{class:"hidden md:flex"},"View",-1),Le=[Fe,Ie],Ne=e("i",{class:"far fa-edit"},null,-1),ze=e("p",{class:"hidden md:flex"},"Edit",-1),Ae=["onClick"],Ee=e("i",{class:"fas fa-trash-alt"},null,-1),He=[Ee],Re=e("i",{class:"fas fa-plus"},null,-1),Ue=e("p",null,"Module",-1),Pe={__name:"CourseList",setup(l){const b=d=>{const s=new Date(d);return M(s,"dd-MMM-yyyy")},m=d=>{const s=new Date(d);return M(s,"dd-MMM-yyyy, hh:mm a")},i=$(),_=v([]),o=v(null),p=v(!1),u=v(!1),f=v(!0);L(async()=>{await i.fetchCourses(),_.value=i.courses.sort((d,s)=>s.id-d.id),f.value=!1});const y=d=>{o.value=d,p.value=!0},g=d=>{o.value=d,u.value=!0},w=async()=>{await i.deleteCourse(o.value.id),_.value=i.courses};return(d,s)=>{const r=N("RouterLink");return a(),n("div",de,[e("div",ie,[ue,x(r,{class:"btn-2",to:"/new"},{default:C(()=>[h("Add New")]),_:1})]),f.value?(a(),n("div",re,[(a(),n(D,null,j(3,t=>e("div",{key:t,class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2 animate-pulse"},pe)),64))])):(a(),n("div",ve,[_.value.length===0?(a(),n("div",he,fe)):(a(),n("ul",ye,[(a(!0),n(D,null,j(_.value,t=>(a(),n("li",{class:"card-bg md:py-4 p-4 md:p-2 grid md:grid-cols-5 md:divide-x-2",key:t.id},[e("div",be,[e("img",{class:"aspect-video object-cover rounded-t-md",src:t.thumbnail,alt:"Thumbnail"},null,8,xe),e("p",ge,c(t.course_category),1)]),e("div",we,[e("h2",Ce,c(t.title),1),e("p",ke,[Me,h(c(m(t.created_at)),1)]),e("div",$e,[e("p",null,[h(" Fee: "),e("span",De,c(t.price>0?`${t.price} TK`:"Free"),1)]),t.course_type==="Live Course"?(a(),n("p",je,[h(" Start Date: "),e("span",Oe,c(b(t.start_date)),1)])):(a(),n("p",Se,[e("span",Te,c(t.course_type),1)]))]),e("div",Ve,[e("button",{class:"btn-1 pb-2",onClick:F=>y(t)},Le,8,Be),x(r,{to:"/course-list/"+t.id+"/edit",class:"btn-1 pb-2"},{default:C(()=>[Ne,ze]),_:2},1032,["to"]),e("button",{class:"btn-contrast pb-2",onClick:F=>g(t)},He,8,Ae),x(r,{class:"btn-1",to:"/course-list/"+t.id+"/modules"},{default:C(()=>[Re,Ue]),_:2},1032,["to"])])])]))),128))]))])),x(te,{class:"absolute top-0 shadow-2xl w-full z-40",course:o.value,isOpen:p.value,onClose:s[0]||(s[0]=t=>p.value=!1)},null,8,["course","isOpen"]),x(ce,{class:"absolute top-0 shadow-2xl w-full z-40",course:o.value,isOpen:u.value,onClose:s[1]||(s[1]=t=>u.value=!1),onConfirmDelete:w},null,8,["course","isOpen"])])}}};export{Pe as default};
