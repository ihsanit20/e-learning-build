import{l as D,r as a,o as S,s as B,d as m,e as g,f as e,t as n,x as i,q as M,y as N,z as A,m as j,p as u,v as d}from"./index-BrS3nTk0.js";import{u as z}from"./user-BOzGHuHJ.js";const F={class:"my-container max-w-xl"},L={class:"card-bg p-4 md:p-8 flex flex-col items-center relative"},R=e("h1",{class:"title-lg"},"My Profile",-1),T={class:"bg-gray-200 size-40 rounded-full overflow-hidden relative"},q=["src"],G={key:0,class:"space-y-4"},H={class:"title-md text-center"},I=e("strong",null,"Phone:",-1),J=e("strong",null,"Date of Birth:",-1),K=e("strong",null,"Email:",-1),O=e("strong",null,"Address:",-1),Q=e("i",{class:"far fa-edit"},null,-1),W={class:"flex flex-col"},X=e("p",null,[e("strong",null,"Profile Photo")],-1),Y={class:"flex w-full text-center gap-4"},Z={key:0,class:"text-green-500"},$={key:1},ee=e("h1",{class:"text-center title-md"},"Edit Profile",-1),te={class:"flex gap-2 items-center"},se=e("label",{for:"name"},"Name:",-1),le={class:"flex gap-2 items-center"},ae=e("label",{for:"phone"},"Phone:",-1),oe={class:"flex gap-2 items-center"},ne=e("label",{for:"date_of_birth"},"Date of Birth:",-1),ie={class:"flex gap-2 items-center"},ue=e("label",{for:"email"},"Email:",-1),de={class:"flex gap-2 items-center"},ce=e("label",{for:"address"},"Address:",-1),re=e("button",{class:"btn-2",type:"submit"},"Update",-1),fe={__name:"ProfileView",setup(pe){const b=D(),w=z(),c=a(!1),t=a({}),r=a(""),p=a(""),_=a(""),v=a(""),f=a(""),h=a(null),x=a(""),P=()=>{c.value=!0,r.value=t.value.name,p.value=t.value.phone,_.value=t.value.date_of_birth,v.value=t.value.email,f.value=t.value.address},U=()=>{c.value=!1},k=async()=>{const o={name:r.value,phone:p.value,date_of_birth:_.value,email:v.value,address:f.value};await b.updateProfile(o),c.value=!1,await y()},y=async()=>{await b.fetchUser(),t.value=b.user},V=o=>{h.value=o.target.files[0]},C=async()=>{if(!h.value)return;const o=new FormData;o.append("photo",h.value),await w.uploadPhoto(o),await y(),h.value=null,x.value="Photo upload successful"};return S(async()=>{await y()}),(o,s)=>{const E=B("RouterLink");return m(),g("div",F,[e("div",L,[R,e("div",T,[e("img",{class:"min-w-full min-h-full object-cover",src:t.value.photo,alt:"Profile Photo"},null,8,q)]),c.value?(m(),g("div",$,[ee,e("form",{onSubmit:j(k,["prevent"]),class:"space-y-2"},[e("div",te,[se,u(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l),type:"text",class:"input-1"},null,512),[[d,r.value]])]),e("div",le,[ae,u(e("input",{id:"phone","onUpdate:modelValue":s[1]||(s[1]=l=>p.value=l),type:"text",class:"input-1"},null,512),[[d,p.value]])]),e("div",oe,[ne,u(e("input",{id:"date_of_birth","onUpdate:modelValue":s[2]||(s[2]=l=>_.value=l),type:"date",class:"input-1"},null,512),[[d,_.value]])]),e("div",ie,[ue,u(e("input",{id:"email","onUpdate:modelValue":s[3]||(s[3]=l=>v.value=l),type:"email",class:"input-1"},null,512),[[d,v.value]])]),e("div",de,[ce,u(e("input",{id:"address","onUpdate:modelValue":s[4]||(s[4]=l=>f.value=l),type:"text",class:"input-1"},null,512),[[d,f.value]])]),e("div",{class:"flex justify-center gap-4"},[e("button",{class:"btn-3",onClick:U},"Cancel"),re])],32)])):(m(),g("div",G,[e("p",H,n(t.value.name),1),e("p",null,[I,i(" "+n(t.value.phone),1)]),e("p",null,[J,i(" "+n(t.value.date_of_birth),1)]),e("p",null,[K,i(" "+n(t.value.email),1)]),e("p",null,[O,i(" "+n(t.value.address),1)]),e("button",{class:"btn-2 absolute top-4 right-4",onClick:P},[Q,i("Edit ")]),e("div",W,[X,e("div",Y,[e("input",{type:"file",onChange:V,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:C},"Upload")]),x.value?(m(),g("p",Z,n(x.value),1)):M("",!0)]),N(E,{class:"btn-2",to:"/profile/change-password"},{default:A(()=>[i(" Change Password ")]),_:1})]))])])}}};export{fe as default};
