import{Y as te,Z as q,c as we,b as le,r as n,o as se,e as y,f as b,g as e,y as A,z as _,A as M,a3 as oe,F as U,h as O,t as C,i as R,n as V,q as j,w as Q,X as ke,C as T,v as L,D as F,m as _e,s as S,j as ie,x as Me,u as Ee}from"./index-qZuTYeIO.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ne}from"./exam-6ip95u8s.js";const I=te("module",{state:()=>({modules:[]}),actions:{async fetchModules(l){try{const a=await q.get(`/courses/${l}/modules`);this.modules=a.data}catch(a){console.error("Failed to fetch modules:",a)}},async addModule(l,a){try{const t=await q.post("/modules",{course_id:l,...a});this.modules.push(t.data)}catch(t){console.error("Failed to add module:",t)}},async updateModule(l,a){try{const t=await q.put(`/modules/${l}`,a),s=this.modules.findIndex(w=>w.id===l);s!==-1&&(this.modules[s]=t.data)}catch(t){console.error("Failed to update module:",t)}},async deleteModule(l){try{await q.delete(`/modules/${l}`),this.modules=this.modules.filter(a=>a.id!==l)}catch(a){console.error("Failed to delete module:",a)}}}}),he={key:0,class:"flex items-center justify-center"},$e={class:"card-bg p-4 md:p-8 w-full max-w-6xl"},Ce={class:"grid md:grid-cols-5 gap-4"},De=["value"],je={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-2"},Te={__name:"ModuleAddModal",props:{isOpen:Boolean},emits:["add-module","close"],setup(l,{emit:a}){const t=a,s=I(),w=we(),p=le(),v=n(""),o=n(""),m=n(""),g=n(""),c=n(!1),d=n(!1),u=n(""),k=n("");se(()=>{s.fetchModules(p.params.id)});const E=async()=>{const f=p.params.id,r={title:v.value,description:o.value,order:m.value,duration:g.value,is_active:c.value,is_paid:d.value,prerequisite_module_id:u.value};try{await s.addModule(f,r),k.value="Module is added",v.value="",o.value="",m.value="",g.value="",c.value=!1,d.value=!1,u.value="",setTimeout(()=>{w.push(`/course-list/${f}/modules`)},2e3)}catch(h){console.error("Failed to add module:",h)}},i=()=>{t("close")};return(f,r)=>l.isOpen?(y(),b("div",he,[e("div",$e,[r[16]||(r[16]=e("h2",{class:"title-md text-center"},"Add Module",-1)),e("form",{onSubmit:A(E,["prevent"]),class:"space-y-2"},[e("div",null,[r[7]||(r[7]=e("p",null,"Title:",-1)),_(e("input",{class:"input-1","onUpdate:modelValue":r[0]||(r[0]=h=>v.value=h),required:"",placeholder:"Title"},null,512),[[M,v.value]])]),e("div",null,[r[8]||(r[8]=e("p",null,"Description:",-1)),_(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=h=>o.value=h),class:"input-1"},null,512),[[M,o.value]])]),e("div",Ce,[e("div",null,[r[9]||(r[9]=e("p",null,"Module Order:",-1)),_(e("input",{class:"input-1","onUpdate:modelValue":r[2]||(r[2]=h=>m.value=h),type:"number"},null,512),[[M,m.value]])]),e("div",null,[r[10]||(r[10]=e("p",null,"Duration (minutes):",-1)),_(e("input",{class:"input-1","onUpdate:modelValue":r[3]||(r[3]=h=>g.value=h),type:"number"},null,512),[[M,g.value,void 0,{number:!0}]])]),e("div",null,[r[12]||(r[12]=e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1)),_(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":r[4]||(r[4]=h=>u.value=h),class:"input-1"},[r[11]||(r[11]=e("option",{value:""},"Select a prerequisite module",-1)),(y(!0),b(U,null,O(R(s).modules,h=>(y(),b("option",{key:h.id,value:h.id},C(h.title),9,De))),128))],512),[[oe,u.value]])]),e("div",je,[e("div",{onClick:r[5]||(r[5]=h=>c.value=!c.value),class:V(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":c.value}])},[e("div",{class:V(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":c.value}])},null,2)],2),r[13]||(r[13]=e("label",{for:"is_active",class:""},"Active",-1))]),e("div",Ve,[e("div",{onClick:r[6]||(r[6]=h=>d.value=!d.value),class:V(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":d.value}])},[e("div",{class:V(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":d.value}])},null,2)],2),r[14]||(r[14]=e("label",{for:"is_paid",class:""},"Paid",-1))])]),e("div",{class:"flex justify-end gap-4"},[r[15]||(r[15]=e("button",{type:"submit",class:"btn-2"},"Add",-1)),e("button",{type:"button",onClick:i,class:"btn-contrast"},"Close")])],32)])])):j("",!0)}},qe={key:0,class:"modal"},Le={class:"card-bg p-4 md:p-8 w-full max-w-5xl mx-2"},Se=["value"],Ue={class:"flex items-center gap-2"},Oe={class:"flex items-center gap-2"},Ae={__name:"ModuleEditModal",props:{module:Object,isOpen:Boolean},emits:["update","close"],setup(l,{emit:a}){const t=l,s=a,w=I(),p=n(""),v=n(""),o=n(0),m=n(0),g=n(!1),c=n(!1),d=n(0);Q(()=>t.module,E=>{E&&(p.value=E.title||"",v.value=E.description||"",o.value=E.order||0,m.value=E.duration||0,g.value=E.is_active||!1,c.value=E.is_paid||!1,d.value=E.prerequisite_module_id||null)},{immediate:!0});const u=async()=>{const E={id:t.module.id,title:p.value,description:v.value,order:o.value,duration:m.value,is_active:g.value,is_paid:c.value,prerequisite_module_id:d.value};try{await w.updateModule(t.module.id,E),s("update",E),s("close")}catch(i){console.error("Error updating module:",i)}},k=()=>{s("close")};return(E,i)=>l.isOpen?(y(),b("div",qe,[e("div",Le,[i[15]||(i[15]=e("h2",{class:"title-md text-center"},"Edit Module",-1)),e("div",null,[i[7]||(i[7]=e("p",null,"Title:",-1)),_(e("input",{class:"input-1","onUpdate:modelValue":i[0]||(i[0]=f=>p.value=f),required:"",placeholder:"Title"},null,512),[[M,p.value]])]),e("div",null,[i[8]||(i[8]=e("p",null,"Description:",-1)),_(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=f=>v.value=f),class:"input-1"},null,512),[[M,v.value]])]),e("div",null,[i[9]||(i[9]=e("p",null,"Order:",-1)),_(e("input",{class:"input-1","onUpdate:modelValue":i[2]||(i[2]=f=>o.value=f),type:"number"},null,512),[[M,o.value]])]),e("div",null,[i[10]||(i[10]=e("label",{for:"duration",class:"block text-sm font-medium text-gray-700"},"Duration (minutes):",-1)),_(e("input",{type:"number",id:"duration","onUpdate:modelValue":i[3]||(i[3]=f=>m.value=f),class:"input-1"},null,512),[[M,m.value,void 0,{number:!0}]])]),e("div",null,[i[12]||(i[12]=e("label",{for:"prerequisite_module_id"},"Prerequisite Module:",-1)),_(e("select",{id:"prerequisite_module_id","onUpdate:modelValue":i[4]||(i[4]=f=>d.value=f),class:"input-1"},[i[11]||(i[11]=e("option",{value:""},"Select a prerequisite module",-1)),(y(!0),b(U,null,O(R(w).modules,f=>(y(),b("option",{key:f.id,value:f.id},C(f.title),9,Se))),128))],512),[[oe,d.value]])]),e("div",Ue,[e("div",{onClick:i[5]||(i[5]=f=>g.value=!g.value),class:V(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":g.value}])},[e("div",{class:V(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":g.value}])},null,2)],2),i[13]||(i[13]=e("label",{class:"ml-2 block text-sm text-gray-900"},"Active",-1))]),e("div",Oe,[e("div",{onClick:i[6]||(i[6]=f=>c.value=!c.value),class:V(["w-10 h-6 bg-gray-300 rounded-full cursor-pointer flex items-center p-1 transition-colors duration-200",{"bg-green-500":c.value}])},[e("div",{class:V(["bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200",{"translate-x-4":c.value}])},null,2)],2),i[14]||(i[14]=e("label",{class:"ml-2 block text-sm text-gray-900"},"Paid",-1))]),e("div",{class:"flex justify-center gap-4"},[e("button",{onClick:u,class:"btn-2"},"Save"),e("button",{onClick:k,class:"btn-contrast"},"Close")])])])):j("",!0)}},ze=ae(Ae,[["__scopeId","data-v-702f4702"]]),Re={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},Fe={class:"modal-container bg-white w-full md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto"},Ie={class:"p-6"},Ne={class:"mb-4"},Pe={key:0,class:"text-gray-700"},Be={__name:"ModuleDeleteModal",props:{isOpen:Boolean,module:Object},emits:["close","confirmDelete"],setup(l,{emit:a}){const t=l,s=a,w=I(),p=async()=>{t.module&&(await w.deleteModule(t.module.id),s("confirmDelete"),s("close"))},v=()=>{s("close")};return(o,m)=>t.isOpen?(y(),b("div",Re,[m[1]||(m[1]=e("div",{class:"modal-overlay absolute inset-0 bg-gray-500 opacity-75"},null,-1)),e("div",Fe,[e("div",Ie,[e("div",Ne,[m[0]||(m[0]=e("h2",{class:"text-2xl font-bold mb-4"},"Delete Module",-1)),t.module?(y(),b("p",Pe,' Are you sure you want to delete "'+C(t.module.title)+'"? ',1)):j("",!0)]),e("div",{class:"flex justify-end"},[e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:p},"Yes"),e("button",{class:"btn-2",onClick:v},"No")])])])])])):j("",!0)}},Qe=ae(Be,[["__scopeId","data-v-668780de"]]),Y=te("lecture",{state:()=>({lectures:{}}),actions:{async fetchLectures(l){try{const a=await q.get(`/modules/${l}/lectures`);this.lectures={...this.lectures,[l]:a.data}}catch(a){console.error("Error fetching lectures:",a)}},async addLecture(l,a){try{const t=await q.post(`/modules/${l}/lectures`,a);this.lectures[l]||(this.lectures[l]=[]),this.lectures[l]=[...this.lectures[l],t.data]}catch(t){console.error("Error adding lecture:",t)}},async deleteLecture(l,a){try{await q.delete(`/modules/${l}/lectures/${a}`),this.lectures[l]&&(this.lectures[l]=this.lectures[l].filter(t=>t.id!==a))}catch(t){console.error("Error deleting lecture:",t)}},async updateLecture(l,a,t){try{const s=await q.put(`/modules/${l}/lectures/${a}`,t);if(this.lectures[l]){const w=this.lectures[l].findIndex(p=>p.id===a);w!==-1&&(this.lectures[l][w]=s.data)}}catch(s){console.error("Error updating lecture:",s)}}}}),Ye={__name:"AddExam",props:{moduleId:{required:!0},examType:{type:String,required:!0}},emits:["submit"],setup(l,{emit:a}){const t=l,s=n({title:"",duration:"",opening_time:"",result_publish_time:"",link:""}),w=a,p=()=>{const v={module_id:t.moduleId,title:s.value.title,type:t.examType,duration:s.value.duration,opening_time:s.value.opening_time,result_publish_time:s.value.result_publish_time,link:s.value.link};w("submit",v),s.value={title:"",duration:"",opening_time:"",link:""}};return(v,o)=>(y(),b("div",null,[e("form",{onSubmit:A(p,["prevent"]),class:"space-y-4"},[e("div",null,[o[4]||(o[4]=e("label",null,"Exam Title:",-1)),_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":o[0]||(o[0]=m=>s.value.title=m),placeholder:"Title",required:""},null,512),[[M,s.value.title]])]),e("div",null,[o[5]||(o[5]=e("label",null,"Duration (minutes):",-1)),_(e("input",{class:"input-1",type:"number","onUpdate:modelValue":o[1]||(o[1]=m=>s.value.duration=m),placeholder:"Duration",required:""},null,512),[[M,s.value.duration]])]),e("div",null,[o[6]||(o[6]=e("label",null,"Opening Time:",-1)),_(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":o[2]||(o[2]=m=>s.value.opening_time=m),placeholder:"Opening Date & Time",required:""},null,512),[[M,s.value.opening_time]])]),e("div",null,[o[7]||(o[7]=e("label",null,"Result Publish Time:",-1)),_(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":o[3]||(o[3]=m=>s.value.result_publish_time=m),placeholder:"Opening Date & Time",required:""},null,512),[[M,s.value.result_publish_time]])]),o[8]||(o[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-2"},"Add Exam")],-1))],32)]))}},Xe={class:"flex flex-col md:flex-row items-center gap-x-2"},Ze={key:0,class:"w-full md:w-60 text-left md:text-right"},z={__name:"FormLabel",props:["label"],setup(l){return(a,t)=>(y(),b("label",Xe,[l.label?(y(),b("span",Ze,C(l.label),1)):j("",!0),ke(a.$slots,"default")]))}},Ge={__name:"EditExamForm",props:{exam:Object},emits:["close"],setup(l,{emit:a}){const t=l,s=a,w=ne(),p=n(t.exam.title),v=n(t.exam.duration),o=n(t.exam.opening_time),m=n(t.exam.result_publish_time),g=n(t.exam.link),c=async()=>{const d={...t.exam,title:p.value,duration:v.value,opening_time:o.value,result_publish_time:m.value,link:g.value};try{await w.updateExam(t.exam.module_id,t.exam.id,d),s("close")}catch(u){console.error("Error updating exam:",u)}};return Q(()=>t.exam,d=>{p.value=d.title,v.value=d.duration,o.value=d.opening_time,g.value=d.link},{immediate:!0}),(d,u)=>(y(),b("div",null,[e("form",{onSubmit:A(c,["prevent"]),class:"space-y-4"},[T(z,{label:"Exam Title"},{default:L(()=>[_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":u[0]||(u[0]=k=>p.value=k),placeholder:"Exam Title",required:""},null,512),[[M,p.value]])]),_:1}),T(z,{label:"Duration (minutes)"},{default:L(()=>[_(e("input",{class:"input-1",type:"number","onUpdate:modelValue":u[1]||(u[1]=k=>v.value=k),placeholder:"Duration (minutes)",required:""},null,512),[[M,v.value]])]),_:1}),T(z,{label:"Opening Time"},{default:L(()=>[_(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":u[2]||(u[2]=k=>o.value=k),placeholder:"Opening Date & Time",required:""},null,512),[[M,o.value]])]),_:1}),T(z,{label:"Result Publish"},{default:L(()=>[_(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":u[3]||(u[3]=k=>m.value=k),placeholder:"Result Publish Time",required:""},null,512),[[M,m.value]])]),_:1}),u[4]||(u[4]=e("hr",{class:"my-3"},null,-1)),u[5]||(u[5]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1))],32)]))}},He={class:"flex flex-col md:flex-row md:justify-center"},Je={__name:"AddLecture",props:{moduleId:Number,courseId:Number},setup(l){const a=l,t=Y(),s=n(""),w=n(""),p=n(""),v=n(""),o=n("video"),m=async()=>{const g={course_id:a.courseId,module_id:a.moduleId,title:s.value,link:w.value,description:p.value,type:o.value,opening_time:v.value};try{await t.addLecture(a.moduleId,g),s.value="",w.value="",p.value="",o.value="video",v.value=""}catch(c){console.error("Error adding lecture:",c)}};return(g,c)=>(y(),b("div",null,[e("form",{onSubmit:A(m,["prevent"]),class:"space-y-4"},[_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>s.value=d),placeholder:"Title",required:""},null,512),[[M,s.value]]),e("div",He,[e("div",null,[_(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":c[1]||(c[1]=d=>o.value=d),class:"mr-2"},null,512),[[F,o.value]]),c[6]||(c[6]=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1))]),e("div",null,[_(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":c[2]||(c[2]=d=>o.value=d),class:"mr-2"},null,512),[[F,o.value]]),c[7]||(c[7]=e("label",{for:"virtual_platform"},"Live Class Link",-1))])]),_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[3]||(c[3]=d=>w.value=d),placeholder:"Link",required:""},null,512),[[M,w.value]]),_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":c[4]||(c[4]=d=>p.value=d),placeholder:"Description"},null,512),[[M,p.value]]),_(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":c[5]||(c[5]=d=>v.value=d),placeholder:"Opening Date & Time",required:""},null,512),[[M,v.value]]),c[8]||(c[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Add Lecture")],-1))],32)]))}},Ke={class:"flex flex-col md:flex-row md:justify-center"},We={__name:"EditLectureForm",props:{lecture:Object},emits:["close"],setup(l,{emit:a}){const t=l,s=a,w=Y(),p=n(t.lecture.title),v=n(t.lecture.link),o=n(t.lecture.description),m=n(t.lecture.opening_time),g=n(t.lecture.type),c=async()=>{const d={...t.lecture,title:p.value,link:v.value,description:o.value,type:g.value,opening_time:m.value};try{await w.updateLecture(t.lecture.module_id,t.lecture.id,d),s("close")}catch(u){console.error("Error updating lecture:",u)}};return Q(()=>t.lecture,d=>{p.value=d.title,v.value=d.link,o.value=d.description,g.value=d.type,m.value=d.opening_time},{immediate:!0}),(d,u)=>(y(),b("div",null,[e("form",{onSubmit:A(c,["prevent"]),class:"space-y-4"},[_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":u[0]||(u[0]=k=>p.value=k),placeholder:"Title",required:""},null,512),[[M,p.value]]),e("div",Ke,[e("div",null,[_(e("input",{type:"radio",id:"video",value:"video","onUpdate:modelValue":u[1]||(u[1]=k=>g.value=k),class:"mr-2"},null,512),[[F,g.value]]),u[6]||(u[6]=e("label",{for:"video",class:"mr-4"},"Recorded Video",-1))]),e("div",null,[_(e("input",{type:"radio",id:"virtual_platform",value:"virtual_platform","onUpdate:modelValue":u[2]||(u[2]=k=>g.value=k),class:"mr-2"},null,512),[[F,g.value]]),u[7]||(u[7]=e("label",{for:"virtual_platform"},"Live Class Link",-1))])]),_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":u[3]||(u[3]=k=>v.value=k),placeholder:"Link",required:""},null,512),[[M,v.value]]),_(e("input",{class:"input-1",type:"text","onUpdate:modelValue":u[4]||(u[4]=k=>o.value=k),placeholder:"Description"},null,512),[[M,o.value]]),_(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":u[5]||(u[5]=k=>m.value=k),placeholder:"Opening Date & Time",required:""},null,512),[[M,m.value]]),u[8]||(u[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1))],32)]))}},et={class:"flex md:flex-row flex-col items-center gap-4"},tt={class:"flex flex-1 items-center gap-4"},lt={class:"text-center border-2 rounded-md p-1.5"},st={class:"flex-1"},ot={class:"line-clamp-1"},it={class:"flex items-center gap-2"},at={key:0},nt={class:"flex flex-col justify-center space-y-2 divide-y-2"},ut={class:"flex items-center gap-4"},dt={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},rt={class:"text-xs"},ct={key:0},mt={key:1},pt={class:"title-sm"},vt={class:"flex items-center gap-2 text-sm text-gray-400"},ft={class:"flex gap-2"},xt=["onClick"],yt=["onClick"],bt={class:"grow shrink flex items-center gap-4"},gt={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},wt={key:0,class:"fal fa-ballot-check text-2xl"},kt={key:1,class:"fal fa-question text-3xl"},_t={class:"title-sm"},Mt={class:"flex items-center gap-2 text-sm text-gray-400"},Et={class:"grow-0 flex flex-wrap justify-end max-w-[110px] md:max-w-fit gap-2"},ht=["onClick"],$t=["onClick"],Ct={class:"flex gap-4 items-center justify-center mt-2"},Dt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},jt={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Vt={class:"mt-4"},Tt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},qt={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Lt={class:"mt-4"},St={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ut={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Ot={class:"mt-4 text-center"},At={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},zt={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Rt={class:"mt-4"},Ft={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},It={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Nt={class:"flex justify-end"},Pt={class:"mr-auto font-bold"},Bt={class:"mt-4"},Qt={key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Yt={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},Xt={class:"mt-4 text-center"},Zt={__name:"ModuleItem",props:{module:Object},emits:["edit","delete"],setup(l,{emit:a}){const t=l,s=Y(),w=ne(),p=n(!1),v=n(!1),o=n(!1),m=n(!1),g=n(!1),c=n(!1),d=n(!1),u=n(null),k=n(null),E=n(null),i=n(null),f=n(""),r=a,h=()=>{r("edit",t.module)},ue=()=>{r("delete",t.module)},de=async()=>{p.value=!p.value,p.value&&(await s.fetchLectures(t.module.id),await w.fetchExams(t.module.id))},re=()=>{v.value=!0},X=()=>{v.value=!1},ce=D=>{u.value=D,o.value=!0},Z=()=>{o.value=!1},me=D=>{k.value=D,m.value=!0},N=()=>{m.value=!1},pe=async()=>{k.value&&(await s.deleteLecture(t.module.id,k.value.id),N())},ve=async()=>{X()},G=D=>{const x=new Date(D);return Me(x,"hh:mm a, dd-MMM-yyyy")},fe=D=>{f.value=D,g.value=!0},H=()=>{f.value="",g.value=!1},xe=async D=>{try{await w.addExam(t.module.id,D),H()}catch(x){console.error("Error adding exam:",x)}},ye=D=>{E.value=D,c.value=!0},J=()=>{c.value=!1},be=D=>{i.value=D,d.value=!0},P=()=>{d.value=!1},ge=async()=>{i.value&&(await w.deleteExam(t.module.id,i.value.id),P())};return(D,x)=>{var W,ee;const K=_e("RouterLink");return y(),b("li",{class:V(["card-bg p-4",{"bg-gray-100 border-2 border-gray-200 text-gray-400":l.module.is_active==0}])},[e("div",et,[e("div",tt,[e("div",lt,[e("div",{class:V(["text-xl font-bold text-orange-500",{"!text-gray-400":l.module.is_active==0}])},C(l.module.order),3),x[2]||(x[2]=e("div",{class:"text-xs md:text-sm"},"Module",-1))]),e("div",st,[e("h4",{class:V(["title-md",{"text-gray-400":l.module.is_active==0}])},C(l.module.title),3),e("p",ot,C(l.module.description),1)])]),e("div",it,[e("button",{class:"btn-2",onClick:de},[e("i",{class:V(p.value?"fas fa-angle-up":"fas fa-angle-down")},null,2),x[3]||(x[3]=e("p",null,"Content",-1))]),e("button",{class:"btn-2 pb-2",onClick:h},x[4]||(x[4]=[e("i",{class:"far fa-edit"},null,-1),S("Edit")])),e("button",{class:"btn-contrast pb-2",onClick:ue},x[5]||(x[5]=[e("i",{class:"fas fa-trash-alt"},null,-1),S("Delete ")]))])]),p.value?(y(),b("div",at,[x[14]||(x[14]=e("hr",{class:"mb-2"},null,-1)),e("div",nt,[(y(!0),b(U,null,O(R(s).lectures[l.module.id],$=>(y(),b("div",{key:$.id,class:"flex gap-4 items-center w-full justify-between py-2"},[e("div",ut,[e("div",dt,[e("i",{class:V($.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",rt,[$.type==="virtual_platform"?(y(),b("p",ct,"Live")):(y(),b("p",mt,"Rec"))])]),e("div",null,[e("h4",pt,C($.title),1),e("div",vt,[x[6]||(x[6]=e("i",{class:"far fa-calendar-check"},null,-1)),e("p",null,C(G($.opening_time)),1)])])]),e("div",ft,[e("button",{class:"btn-1 pb-2",onClick:B=>ce($)},x[7]||(x[7]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"Edit",-1)]),8,xt),e("button",{class:"btn-contrast pb-2",onClick:B=>me($)},x[8]||(x[8]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",{class:"hidden md:flex"},"Delete",-1)]),8,yt)])]))),128)),(y(!0),b(U,null,O(R(w).exams[l.module.id],$=>(y(),b("div",{key:$.id,class:"w-full flex gap-4 items-center justify-between py-2"},[e("div",bt,[e("div",gt,[$.type==="MCQ"?(y(),b("i",wt)):(y(),b("i",kt)),x[9]||(x[9]=e("div",{class:"text-xs"},"Exam",-1))]),e("div",null,[e("h4",_t,C($.title),1),e("div",Mt,[x[10]||(x[10]=e("i",{class:"far fa-calendar-check"},null,-1)),e("p",null,C(G($.opening_time)),1)])])]),e("div",Et,[$.user_exams_count?(y(),ie(K,{key:0,to:{name:"ExamResultList",params:{courseId:l.module.course_id,moduleId:l.module.id,examId:$.id}},class:"btn-3 px-3.5"},{default:L(()=>[S(" Results ("+C($.user_exams_count)+") ",1)]),_:2},1032,["to"])):j("",!0),T(K,{to:{name:"ExamQuestionList",params:{courseId:l.module.course_id,moduleId:l.module.id,examId:$.id}},class:"btn-3 px-3.5"},{default:L(()=>x[11]||(x[11]=[S(" Questions ")])),_:2},1032,["to"]),e("button",{class:"btn-1 pb-2",onClick:B=>ye($)},x[12]||(x[12]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"Edit",-1)]),8,ht),e("button",{class:"btn-contrast pb-2",onClick:B=>be($)},x[13]||(x[13]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",{class:"hidden md:flex"},"Delete",-1)]),8,$t)])]))),128))]),x[15]||(x[15]=e("hr",{class:"my-3"},null,-1)),e("div",Ct,[e("button",{class:"btn-1",onClick:re},"Add Lecture"),e("button",{class:"btn-1",onClick:x[0]||(x[0]=$=>fe("MCQ"))},"Add MCQ Exam"),j("",!0)])])):j("",!0),v.value?(y(),b("div",Dt,[e("div",jt,[e("div",{class:"flex justify-end"},[e("button",{onClick:X,class:"text-gray-500 hover:text-gray-700"},"×")]),e("div",Vt,[T(Je,{moduleId:l.module.id,courseId:l.module.course_id,onSubmit:ve},null,8,["moduleId","courseId"])])])])):j("",!0),o.value?(y(),b("div",Tt,[e("div",qt,[e("div",{class:"flex justify-end"},[e("button",{onClick:Z,class:"text-gray-500 hover:text-gray-700"},"×")]),e("div",Lt,[T(We,{lecture:u.value,onClose:Z},null,8,["lecture"])])])])):j("",!0),m.value?(y(),b("div",St,[e("div",Ut,[e("div",{class:"flex justify-end"},[e("button",{onClick:N,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Ot,[e("p",null,"Do you want to delete '"+C((W=k.value)==null?void 0:W.title)+"' lecture?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:pe},"Yes"),e("button",{class:"btn-contrast",onClick:N},"No")])])])])):j("",!0),g.value?(y(),b("div",At,[e("div",zt,[e("div",{class:"flex justify-end"},[x[16]||(x[16]=e("div",{class:"mr-auto font-bold"},"Add Exam Info",-1)),e("button",{onClick:H,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),x[17]||(x[17]=e("hr",{class:"my-3"},null,-1)),e("div",Rt,[T(Ye,{moduleId:l.module.id,examType:f.value,onSubmit:xe},null,8,["moduleId","examType"])])])])):j("",!0),c.value?(y(),b("div",Ft,[e("div",It,[e("div",Nt,[e("div",Pt,"Edit Form : "+C(E.value.title),1),e("button",{onClick:J,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),x[18]||(x[18]=e("hr",{class:"my-3"},null,-1)),e("div",Bt,[T(Ge,{exam:E.value,onClose:J},null,8,["exam"])])])])):j("",!0),d.value?(y(),b("div",Qt,[e("div",Yt,[e("div",{class:"flex justify-end"},[e("button",{onClick:P,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Xt,[e("p",null,"Do you want to delete '"+C((ee=i.value)==null?void 0:ee.title)+"' exam?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:ge},"Yes"),e("button",{class:"btn-contrast",onClick:P},"No")])])])])):j("",!0)],2)}}},Gt={class:"my-container space-y-2"},Ht={class:"title-lg text-center"},Jt={key:0},Kt={class:"space-y-2"},Wt={key:1,class:"flex justify-center"},el={class:"flex justify-center py-2"},ol={__name:"ModuleListView",setup(l){const a=le(),t=Ee(),s=I(),w=n(null),p=n([]),v=n(null),o=n(!1),m=n(!1),g=n(!1);se(async()=>{try{await t.fetchCourse(a.params.id),w.value=t.course,await s.fetchModules(a.params.id),p.value=s.modules}catch(i){console.error("Error fetching data:",i)}});const c=i=>{v.value=i,o.value=!0},d=i=>{v.value=i,m.value=!0},u=async i=>{try{await s.addModule(a.params.id,i),await s.fetchModules(a.params.id),p.value=s.modules,g.value=!1}catch(f){console.error("Error adding module:",f)}},k=async i=>{try{await s.updateModule(i.id,i),await s.fetchModules(a.params.id),p.value=s.modules,o.value=!1}catch(f){console.error("Error updating module:",f)}},E=async()=>{if(v.value)try{await s.deleteModule(v.value.id),await s.fetchModules(a.params.id),p.value=s.modules,m.value=!1}catch(i){console.error("Error deleting module:",i)}};return(i,f)=>(y(),b("div",Gt,[e("h1",Ht,C(w.value?w.value.title:"Loading...")+" Modules",1),p.value.length>0?(y(),b("div",Jt,[e("ul",Kt,[(y(!0),b(U,null,O(p.value,r=>(y(),ie(Zt,{key:r.id,module:r,onEdit:c,onDelete:d},null,8,["module"]))),128))])])):(y(),b("div",Wt,f[4]||(f[4]=[e("p",{class:""},"No modules available for this course.",-1)]))),e("div",el,[e("button",{class:"btn-2",onClick:f[0]||(f[0]=r=>g.value=!0)},f[5]||(f[5]=[e("i",{class:"fas fa-plus"},null,-1),S("Add Module ")]))]),T(Te,{isOpen:g.value,onAddModule:u,onClose:f[1]||(f[1]=r=>g.value=!1)},null,8,["isOpen"]),T(ze,{class:"z-40",module:v.value,isOpen:o.value,onClose:f[2]||(f[2]=r=>o.value=!1),onUpdate:k},null,8,["module","isOpen"]),T(Qe,{class:"z-40",module:v.value,isOpen:m.value,onClose:f[3]||(f[3]=r=>m.value=!1),onConfirmDelete:E},null,8,["module","isOpen"])]))}};export{ol as default};
