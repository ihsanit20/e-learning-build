import{r as f,P as U,ae as C,I as H,T as z,Q as k,x as a,B as b,z as e,F as x,C as y,X as B,ad as R,G as M,U as h,ab as $,H as P,M as Q,y as o,a9 as j}from"./vue-CcEtAIOs.js";import{u as D}from"./course-exam-BByREWi-.js";import"./index-Dxm2rnF7.js";import"./vendor-PJuFQbji.js";const F={class:"my-container"},N={key:0,class:"card-bg p-4 md:p-8"},A={class:"shrink-0 grow-0 card-bg p-4 sticky top-0"},G={class:"flex justify-between items-center gap-2"},W={class:"line-clamp-1"},X={class:"grow-0 shrink-0 border px-3 pt-2 pb-1 rounded-lg"},J={class:"relative w-full h-2 bg-gray-300 rounded mt-1"},K={class:"shrink grow mt-6 space-y-4 overflow-hidden overflow-y-auto scrollbar"},O={class:"mb-2"},Y={class:"font-semibold"},Z=["innerHTML"],q={key:0,class:"space-y-2"},ee=["name","id","value","onUpdate:modelValue"],se=["for","innerHTML"],te={key:1},ae=["onUpdate:modelValue"],oe={class:"flex items-center gap-1 md:gap-2"},de={__name:"MyExamParticipation",setup(re){const T=U(),g=z(),v=D(),_=f(!1),{courseId:l,examId:i}=T.params,{exam:u,loading:S}=C(v),n=f(0),d=f(0);let c=null;H(async()=>{if((await v.fetchExam(l,i)).has_user_exam)return g.replace({path:`/my/course/${l}/exam/${i}/answer-sheet`});u.value.duration&&(d.value=u.value.duration*60,n.value=d.value,I())});function I(){c=setInterval(()=>{n.value>0?n.value-=1:(clearInterval(c),w())},1e3)}const L=k(()=>{const m=Math.floor(n.value/60),s=Math.floor(m/60),t=m%60,p=n.value%60;return`${s?`${s}:`:""}${String(t).padStart(2,"0")}:${String(p).padStart(2,"0")}`}),V=k(()=>(d.value-n.value)/d.value*100),w=async()=>(await v.submitExam(l,i),c&&clearInterval(c),g.replace({path:`/my/course/${l}/exam/${i}/result`}));return(m,s)=>(o(),a("div",F,[b(S)?(o(),a("div",N,s[1]||(s[1]=[e("p",null,"Loading...",-1)]))):(o(),a(x,{key:1},[e("div",A,[e("div",G,[e("h3",W,y(b(u).title),1),e("p",X,[s[2]||(s[2]=e("span",{class:"hidden md:inline"},"Remaining:",-1)),s[3]||(s[3]=B()),e("b",null,y(L.value),1)])]),e("div",J,[e("div",{class:"absolute left-0 top-0 h-full bg-blue-500 rounded",style:R({width:`${V.value}%`})},null,4)])]),e("div",K,[(o(!0),a(x,null,M(b(u).questions,(t,p)=>(o(),a("div",{key:t.id,class:"card-bg p-4"},[e("div",O,[e("h4",Y,"Question "+y(p+1)+":",1),e("div",{innerHTML:t.question_text},null,8,Z)]),t.type==="MCQ"?(o(),a("div",q,[(o(!0),a(x,null,M(t.mcq_options,r=>(o(),a("div",{key:r.id,class:"flex items-center cursor-pointer border px-3 py-4 rounded-lg"},[h(e("input",{type:"checkbox",name:"question-"+p,id:`question:${t.id}-option:${r.id}`,value:r.id,class:"mr-2 size-4 cursor-pointer","onUpdate:modelValue":E=>t.user_answers=E},null,8,ee),[[$,t.user_answers]]),e("label",{class:"cursor-pointer",for:`question:${t.id}-option:${r.id}`,innerHTML:r.option_text},null,8,se)]))),128))])):(o(),a("div",te,[h(e("textarea",{class:"w-full p-2 border rounded-md",rows:"4",placeholder:"Write your answer here...","onUpdate:modelValue":r=>t.user_answers[0]=r},null,8,ae),[[j,t.user_answers[0]]])]))]))),128))]),s[5]||(s[5]=e("hr",{class:"my-5"},null,-1)),e("form",{onSubmit:Q(w,["prevent"]),class:"grow-0 shrink-0 w-full flex justify-end gap-1 md:gap-4"},[e("label",oe,[h(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),type:"checkbox",required:""},null,512),[[$,_.value]]),s[4]||(s[4]=e("span",{class:"pt-1 text-xs md:text-base"},"I want to submit",-1))]),e("button",{type:"submit",class:P(["btn-2 disabled:opacity-50 px-1 md:px-4 text-xs md:text-base",{"opacity-50":!_.value}])}," Submit Answer ",2)],32),s[6]||(s[6]=e("br",null,null,-1))],64))]))}};export{de as default};
