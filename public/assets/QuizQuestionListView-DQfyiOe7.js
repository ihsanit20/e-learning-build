import{b as E,r as x,o as G,d as R,e as a,f as n,g as e,t as c,i as r,z as p,A as _,p as k,F as M,h as H,x as J,j as U,s as w,G as K}from"./index-BedAWJhs.js";import{_ as D}from"./QuestionCard-BR4_T6r1.js";import{u as O}from"./quiz-CfIyzIt5.js";import{u as W}from"./question-DGGsR1zG.js";const X={class:"my-container"},Y={class:"card-bg p-4"},Z={class:"flex justify-between items-center flex-wrap gap-4"},ee=e("span",{class:"text-gray-500 pr-1"},"Name:",-1),te={class:"text-lg"},se={class:"text-xl"},le=e("span",null,"| Mark: ",-1),ae={class:"text-xl"},ne={class:"flex items-center gap-2 ml-auto"},oe=["disabled"],ie={key:0,class:"mt-4 flex flex-wrap items-center gap-2"},ue={class:"flex flex-wrap items-center gap-2"},de={class:"flex flex-col md:flex-row justify-center items-center gap-x-1 text-sm md:text-base"},ce=e("label",null,"Mark",-1),re={class:"flex flex-col md:flex-row justify-center items-center gap-x-1 text-sm md:text-base"},pe=e("label",null,"Negative",-1),ve={key:1,class:"flex justify-center items-center gap-1"},me=e("label",null,"Mark",-1),xe=["disabled"],_e={key:1,class:"grid md:grid-cols-2 gap-4 mt-4"},he={key:0,class:"flex justify-center items-center"},fe=["value","checked"],ye={class:"pt-1.5 pb-1"},be={class:"bg-green-600/10 text-green-600 px-2 pt-1.5 pb-1 rounded-md text-xs font-semibold"},ke={key:0,class:"bg-red-600/10 text-red-600 px-2 pt-1.5 pb-1 rounded-md text-xs font-semibold"},ge=["onClick"],Qe=e("i",{class:"fad fa-trash"},null,-1),Me=[Qe],we={key:2,class:"text-red-500 py-16 text-center"},Ce={class:"w-full bg-gray-300 py-2 px-1 md:p-4 rounded-lg max-w-lg max-h-full overflow-y-auto"},ze=e("h3",{class:"text-xl font-semibold"},"Find Question",-1),je={class:"modal-body md:min-h-[200px] space-y-4"},qe={key:0,class:"flex justify-center items-center text-red-500 h-40"},Ie={class:"flex flex-col md:flex-row justify-center items-center gap-x-1 text-sm md:text-base"},Ve=e("label",null,"Mark",-1),Ne={class:"flex flex-col md:flex-row justify-center items-center gap-x-1 text-sm md:text-base"},Se=e("label",null,"Negative",-1),Ue={key:1,class:"flex justify-center items-center gap-1"},De=e("label",null,"Mark",-1),Be=["disabled"],Fe={key:1,class:"flex justify-center items-center text-red-500 h-40"},$e=e("br",null,null,-1),Ge={__name:"QuizQuestionListView",setup(Ae){const B=E(),l=O(),F=W(),C=x(!1),i=x(null),v=x(""),u=x(""),d=x(1),h=x(.25),m=x([]),{quizId:y}=B.params;G(async()=>{l.fetchSingleQuiz(y)});const $=async()=>{v.value&&(i.value=await F.show(v.value,{type:l.quiz.type}),C.value=!0)},A=async()=>{if(!i.value)return g();if(!(i.value.type==="MCQ"?d.value>0:u.value>0))return;const o=await l.addQuizQuestion(y,v.value,{mark:Math.abs(i.value.type==="MCQ"?d.value:u.value),negative_mark:Math.abs(h.value||0)});return o.quiz_question&&l.quiz.quiz_questions.push(o.quiz_question),v.value="",g()},g=()=>{i.value=null,C.value=!1},L=async()=>{var o,s;await l.changeQuizQuestionMark(y,{question_ids:m.value,mark:((o=l.quiz)==null?void 0:o.type)==="MCQ"?d.value:u.value,negative_mark:((s=l.quiz)==null?void 0:s.type)==="MCQ"?h.value:0}),m.value=[],l.fetchSingleQuiz(y)},P=async o=>{if(!confirm(`Do you want to remove this question [ID: ${o}] ?`))return;const s=await l.removeQuizQuestion(y,o);s.question_id&&(l.quiz.quiz_questions=l.quiz.quiz_questions.filter(f=>parseInt(f.question_id)!==parseInt(s.question_id)))},T=R(()=>{var s;let o=0;return(s=l.quiz)!=null&&s.quiz_questions&&(o=l.quiz.quiz_questions.reduce((f,Q)=>f+parseFloat(Q.mark||0),0)),o});return(o,s)=>{var f,Q,z,j,q,I,V,N,S;return a(),n("div",X,[e("div",Y,[e("div",Z,[e("div",null,[e("div",null,[ee,e("b",te,c(r(l).quiz.title),1)]),e("div",null,[e("span",null,c((f=r(l).quiz)==null?void 0:f.type)+": ",1),e("b",se,c((z=(Q=r(l).quiz)==null?void 0:Q.quiz_questions)==null?void 0:z.length),1),le,e("b",ae,c(T.value),1)])]),e("div",ne,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),type:"number",class:"input-1 px-0 py-1.5 w-24 text-center placeholder:text-sm placeholder:italic",placeholder:"Question ID"},null,512),[[_,v.value]]),e("button",{type:"button",disabled:!v.value,class:"btn-2",onClick:$}," Find Question ",8,oe)]),k("",!0)])]),m.value.length?(a(),n("div",ie,[e("div",null,"Selected Ids: "+c(m.value),1),e("div",ue,[((q=(j=r(l))==null?void 0:j.quiz)==null?void 0:q.type)==="MCQ"?(a(),n(M,{key:0},[e("div",de,[ce,p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),type:"number",class:"input-1 px-0 pt-1 pb-0.5 w-12 text-center placeholder:text-xs placeholder:italic",placeholder:"Mark"},null,512),[[_,d.value]])]),e("div",re,[pe,p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),type:"number",class:"input-1 px-0 pt-1 pb-0.5 w-16 text-center placeholder:text-xs placeholder:italic",placeholder:"Negative"},null,512),[[_,h.value]])])],64)):(a(),n("div",ve,[me,p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>u.value=t),type:"number",class:"input-1 px-0 py-1 w-12 text-center placeholder:text-sm placeholder:italic",placeholder:"Mark"},null,512),[[_,u.value]])])),e("button",{type:"button",class:"btn-2",disabled:!(((V=(I=r(l))==null?void 0:I.quiz)==null?void 0:V.type)==="MCQ"?d.value>0:u.value>0),onClick:L}," Change Mark ",8,xe)])])):k("",!0),(S=(N=r(l).quiz)==null?void 0:N.quiz_questions)!=null&&S.length?(a(),n("div",_e,[(a(!0),n(M,null,H(r(l).quiz.quiz_questions,t=>(a(),U(D,{key:t.id,question:t==null?void 0:t.question},{id:w(()=>[t.question_id?(a(),n("div",he,[p(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=b=>m.value=b),value:t.question_id,checked:m.value.includes(t.question_id),class:"cursor-pointer"},null,8,fe),[[K,m.value]])])):k("",!0),e("div",ye,"ID: "+c(t.question_id),1)]),mark:w(()=>{var b;return[e("div",be," Mark: "+c(t==null?void 0:t.mark),1),((b=t==null?void 0:t.question)==null?void 0:b.type)==="MCQ"?(a(),n("div",ke," Negative: "+c(t==null?void 0:t.negative_mark),1)):k("",!0)]}),action:w(()=>[e("button",{type:"button",onClick:b=>P(t.question_id),class:"text-red-500"},Me,8,ge)]),_:2},1032,["question"]))),128))])):(a(),n("p",we,"No questions found")),C.value?(a(),n("div",{key:3,class:"modal",onClick:J(g,["self"])},[e("div",Ce,[e("div",{class:"modal-header"},[ze,e("button",{type:"button",class:"btn-contrast",onClick:g}," Cancel ")]),e("div",je,[i.value?(a(),n(M,{key:0},[r(l).quiz.quiz_questions.some(t=>parseInt(t.question_id)===parseInt(i.value.id))?(a(),n("div",qe," This question has already been added. ")):(a(),U(D,{key:1,question:i.value},{action:w(()=>[i.value.type==="MCQ"?(a(),n(M,{key:0},[e("div",Ie,[Ve,p(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>d.value=t),type:"number",class:"input-1 px-0 pt-1 pb-0.5 w-12 text-center placeholder:text-xs placeholder:italic",placeholder:"Mark"},null,512),[[_,d.value]])]),e("div",Ne,[Se,p(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>h.value=t),type:"number",class:"input-1 px-0 pt-1 pb-0.5 w-16 text-center placeholder:text-xs placeholder:italic",placeholder:"Negative"},null,512),[[_,h.value]])])],64)):(a(),n("div",Ue,[De,p(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>u.value=t),type:"number",class:"input-1 px-0 py-1 w-12 text-center placeholder:text-sm placeholder:italic",placeholder:"Mark"},null,512),[[_,u.value]])])),e("button",{type:"button",class:"btn-2",disabled:!(i.value.type==="MCQ"?d.value>0:u.value>0),onClick:A}," Add ",8,Be)]),_:1},8,["question"]))],64)):(a(),n("div",Fe," Question not found! "))])])])):k("",!0),$e])}}};export{Ge as default};
