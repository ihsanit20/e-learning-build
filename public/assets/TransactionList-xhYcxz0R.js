import{r as l,Q as C,I as A,x as n,z as t,U as i,af as S,a9 as b,F as k,G as P,B as p,X as V,C as o,y as r}from"./vue-qTl3phuU.js";import{u as B}from"./transaction-CiLBUbnb.js";import{u as N}from"./index-BxA9mban.js";import"./vendor-PJuFQbji.js";const M={class:"container mx-auto p-4"},X={class:"mb-4 flex md:flex-row flex-col gap-4"},j=["value"],O={class:"flex justify-center gap-4 text-sm"},R={class:"font-semibold"},z={class:"font-semibold"},E={class:"overflow-x-auto"},G={class:"min-w-full bg-white border border-gray-200 rounded-lg text-sm"},Q={key:0},q={class:"py-0.5 px-2 border"},H={class:"py-0.5 px-2 border"},J={class:"py-0.5 px-2 border"},K={class:"py-0.5 px-2 border"},W={class:"py-0.5 px-2 border"},Y={class:"py-0.5 px-2 border text-green-600 font-semibold"},Z={class:"py-0.5 px-2 border"},$={class:"py-0.5 px-2 border"},tt={key:2},et={class:"mt-4 flex justify-between"},st=["disabled"],ot=["disabled"],ut={__name:"TransactionList",setup(at){const a=B(),w=N(),v=l(new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0]),y=l(new Date().toISOString().split("T")[0]),c=l(1),f=l("paid"),_=l(""),m=l(""),g=l(""),h=l(!1),U=C(()=>{var u;return((u=a.transactions.data)==null?void 0:u.length)||0}),F=C(()=>{var u;return((u=a.transactions.data)==null?void 0:u.reduce((e,x)=>e+parseFloat(x.paid_amount),0))||0}),d=async()=>{h.value=!0,await a.fetchTransactions({from:v.value,to:y.value,page:c.value,status:f.value,course_id:_.value,trx_id:m.value,phone:g.value}),h.value=!1};A(async()=>{await d(),await w.fetchCourses()});const I=()=>{a.transactions.next_page_url&&(c.value++,d())},L=()=>{a.transactions.prev_page_url&&(c.value--,d())};return(u,e)=>{var x,D,T;return r(),n("div",M,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold mb-4"},"Transaction List",-1)),t("div",X,[i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),onChange:d,class:"input-1 w-full"},e[6]||(e[6]=[t("option",{value:"all"},"All",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"free"},"Free",-1)]),544),[[S,f.value]]),i(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),class:"input-1 w-full",placeholder:"From Date"},null,512),[[b,v.value]]),i(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>y.value=s),class:"input-1 w-full",placeholder:"To Date"},null,512),[[b,y.value]]),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>_.value=s),onChange:d,class:"input-1 w-full"},[e[7]||(e[7]=t("option",{value:""},"Select Course",-1)),(r(!0),n(k,null,P(p(w).courses,s=>(r(),n("option",{key:s.id,value:s.id},o(s.title),9,j))),128))],544),[[S,_.value]]),i(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),class:"input-1 w-full",placeholder:"Search by TRX ID"},null,512),[[b,m.value]]),i(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>g.value=s),class:"input-1 w-full",placeholder:"Search by Phone"},null,512),[[b,g.value]]),t("button",{onClick:d,class:"btn-2"},"Filter")]),t("div",O,[t("span",R,"Visible Data: "+o(U.value),1),e[8]||(e[8]=V(" || ")),t("span",z,"Total Amount: ৳ "+o(F.value.toFixed(2)),1)]),t("div",E,[t("table",G,[e[11]||(e[11]=t("thead",null,[t("tr",{class:"bg-gray-200 text-left"},[t("th",{class:"py-0.5 px-2 border"},"Date"),t("th",{class:"py-0.5 px-2 border"},"User"),t("th",{class:"py-0.5 px-2 border"},"Phone"),t("th",{class:"py-0.5 px-2 border"},"Course"),t("th",{class:"py-0.5 px-2 border"},"TRX ID"),t("th",{class:"py-0.5 px-2 border"},"Paid Amount"),t("th",{class:"py-0.5 px-2 border"},"Coupon Code"),t("th",{class:"py-0.5 px-2 border"},"Discount")])],-1)),t("tbody",null,[h.value?(r(),n("tr",Q,e[9]||(e[9]=[t("td",{colspan:"8",class:"text-center py-4"},[t("span",{class:"loader"}),V(" Loading transactions... ")],-1)]))):((T=(D=(x=p(a))==null?void 0:x.transactions)==null?void 0:D.data)==null?void 0:T.length)>0?(r(!0),n(k,{key:1},P(p(a).transactions.data,s=>(r(),n("tr",{key:s.id,class:"border-b"},[t("td",q,o(s.date),1),t("td",H,o(s.user.name),1),t("td",J,o(s.user.phone),1),t("td",K,o(s.course.title),1),t("td",W,o(s.trx_id),1),t("td",Y," ৳ "+o(s.paid_amount),1),t("td",Z,o(s.coupon_code),1),t("td",$,"৳ "+o(s.discount_amount),1)]))),128)):(r(),n("tr",tt,e[10]||(e[10]=[t("td",{colspan:"8",class:"text-center py-4"},"No transactions found",-1)])))])])]),t("div",et,[t("button",{onClick:L,disabled:!p(a).transactions.prev_page_url,class:"bg-gray-300 px-4 py-2 rounded disabled:opacity-50"}," Previous ",8,st),t("span",null,"Page "+o(c.value)+" of "+o(p(a).transactions.last_page),1),t("button",{onClick:I,disabled:!p(a).transactions.next_page_url,class:"bg-gray-300 px-4 py-2 rounded disabled:opacity-50"}," Next ",8,ot)])])}}};export{ut as default};
