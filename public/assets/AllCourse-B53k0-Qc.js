import{u as S,a as w,b as q,_ as I,c as $}from"./index-VXD1wsnC.js";import{r as i,I as z,P as E,a2 as F,Q as b,x as l,z as u,H as h,F as d,G as v,B as L,T as N,y as r,C as O,O as A}from"./vue-CcEtAIOs.js";import"./vendor-PJuFQbji.js";const R={class:"my-container space-y-6 py-2"},j={class:"flex flex-wrap justify-center md:gap-4 gap-2"},D=["onClick"],G={key:0,class:"grid md:grid-cols-3 gap-4"},H={key:1,class:"grid md:grid-cols-3 gap-4"},M={key:2},J={__name:"AllCourse",setup(P){const g=S(),y=w(),o=q(),f=i([]),p=i([]),a=i("All Courses"),n=E(),B=N(),m=i(!0);z(async()=>{await g.fetchBundles(),await y.fetchCourses({status:"active"}),await o.fetchCategories(),f.value=g.bundles.sort((t,e)=>e.id-t.id),p.value=y.courses.sort((t,e)=>e.id-t.id),n.query.category&&(a.value=n.query.category),m.value=!1}),F(()=>n.query.category,t=>{a.value=t||"All Courses"});const C=b(()=>{if(a.value==="All Courses")return p.value;const t=o.categories.find(e=>e.name===a.value);return p.value.filter(e=>parseInt(e.category_id)===parseInt(t==null?void 0:t.id))}),_=b(()=>{if(a.value==="All Courses")return f.value;const t=o.categories.find(e=>e.name===a.value);return t?f.value.filter(e=>{var s;return(s=e==null?void 0:e.bundle_courses)==null?void 0:s.some(c=>{var x;return parseInt((x=c==null?void 0:c.course)==null?void 0:x.category_id)===parseInt(t.id)})}):[]}),k=t=>{a.value=t,B.replace({query:{...n.query,category:t}})};return(t,e)=>(r(),l("div",R,[e[2]||(e[2]=u("div",null,[u("h2",{class:"title-xl text-center"},"Our Courses"),u("p",{class:"text-center"},"Explore our courses at a glance")],-1)),u("div",null,[u("div",j,[u("button",{onClick:e[0]||(e[0]=s=>k("All Courses")),class:h({"btn-2":a.value==="All Courses","btn-3":a.value!=="All Courses"})}," All Courses ",2),(r(!0),l(d,null,v(L(o).categories,s=>(r(),l("button",{key:s.id,onClick:c=>k(s.name),class:h({"btn-2":a.value===s.name,"btn-3":a.value!==s.name})},O(s.name),11,D))),128))])]),m.value?(r(),l("div",G,[(r(),l(d,null,v(3,s=>u("div",{class:"card-bg p-4 animate-pulse items-center",key:s},e[1]||(e[1]=[u("i",{class:"fas fa-image text-gray-300 text-[250px]"},null,-1),u("div",{class:"h-8 w-28 bg-gray-200 rounded-full mt-4"},null,-1)]))),64))])):C.value.length+_.value.length>0?(r(),l("div",H,[(r(!0),l(d,null,v(_.value,s=>(r(),A(I,{key:s.id,bundle:s},null,8,["bundle"]))),128)),(r(!0),l(d,null,v(C.value,s=>(r(),A($,{key:s.id,course:s},null,8,["course"]))),128))])):(r(),l("p",M,"No courses available"))]))}};export{J as default};
