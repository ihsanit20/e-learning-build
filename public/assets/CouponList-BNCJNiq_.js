import{u as V}from"./coupon-D-fgOO1s.js";import{_ as S,e as c,o as r,j as h,a as e,s as E,v as y,x as $,I as B,z as U,A,h as N,g as F,D as I,t as x,b as w,l as q,F as j,k as L,c as g,y as D}from"./index-B1GkNHwC.js";import{f as T}from"./format-cwXK75ha.js";const k=o=>(U("data-v-2a0a3f05"),o=o(),A(),o),P={class:"modal"},R={class:"modal-content space-y-2"},G=k(()=>e("h2",null,"Add Coupon",-1)),H=k(()=>e("option",{value:"percentage"},"Percentage",-1)),J=k(()=>e("option",{value:"fixed"},"Fixed Amount",-1)),K=[H,J],O={class:"flex gap-4"},Q=k(()=>e("button",{type:"submit",class:"btn-2"},"Add",-1)),W={__name:"AddCouponModal",emits:["close"],setup(o,{emit:f}){const i=f,_=V(),v=c(""),n=c("percentage"),u=c(0),p=c(""),m=c(""),C=async()=>{await _.createCoupon({code:v.value,discount_type:n.value,discount_value:u.value,valid_from:p.value,valid_until:m.value}),i("close")};return(M,s)=>(r(),h("div",P,[e("div",R,[G,e("form",{onSubmit:E(C,["prevent"]),class:"space-y-2"},[y(e("input",{class:"input-1","onUpdate:modelValue":s[0]||(s[0]=a=>v.value=a),placeholder:"Coupon code",required:""},null,512),[[$,v.value]]),y(e("select",{class:"input-1","onUpdate:modelValue":s[1]||(s[1]=a=>n.value=a)},K,512),[[B,n.value]]),y(e("input",{class:"input-1","onUpdate:modelValue":s[2]||(s[2]=a=>u.value=a),placeholder:"Discount value",type:"number",required:""},null,512),[[$,u.value]]),y(e("input",{class:"input-1","onUpdate:modelValue":s[3]||(s[3]=a=>p.value=a),placeholder:"Valid from",type:"date",required:""},null,512),[[$,p.value]]),y(e("input",{class:"input-1","onUpdate:modelValue":s[4]||(s[4]=a=>m.value=a),placeholder:"Valid until",type:"date",required:""},null,512),[[$,m.value]]),e("div",O,[Q,e("button",{type:"button",onClick:s[5]||(s[5]=a=>i("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},X=S(W,[["__scopeId","data-v-2a0a3f05"]]),b=o=>(U("data-v-2b02b7bd"),o=o(),A(),o),Y={class:"modal"},Z={class:"max-w-2xl z-50 card-bg p-4 md:p-8 space-y-2"},ee=b(()=>e("h2",{class:"title-lg"},"Edit Coupon",-1)),te=b(()=>e("p",null,"Code",-1)),oe=b(()=>e("p",null,"Discount type",-1)),se={class:"flex items-center space-x-4"},le={class:"flex items-center"},ne=b(()=>e("span",{class:"ml-2"},"Percentage",-1)),ae={class:"flex items-center"},de=b(()=>e("span",{class:"ml-2"},"Fixed Amount",-1)),ue=b(()=>e("p",null,"Discount value",-1)),ce={class:"relative"},ie={class:"absolute top-2 right-3"},pe=b(()=>e("p",null,"Valid from",-1)),re=b(()=>e("p",null,"Valid to",-1)),_e={class:"flex justify-center gap-4"},ve=b(()=>e("button",{type:"submit",class:"btn-2"},"Save",-1)),me={__name:"EditCouponModal",props:["coupon"],emits:["close"],setup(o,{emit:f}){const i=o,_=f,v=V(),n=c(""),u=c("percentage"),p=c(0),m=c(""),C=c(""),M=l=>T(new Date(l),"yyyy-MM-dd"),s=l=>{n.value=l.code,u.value=l.discount_type,p.value=l.discount_value,m.value=M(l.valid_from),C.value=M(l.valid_until)};N(i.coupon,l=>{s(l)}),F(()=>{i.coupon&&s(i.coupon)});const a=async()=>{await v.updateCoupon(i.coupon.id,{code:n.value,discount_type:u.value,discount_value:p.value,valid_from:m.value,valid_until:C.value}),_("close")};return(l,d)=>(r(),h("div",Y,[e("div",Z,[ee,e("form",{onSubmit:E(a,["prevent"]),class:"space-y-2"},[e("div",null,[te,y(e("input",{class:"input-1","onUpdate:modelValue":d[0]||(d[0]=t=>n.value=t),placeholder:"Coupon code",required:""},null,512),[[$,n.value]])]),e("div",null,[oe,e("div",se,[e("label",le,[y(e("input",{type:"radio","onUpdate:modelValue":d[1]||(d[1]=t=>u.value=t),value:"percentage",class:"form-radio"},null,512),[[I,u.value]]),ne]),e("label",ae,[y(e("input",{type:"radio","onUpdate:modelValue":d[2]||(d[2]=t=>u.value=t),value:"fixed",class:"form-radio"},null,512),[[I,u.value]]),de])])]),e("div",null,[ue,e("div",ce,[y(e("input",{class:"input-1","onUpdate:modelValue":d[3]||(d[3]=t=>p.value=t),placeholder:"Discount value",type:"number",required:""},null,512),[[$,p.value]]),e("span",ie,x(u.value==="percentage"?"%":"Tk"),1)])]),e("div",null,[pe,y(e("input",{class:"input-1","onUpdate:modelValue":d[4]||(d[4]=t=>m.value=t),placeholder:"Valid from",type:"date",required:""},null,512),[[$,m.value]])]),e("div",null,[re,y(e("input",{class:"input-1","onUpdate:modelValue":d[5]||(d[5]=t=>C.value=t),placeholder:"Valid until",type:"date",required:""},null,512),[[$,C.value]])]),e("div",_e,[ve,e("button",{type:"button",onClick:d[6]||(d[6]=t=>_("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},ye=S(me,[["__scopeId","data-v-2b02b7bd"]]),he=o=>(U("data-v-4bfe42e5"),o=o(),A(),o),fe={class:"modal"},be={class:"modal-content space-y-2"},Ce=he(()=>e("h2",null,"Delete Coupon",-1)),$e={class:"flex gap-4"},xe={__name:"DeleteCouponModal",props:["coupon"],emits:["close"],setup(o,{emit:f}){const i=o,_=f,v=V(),n=async()=>{await v.deleteCoupon(i.coupon.id),_("close")};return(u,p)=>(r(),h("div",fe,[e("div",be,[Ce,e("p",null,[w("Are you sure you want to delete the coupon "),e("strong",null,x(o.coupon.code),1),w("?")]),e("div",$e,[e("button",{type:"button",class:"btn-2",onClick:n},"Delete"),e("button",{type:"button",onClick:p[0]||(p[0]=m=>_("close")),class:"btn-contrast"},"Cancel")])])]))}},Me=S(xe,[["__scopeId","data-v-4bfe42e5"]]),Ve={class:"my-container space-y-2"},ke=e("h1",{class:"title-lg"},"Coupons",-1),ge={class:"card-bg p-4"},De={key:0,class:"table-auto w-full"},we=e("thead",null,[e("tr",{class:"text-left"},[e("th",{class:"px-4 py-2"},"Code"),e("th",{class:"px-4 py-2"},"Discount Type"),e("th",{class:"px-4 py-2"},"Discount Value"),e("th",{class:"px-4 py-2"},"Valid From"),e("th",{class:"px-4 py-2"},"Valid Until"),e("th",{class:"px-4 py-2"},"Actions")])],-1),Se={class:"px-4 py-2"},Ue={class:"px-4 py-2"},Ae={class:"px-4 py-2"},Ie={key:0},qe={key:1},Ee={class:"px-4 py-2"},Fe={class:"px-4 py-2"},Te={class:"px-4 py-2"},ze={class:"flex gap-2"},Be=["onClick"],Ne=["onClick"],je={key:1,class:"text-red-500"},Ge={__name:"CouponList",setup(o){const f=V(),i=c(!1),_=c(!1),v=c(!1),n=c(null),u=()=>i.value=!0,p=()=>i.value=!1,m=l=>{n.value=l,_.value=!0},C=()=>_.value=!1,M=l=>{n.value=l,v.value=!0},s=()=>v.value=!1,a=l=>T(new Date(l),"dd-MMM-yyyy");return F(()=>{f.fetchCoupons()}),(l,d)=>(r(),h("div",Ve,[e("div",{class:"flex justify-between"},[ke,e("button",{class:"btn-2",onClick:u},"Add Coupon")]),e("div",ge,[q(f).coupons.length?(r(),h("table",De,[we,e("tbody",null,[(r(!0),h(j,null,L(q(f).coupons,t=>(r(),h("tr",{key:t.id,class:"border-t"},[e("td",Se,x(t.code),1),e("td",Ue,x(t.discount_type),1),e("td",Ae,[w(x(t.discount_value)+" ",1),t.discount_type==="percentage"?(r(),h("span",Ie,"%")):(r(),h("span",qe,"Tk"))]),e("td",Ee,x(a(t.valid_from)),1),e("td",Fe,x(a(t.valid_until)),1),e("td",Te,[e("div",ze,[e("button",{onClick:z=>m(t),class:"btn-1"},"Edit",8,Be),e("button",{onClick:z=>M(t),class:"btn-contrast"},"Delete",8,Ne)])])]))),128))])])):(r(),h("p",je,"No coupons found"))]),i.value?(r(),g(X,{key:0,class:"z-40",onClose:p})):D("",!0),_.value?(r(),g(ye,{key:1,class:"z-40",coupon:n.value,onClose:C},null,8,["coupon"])):D("",!0),v.value?(r(),g(Me,{key:2,class:"z-40",coupon:n.value,onClose:s},null,8,["coupon"])):D("",!0)]))}};export{Ge as default};
