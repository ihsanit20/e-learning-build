import{r as u,Q as i,I as N,x as v,z as e,A as w,H as d,C as r,M as U,U as y,a9 as x,F,G as P,T as D,y as m,X as C}from"./vue-CAqJJQzZ.js";import{d as z,u as E}from"./index-CCZtyDAV.js";/* empty css                                                   */import"./vendor-PJuFQbji.js";const H={class:"my-container"},K={class:"card-bg p-4 md:p-8"},j={class:"flex flex-wrap justify-between mb-4"},q={class:"flex items-center flex-wrap gap-2 text-sm"},G={class:"border p-4 rounded-md grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},L={class:"border p-4 rounded-md grid grid-cols-2 gap-2 items-center"},Q={class:"flex items-start gap-2"},R=["onClick"],X={class:"space-x-1"},$={class:"shrink-0 grow-0"},J={class:"block"},O=["onUpdate:modelValue"],W=["disabled"],Y={key:0,class:"message"},oe={__name:"BundleForm",setup(Z){const k=z(),_=E(),I=D(),c=u(""),T=u(""),l=u([]),b=u(""),p=u(""),V=async()=>{const t={title:c.value,description:T.value,bundle_courses:l.value};try{await k.createBundle(t),b.value="The bundle is successfully added",setTimeout(()=>I.push("/management/bundle-list"),2e3)}catch(s){console.error("Failed to add bundle:",s)}},M=i(()=>_.courses.filter(t=>l.value.some(s=>parseInt(s.course_id)===parseInt(t.id))));N(async()=>{_.fetchCourses({price:"paid",status:"active",publish:"published"})});function S(){var a;const t=parseInt(p.value);if(!t)return;const s=l.value.some(n=>parseInt(n.course_id)===t),o=(a=_.courses)==null?void 0:a.some(n=>parseInt(n.id)===t);!s&&o&&l.value.push({course_id:t,course_price:""}),p.value=""}function A(t){confirm("Are you want to remove this")&&l.value.splice(t,1)}const g=i(()=>!!c.value),f=i(()=>l.value.length>=2),h=i(()=>l.value.length>=2&&l.value.every(t=>t.course_price!==""&&Number(t.course_price)>=0)),B=i(()=>g.value&&f.value&&h.value);return(t,s)=>(m(),v("div",H,[e("div",K,[e("div",j,[s[3]||(s[3]=e("h1",{class:"title-lg"},"Add New Bundle",-1)),e("div",q,[e("div",{class:d(g.value?"text-green-600":"text-gray-600")},r(g.value?"✅":"-")+" Bundle Title ",3),e("div",{class:d(f.value?"text-green-600":"text-gray-600")},r(f.value?"✅":"-")+" Minimum 2 courses ",3),e("div",{class:d(h.value?"text-green-600":"text-gray-600")},r(h.value?"✅":"-")+" Bundle Price ",3)])]),e("form",{onSubmit:U(V,["prevent"]),class:"space-y-4"},[y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),placeholder:"Bundle Title",class:"input-1 w-full"},null,512),[[x,c.value]]),w("",!0),e("div",G,[e("div",L,[y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>p.value=o),class:"input-1 text-center pb-1.5",placeholder:"Course ID"},null,512),[[x,p.value]]),e("button",{onClick:S,type:"button",class:"btn-1 py-2"},"+ Add")]),(m(!0),v(F,null,P(M.value,(o,a)=>(m(),v("div",{key:o.id,class:d(["border p-4 rounded-md space-y-2 text-center relative",{"col-start-1":!a}])},[e("div",Q,[e("i",{onClick:n=>A(a),class:"shrink-0 grow-0 fa fa-trash text-red-600 cursor-pointer"},null,8,R),e("div",X,[e("b",$,r(o.id),1),e("i",null,r(o.title),1)])]),e("div",null,"Course Price: "+r(o.price)+" TK",1),e("label",J,[s[4]||(s[4]=C(" Bundle Price ")),y(e("input",{type:"number","onUpdate:modelValue":n=>l.value[a].course_price=n,class:"input-1 max-w-24 py-1",min:"0",required:""},null,8,O),[[x,l.value[a].course_price]]),s[5]||(s[5]=C(" TK "))])],2))),128))]),e("button",{type:"submit",class:d(["btn-2",{"opacity-50 cursor-not-allowed":!B.value}]),disabled:!B.value}," Add Bundle ",10,W)],32),b.value?(m(),v("p",Y,r(b.value),1)):w("",!0)])]))}};export{oe as default};
