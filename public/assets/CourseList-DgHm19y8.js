import{u as k,c as V,r as p,d as a,e as c,f as e,t as d,z as x,q as C,C as T,s as D,x as O,o as I,y as L,A as g,B as w,F as $,g as M,j as N}from"./index-CT1U0GKd.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S=t=>(D("data-v-c0ad9860"),t=t(),O(),t),F={key:0,class:"modal"},z={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},A={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},E=["src"],H=S(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),P={class:"flex w-full text-center gap-4"},R={class:"text-center text-green-600"},U={class:"text-center text-red-600"},q={class:"title-md"},X={class:"md:flex justify-between"},Y=S(()=>e("b",null,"Course Description:",-1)),G=["innerHTML"],J={key:0},K={class:"font-bold text-sky-600"},Q={class:""},W={class:"title-sm"},Z={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(t,{emit:i}){const n=t,l=k(),v=i,o=V(()=>l.courses.find(s=>s.id===n.course.id)),m=()=>{v("close")},u=p(null),b=p(""),f=p(""),r=s=>{const h=s.target.files[0];h&&h.size>2*1024*1024?(f.value="File should be less than 2MB",u.value=null,document.getElementById("file-input").value=""):(u.value=h,f.value="")},_=async()=>{if(!u.value)return;const s=new FormData;s.append("thumbnail",u.value);try{await l.uploadThumbnail(n.course.id,s),b.value="Thumbnail uploaded successfully!",u.value=null,document.getElementById("file-input").value=""}catch{f.value="An error occurred while uploading the thumbnail"}},y=s=>T(new Date(s),"dd-MMM-yyyy");return(s,h)=>t.isOpen?(a(),c("div",F,[e("div",z,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:m},"X")]),e("div",A,[e("img",{class:"aspect-video object-cover rounded-lg",src:o.value.thumbnail,alt:"Thumbnail"},null,8,E),H,e("div",P,[e("input",{id:"file-input",type:"file",onChange:r,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:_},"Upload")]),e("p",R,d(b.value),1),e("p",U,d(f.value),1),e("h2",q,d(o.value.title),1),e("div",X,[e("p",null,[x(" Course Category: "),e("b",null,d(o.value.course_category),1)]),e("p",null,[x(" Course Type: "),e("b",null,d(o.value.course_type),1)])]),e("div",null,[Y,e("div",{innerHTML:o.value.description,class:""},null,8,G)]),o.value.course_type==="Live Course"?(a(),c("p",J,[x(" Start Date: "),e("span",K,d(y(o.value.start_date)),1)])):C("",!0),e("p",Q,[x(" Price: ৳ "),e("span",W,d(o.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:m},"Close")])])])):C("",!0)}},ee=j(Z,[["__scopeId","data-v-c0ad9860"]]),B=t=>(D("data-v-47d6054d"),t=t(),O(),t),se={key:0,class:"modal"},te=B(()=>e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),oe=B(()=>e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),le={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(t,{emit:i}){const n=t,l=i,v=k(),o=async()=>{n.course&&(await v.deleteCourse(n.course.id),l("confirmDelete"),l("close"))},m=()=>{l("close")};return(u,b)=>t.isOpen?(a(),c("div",se,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[te,oe,e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:o},"Yes"),e("button",{class:"btn-2",onClick:m},"No")])])])):C("",!0)}},ae=j(le,[["__scopeId","data-v-47d6054d"]]),ce={class:"my-container space-y-2 relative"},ne={class:"flex justify-between items-center"},de=e("h1",{class:"title-lg text-center"},"Courses",-1),ie={key:0,class:"space-y-2"},ue=N('<div class="md:col-span-1 rounded md:px-2"><div class="aspect-video bg-gray-200"></div></div><div class="md:col-span-3 md:px-2"><div class="h-6 bg-gray-200 rounded-full mb-2"></div><div class="h-4 bg-gray-200 rounded-full"></div></div><div class="md:col-span-1 flex items-center justify-center px-2"><div class="h-6 bg-gray-200 rounded-full w-20"></div></div><div class="md:col-span-3 flex justify-between items-center gap-2 md:px-2"><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div><div class="h-10 bg-gray-200 rounded-full w-20"></div></div>',4),re=[ue],_e={key:1},pe={key:0,class:"text-center"},ve=e("p",null,"No courses available.",-1),me=[ve],he={key:1,class:"space-y-2"},fe={class:"md:col-span-1 rounded md:px-2"},be=["src"],ye={class:"md:col-span-4 md:px-2 space-y-2"},ge={class:"title-md"},xe={class:"title-sm"},we={class:"flex justify-between items-center gap-2 md:px-2"},Ce=["onClick"],ke=e("i",{class:"fas fa-eye"},null,-1),$e=e("p",{class:"hidden md:flex"},"View",-1),Me=[ke,$e],De=e("i",{class:"far fa-edit"},null,-1),Oe=e("p",{class:"hidden md:flex"},"Edit",-1),je=["onClick"],Se=e("i",{class:"fas fa-trash-alt"},null,-1),Be=[Se],Ve=e("i",{class:"fas fa-plus"},null,-1),Te=e("p",null,"Module",-1),Ne={__name:"CourseList",setup(t){const i=k(),n=p([]),l=p(null),v=p(!1),o=p(!1),m=p(!0);I(async()=>{await i.fetchCourses(),n.value=i.courses.sort((r,_)=>_.id-r.id),m.value=!1});const u=r=>{l.value=r,v.value=!0},b=r=>{l.value=r,o.value=!0},f=async()=>{await i.deleteCourse(l.value.id),n.value=i.courses};return(r,_)=>{const y=L("RouterLink");return a(),c("div",ce,[e("div",ne,[de,g(y,{class:"btn-2",to:"/new"},{default:w(()=>[x("Add New")]),_:1})]),m.value?(a(),c("div",ie,[(a(),c($,null,M(3,s=>e("div",{key:s,class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2 animate-pulse"},re)),64))])):(a(),c("div",_e,[n.value.length===0?(a(),c("div",pe,me)):(a(),c("ul",he,[(a(!0),c($,null,M(n.value,s=>(a(),c("li",{class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-5 md:divide-x-2",key:s.id},[e("div",fe,[e("img",{class:"aspect-video object-cover",src:s.thumbnail,alt:"Thumbnail"},null,8,be)]),e("div",ye,[e("h2",ge,d(s.title),1),e("p",xe,"Price: ৳"+d(s.price),1),e("div",we,[e("button",{class:"btn-1 pb-2",onClick:h=>u(s)},Me,8,Ce),g(y,{to:"/courses/"+s.id+"/edit",class:"btn-1 pb-2"},{default:w(()=>[De,Oe]),_:2},1032,["to"]),e("button",{class:"btn-contrast pb-2",onClick:h=>b(s)},Be,8,je),g(y,{class:"btn-1",to:"/courses/"+s.id+"/modules"},{default:w(()=>[Ve,Te]),_:2},1032,["to"])])])]))),128))]))])),g(ee,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:v.value,onClose:_[0]||(_[0]=s=>v.value=!1)},null,8,["course","isOpen"]),g(ae,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:o.value,onClose:_[1]||(_[1]=s=>o.value=!1),onConfirmDelete:f},null,8,["course","isOpen"])])}}};export{Ne as default};
