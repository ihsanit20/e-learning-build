import{E as P,G as C,e as l,g as L,i as v,o as i,j as d,a as e,v as D,x as M,F as N,k as S,t as n,y as B}from"./index-B1GkNHwC.js";import{f as V}from"./format-cwXK75ha.js";const j=P("transaction",{state:()=>({transactions:[],error:null}),actions:{async fetchTransactions(){var p,r;try{const a=await C.get("/transactions");this.transactions=(a==null?void 0:a.data)??[]}catch(a){this.error=((r=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:r.message)??"An error occurred"}}}}),E={class:"max-w-4xl mx-auto py-4"},F={class:"flex items-center py-4"},A=e("h1",{class:"flex-1 text-2xl font-bold"},"Transaction List",-1),G={class:"overflow-x-auto card-bg"},U={class:"min-w-full divide-y divide-gray-400"},q=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," SL "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Course Title "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Purchased by "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Phone "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Purchased on ")])],-1),z={class:"bg-white divide-y divide-gray-200"},H={class:"px-6 py-4 whitespace-nowrap"},I={class:"px-6 py-4 whitespace-nowrap"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"px-6 py-4 whitespace-nowrap"},Q={class:"flex justify-between mt-4"},R=["disabled"],W=["disabled"],X={key:0,class:"text-red-500 mt-4"},u=25,$={__name:"TransactionList",setup(p){const r=j(),a=l([]),h=l(""),x=l(null),o=l(1);L(async()=>{try{await r.fetchTransactions(),a.value=r.transactions}catch(c){x.value=c}});const g=c=>{const t=new Date(c);return V(t,"dd-MMM-yyyy")},f=v(()=>[...a.value].sort((t,s)=>new Date(s.created_at)-new Date(t.created_at)).filter(t=>{const s=t.course.title.toLowerCase(),y=t.user.name.toLowerCase(),k=t.user.phone.toLowerCase(),_=h.value.toLowerCase();return s.includes(_)||y.includes(_)||k.includes(_)})),m=v(()=>{const c=(o.value-1)*u,t=c+u;return f.value.slice(c,t)}),w=v(()=>Math.ceil(f.value.length/u)),b=()=>{o.value<w.value&&o.value++},T=()=>{o.value>1&&o.value--};return(c,t)=>(i(),d("div",E,[e("div",F,[A,D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),type:"text",placeholder:"Title, Name or Phone",class:"input-1 w-80"},null,512),[[M,h.value]])]),e("div",G,[e("table",U,[q,e("tbody",z,[(i(!0),d(N,null,S(m.value,(s,y)=>(i(),d("tr",{key:s.id},[e("td",H,n((o.value-1)*u+y+1),1),e("td",I,n(s.course.title),1),e("td",J,n(s.user.name),1),e("td",K,n(s.user.phone),1),e("td",O,n(g(s.created_at)),1)]))),128))])])]),e("div",Q,[e("button",{onClick:T,disabled:o.value===1,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50"}," Previous ",8,R),e("button",{onClick:b,disabled:o.value===w.value,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50"}," Next ",8,W)]),x.value?(i(),d("p",X,n(x.value),1)):B("",!0)]))}};export{$ as default};
