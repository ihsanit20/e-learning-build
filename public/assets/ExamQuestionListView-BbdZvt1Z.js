import{r as f,e as o,f as i,g as e,z as w,A as M,F as V,h as N,B,s as $,I as F,J as T,b as j,u as U,o as W,d as Q,t as h,i as v,q as I,p as q,j as S}from"./index-4Z-6rGXL.js";import{_ as A}from"./QuestionCard-feO2oshX.js";import{u as E}from"./exam-BXBVenA_.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O=p=>(F("data-v-bf768d4c"),p=p(),T(),p),R={class:"modal"},z={class:"modal-content"},J=O(()=>e("h3",null,"Search and Add Questions",-1)),G={class:"modal-body md:min-h-[480px] space-y-4"},H={class:"flex justify-between items-center gap-6"},K={key:0,class:"text-center"},P={key:1},X={key:0},Y=["onClick"],Z={key:1},ee={__name:"AddExamQuestionModal",setup(p){const y=E(),t=f(""),_=f([]),c=f(!1),u=()=>{y.isVisibleAddQuestionModal=!1},g=async()=>{c.value=!0,setTimeout(()=>{_.value=y.exam.questions,c.value=!1},1e3)},x=b=>{console.log("Selected question:",b),u()};return(b,k)=>(o(),i("div",R,[e("div",z,[e("div",{class:"modal-header"},[J,e("button",{onClick:u},"Close")]),e("div",G,[e("div",H,[w(e("input",{"onUpdate:modelValue":k[0]||(k[0]=m=>t.value=m),placeholder:"Question Id",class:"input-1"},null,512),[[M,t.value]]),e("button",{onClick:g,type:"button",class:"btn-1 shrink-0 grow-0"}," Find Question ")]),c.value?(o(),i("div",K,"Searching...")):(o(),i("div",P,[_.value.length?(o(),i("ul",X,[(o(!0),i(V,null,N(_.value,m=>(o(),i("li",{key:m.id},[B(A,{question:m,"show-explanation":!1},{action:$(()=>[e("button",{type:"button",class:"btn-3 py-0.5 px-2 text-xs",onClick:C=>x(m)}," + Add ",8,Y)]),_:2},1032,["question"])]))),128))])):(o(),i("p",Z,"No questions found."))]))])])]))}},te=L(ee,[["__scopeId","data-v-bf768d4c"]]),se={class:"my-container"},oe={class:"card-bg p-4"},ne={class:"flex justify-between items-center flex-wrap gap-4"},ae=e("span",{class:"text-gray-500 pr-1"},"Name:",-1),ie={class:"text-lg"},le={class:"text-xl"},ce={class:"text-xl"},ue={class:"text-xl"},re={key:0,class:"flex items-center gap-2 ml-auto"},de={key:0,class:"grid md:grid-cols-2 gap-4 mt-4"},_e={class:"bg-red-600/10 text-red-600 px-2 pt-[5px] rounded-md text-xs font-semibold"},me=["onClick"],pe=e("i",{class:"fad fa-trash"},null,-1),xe=[pe],he={key:1,class:"text-red-500"},ve=e("br",null,null,-1),Qe={__name:"ExamQuestionListView",setup(p){const y=j(),t=E(),_=U(),c=f(""),u=f(""),{courseId:g,examId:x}=y.params;W(async()=>{t.fetchSingleExam(x),await _.fetchCourse(g)});const b=async()=>{if(!c.value||!u.value)return alert("Mark & Question ID must!");const l=await t.addExamQuestion(x,c.value,{category_id:_.course.category_id,mark:u.value});l.exam_question&&t.exam.exam_questions.push(l.exam_question),c.value="",u.value=""},k=async l=>{if(!confirm(`Do you want to remove this question [ID: ${l}] ?`))return;const s=await t.removeExamQuestion(x,l);s.question_id&&(t.exam.exam_questions=t.exam.exam_questions.filter(n=>parseInt(n.question_id)!==parseInt(s.question_id)))},m=Q(()=>{var s,n;return(((n=(s=t.exam)==null?void 0:s.exam_questions)==null?void 0:n.filter(a=>{var r;return((r=a==null?void 0:a.question)==null?void 0:r.type)==="MCQ"}))??[]).length}),C=Q(()=>{var s,n;return(((n=(s=t.exam)==null?void 0:s.exam_questions)==null?void 0:n.filter(a=>{var r;return((r=a==null?void 0:a.question)==null?void 0:r.type)==="Written"}))??[]).length}),D=Q(()=>{var s;let l=0;return(s=t.exam)!=null&&s.exam_questions&&(l=t.exam.exam_questions.reduce((n,a)=>n+parseFloat(a.mark||0),0)),l});return(l,s)=>{var n,a,r;return o(),i("div",se,[e("div",oe,[e("div",ne,[e("div",null,[e("div",null,[ae,e("b",ie,h(v(t).exam.title),1)]),e("div",null,[e("b",le,h(m.value),1),I(" MCQ & "),e("b",ce,h(C.value),1),I(" Written | Total Mark: "),e("b",ue,h(D.value),1)])]),(n=v(_).course)!=null&&n.category_id?(o(),i("div",re,[w(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>u.value=d),type:"number",class:"input-1 px-0 py-1.5 w-16 text-center placeholder:text-sm placeholder:italic",placeholder:"Mark"},null,512),[[M,u.value]]),w(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>c.value=d),type:"number",class:"input-1 px-0 py-1.5 w-24 text-center placeholder:text-sm placeholder:italic",placeholder:"Question ID"},null,512),[[M,c.value]]),e("button",{type:"button",class:"btn-3",onClick:b},"Add")])):q("",!0),q("",!0)])]),(r=(a=v(t).exam)==null?void 0:a.exam_questions)!=null&&r.length?(o(),i("div",de,[(o(!0),i(V,null,N(v(t).exam.exam_questions,d=>(o(),S(A,{key:d.id,question:d.question},{mark:$(()=>[e("div",_e," Mark: "+h(d.mark),1)]),action:$(()=>[e("button",{type:"button",onClick:fe=>k(d.question_id),class:"text-red-500"},xe,8,me)]),_:2},1032,["question"]))),128))])):(o(),i("p",he,"No questions found")),v(t).isVisibleAddQuestionModal?(o(),S(te,{key:2})):q("",!0),ve])}}};export{Qe as default};
