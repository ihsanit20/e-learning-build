import{r as c,e as n,f as o,g as e,z as y,A as x,y as S,t as g,q as Q,Z as O,w as R,C as h,v as w,o as F,m as N,i as V,F as B,h as P,j as I,s as E,x as Y}from"./index-CWc9enRv.js";import{u as $}from"./quiz-DZInfcOJ.js";const Z={__name:"AddQuiz",props:{quizType:{type:String,required:!0}},emits:["submit"],setup(_,{emit:p}){const u=_,s=c({title:"",duration:"",opening_time:"",result_publish_time:""}),z=p,m=()=>{const d={title:s.value.title,type:u.quizType,duration:s.value.duration,opening_time:s.value.opening_time,result_publish_time:s.value.result_publish_time};z("submit",d),s.value={title:"",duration:"",opening_time:"",result_publish_time:""}};return(d,t)=>(n(),o("div",null,[e("form",{onSubmit:S(m,["prevent"]),class:"space-y-4"},[e("div",null,[t[4]||(t[4]=e("label",null,"Quiz Title:",-1)),y(e("input",{class:"input-1",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.title=a),placeholder:"Title",required:""},null,512),[[x,s.value.title]])]),e("div",null,[t[5]||(t[5]=e("label",null,"Duration (minutes):",-1)),y(e("input",{class:"input-1",type:"number","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.duration=a),placeholder:"Duration",required:""},null,512),[[x,s.value.duration]])]),e("div",null,[t[6]||(t[6]=e("label",null,"Opening Time:",-1)),y(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.opening_time=a),placeholder:"Opening Date & Time",required:""},null,512),[[x,s.value.opening_time]])]),e("div",null,[t[7]||(t[7]=e("label",null,"Result Publish Time:",-1)),y(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":t[3]||(t[3]=a=>s.value.result_publish_time=a),placeholder:"Opening Date & Time",required:""},null,512),[[x,s.value.result_publish_time]])]),t[8]||(t[8]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-2"},"Add Quiz")],-1))],32)]))}},G={class:"flex flex-col md:flex-row items-center gap-x-2"},H={key:0,class:"w-full md:w-60 text-left md:text-right"},q={__name:"FormLabel",props:["label"],setup(_){return(p,u)=>(n(),o("label",G,[_.label?(n(),o("span",H,g(_.label),1)):Q("",!0),O(p.$slots,"default")]))}},J={__name:"EditQuizForm",props:{quiz:Object},emits:["close"],setup(_,{emit:p}){const u=_,s=p,z=$(),m=c(u.quiz.title),d=c(u.quiz.duration),t=c(u.quiz.opening_time),a=c(u.quiz.result_publish_time),k=async()=>{const f={...u.quiz,title:m.value,duration:d.value,opening_time:t.value,result_publish_time:a.value};try{await z.updateQuiz(u.quiz.id,f),s("close")}catch(i){console.error("Error updating quiz:",i)}};return R(()=>u.quiz,f=>{m.value=f.title,d.value=f.duration,t.value=f.opening_time},{immediate:!0}),(f,i)=>(n(),o("div",null,[e("form",{onSubmit:S(k,["prevent"]),class:"space-y-4"},[h(q,{label:"Quiz Title"},{default:w(()=>[y(e("input",{class:"input-1",type:"text","onUpdate:modelValue":i[0]||(i[0]=b=>m.value=b),placeholder:"Quiz Title",required:""},null,512),[[x,m.value]])]),_:1}),h(q,{label:"Duration (minutes)"},{default:w(()=>[y(e("input",{class:"input-1",type:"number","onUpdate:modelValue":i[1]||(i[1]=b=>d.value=b),placeholder:"Duration (minutes)",required:""},null,512),[[x,d.value]])]),_:1}),h(q,{label:"Opening Time"},{default:w(()=>[y(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":i[2]||(i[2]=b=>t.value=b),placeholder:"Opening Date & Time",required:""},null,512),[[x,t.value]])]),_:1}),h(q,{label:"Result Publish"},{default:w(()=>[y(e("input",{class:"input-1",type:"datetime-local","onUpdate:modelValue":i[3]||(i[3]=b=>a.value=b),placeholder:"Result Publish Time",required:""},null,512),[[x,a.value]])]),_:1}),i[4]||(i[4]=e("hr",{class:"my-3"},null,-1)),i[5]||(i[5]=e("div",{class:"flex justify-center gap-4"},[e("button",{type:"submit",class:"btn-1"},"Save Changes")],-1))],32)]))}},K={class:"my-container space-y-4"},W={class:"flex gap-4 items-center justify-center mt-2"},X={key:0},ee={class:"space-y-2 divide-y"},te={class:"grow shrink flex items-center gap-4"},le={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},se={key:0,class:"fal fa-ballot-check text-2xl"},ie={key:1,class:"fal fa-question text-3xl"},ne={class:"title-sm"},ue={class:"flex items-center gap-2 text-sm text-gray-400"},oe={class:"grow-0 flex flex-wrap justify-end max-w-[110px] md:max-w-fit gap-2"},ae=["onClick"],de=["onClick"],re={key:1,class:"flex justify-center"},pe={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ce={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},me={class:"mt-4"},ve={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},fe={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},be={class:"flex justify-end"},ye={class:"mr-auto font-bold"},xe={class:"mt-4"},_e={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ze={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg"},ge={class:"mt-4 text-center"},we={__name:"QuizListView",setup(_){const p=$(),u=c(!1),s=c(!1),z=c(!1),m=c(null),d=c(null),t=c(""),a=v=>{const l=new Date(v);return Y(l,"hh:mm a, dd-MMM-yyyy")},k=v=>{t.value=v,u.value=!0},f=()=>{t.value="",u.value=!1},i=async v=>{try{await p.addQuiz(v),f()}catch(l){console.error("Error adding quiz:",l)}},b=v=>{m.value=v,s.value=!0},C=()=>{s.value=!1},A=v=>{d.value=v,z.value=!0},T=()=>{z.value=!1},L=async()=>{d.value&&(await p.deleteQuiz(d.value.id),T())};return F(()=>{p.fetchQuizzes()}),(v,l)=>{var M,j;const D=N("RouterLink");return n(),o("div",K,[l[10]||(l[10]=e("h1",{class:"title-lg text-center"},"Open Quiz / Quiz List",-1)),e("div",W,[e("button",{class:"btn-2",onClick:l[0]||(l[0]=r=>k("MCQ"))},"Add MCQ Quiz"),Q("",!0)]),l[11]||(l[11]=e("hr",{class:"my-4"},null,-1)),((M=V(p).quizzes)==null?void 0:M.length)>0?(n(),o("div",X,[e("div",ee,[(n(!0),o(B,null,P(V(p).quizzes,r=>(n(),o("div",{key:r.id,class:"w-full flex gap-4 items-center justify-between py-2"},[e("div",te,[e("div",le,[r.type==="MCQ"?(n(),o("i",se)):(n(),o("i",ie)),l[2]||(l[2]=e("div",{class:"text-xs"},"Quiz",-1))]),e("div",null,[e("h4",ne,g(r.title),1),e("div",ue,[l[3]||(l[3]=e("i",{class:"far fa-calendar-check"},null,-1)),e("p",null,g(a(r.opening_time)),1)])])]),e("div",oe,[r.user_quizzes_count?(n(),I(D,{key:0,to:{name:"QuizResultList",params:{quizId:r.id}},class:"btn-3 px-3.5"},{default:w(()=>[E(" Results ("+g(r.user_quizzes_count)+") ",1)]),_:2},1032,["to"])):Q("",!0),h(D,{to:{name:"QuizQuestionList",params:{quizId:r.id}},class:"btn-3 px-3.5"},{default:w(()=>[E(" Questions ("+g(r.questions_count)+") ",1)]),_:2},1032,["to"]),e("button",{class:"btn-1 pb-2",onClick:U=>b(r)},l[4]||(l[4]=[e("i",{class:"far fa-edit"},null,-1),e("span",{class:"hidden md:flex"},"Edit",-1)]),8,ae),e("button",{class:"btn-contrast pb-2",onClick:U=>A(r)},l[5]||(l[5]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",{class:"hidden md:flex"},"Delete",-1)]),8,de)])]))),128))])])):(n(),o("div",re,l[6]||(l[6]=[e("p",{class:"py-4"},"No quiz available.",-1)]))),u.value?(n(),o("div",pe,[e("div",ce,[e("div",{class:"flex justify-end"},[l[7]||(l[7]=e("div",{class:"mr-auto font-bold"},"Add Quiz Info",-1)),e("button",{onClick:f,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),l[8]||(l[8]=e("hr",{class:"my-3"},null,-1)),e("div",me,[h(Z,{quizType:t.value,onSubmit:i},null,8,["quizType"])])])])):Q("",!0),s.value?(n(),o("div",ve,[e("div",fe,[e("div",be,[e("div",ye,"Edit Form : "+g(m.value.title),1),e("button",{onClick:C,class:"text-red-500 hover:text-red-700 border-red-300 text-3xl border size-8 rounded-lg"}," × ")]),l[9]||(l[9]=e("hr",{class:"my-3"},null,-1)),e("div",xe,[h(J,{quiz:m.value,onClose:C},null,8,["quiz"])])])])):Q("",!0),z.value?(n(),o("div",_e,[e("div",ze,[e("div",{class:"flex justify-end"},[e("button",{onClick:T,class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",ge,[e("p",null,"Do you want to delete '"+g((j=d.value)==null?void 0:j.title)+"' quiz?",1),e("div",{class:"flex justify-center gap-4 mt-4"},[e("button",{class:"btn-1",onClick:L},"Yes"),e("button",{class:"btn-contrast",onClick:T},"No")])])])])):Q("",!0)])}}};export{we as default};
