import{D as H,E as f,r as q,d as c,e as d,f as s,t as x,m as T,y as I,q as h,x as k,F as A,g as D,p as b,M as U,v as E,H as C,I as S,w as F}from"./index-DpEJbF1j.js";import{_ as N}from"./TextEditor-DclLEu50.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V=H("question",{state:()=>({questions:[],error:null,loading:!1}),actions:{async index(t,i){var o,e;this.loading=!0,this.error=null;try{const n=await f.get(`/questions?chapter_id=${t}&question_type=${i}`);this.questions=(n==null?void 0:n.data)??[]}catch(n){this.error=((e=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:e.message)??"An error occurred while fetching questions"}finally{this.loading=!1}},async show(t){var i,o;this.error=null;try{const e=await f.get(`/questions/${t}`);return(e==null?void 0:e.data)??null}catch(e){throw this.error=((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.message)??"An error occurred while fetching the question",e}},async store(t){var i,o;this.error=null;try{const e=await f.post("/questions",t);this.questions.push(e==null?void 0:e.data)}catch(e){throw this.error=((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.message)??"An error occurred while creating the question",e}},async update(t,i){var o,e;this.error=null;try{const n=await f.put(`/questions/${t}`,i),a=this.questions.findIndex(u=>u.id===t);a!==-1&&(this.questions[a]=(n==null?void 0:n.data)??this.questions[a])}catch(n){throw this.error=((e=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:e.message)??"An error occurred while updating the question",n}},async delete(t){var i,o;this.error=null;try{await f.delete(`/questions/${t}`),this.questions=this.questions.filter(e=>e.id!==t)}catch(e){throw this.error=((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.message)??"An error occurred while deleting the question",e}}}}),L=t=>(C("data-v-b14001ad"),t=t(),S(),t),j={class:"modal"},z={class:"modal-content space-y-2 max-w-[720px] min-w-80 md:min-w-[480px] lg:min-w-[580px]"},G={key:0,class:"text-red-500"},J={key:1,class:"text-red-500"},K={key:2,class:"grid gap-4 py-4"},P=["onUpdate:modelValue"],R=["onUpdate:modelValue"],W={class:"grow-0 shrink-0 pt-1"},X=["onClick"],Y={class:"flex gap-4"},Z=L(()=>s("button",{type:"submit",class:"btn-2"},"Save Question",-1)),ee={__name:"AddQuestionModal",props:{chapterId:{required:!0},questionType:String},emits:["close"],setup(t,{emit:i}){const o=i,e=t,n=V(),a=q({}),u=q(""),r=q([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),y=()=>{r.value.push({option_text:"",is_correct:!1})},w=_=>{r.value.splice(_,1)},$=async()=>{a.value={};try{await n.store({chapter_id:e.chapterId,type:e.questionType,question_text:u.value,mcq_options:r.value}),u.value="",o("close")}catch(_){_.response&&_.response.data&&_.response.data.errors&&(a.value=_.response.data.errors)}};return(_,m)=>(c(),d("div",j,[s("div",z,[s("h2",null,x(t.questionType)+" Question",1),s("form",{onSubmit:T($,["prevent"]),class:"space-y-2"},[I(N,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=l=>u.value=l),placeholder:"Question Text",required:""},null,8,["modelValue"]),a.value.question_text?(c(),d("div",G,x(a.value.question_text[0]),1)):h("",!0),a.value.chapter_id?(c(),d("div",J,x(a.value.chapter_id[0]),1)):h("",!0),t.questionType==="MCQ"?(c(),d("div",K,[s("h3",null,[k(" MCQ Options "),s("span",{onClick:y,class:"px-2 pt-1 border rounded bg-green-200"}," + Add Option Field ")]),(c(!0),d(A,null,D(r.value,(l,v)=>(c(),d("div",{key:v,class:"flex items-center gap-4"},[b(s("input",{class:"grow-0 shrink-0",value:!0,name:"correct",type:"checkbox","onUpdate:modelValue":p=>l.is_correct=p},null,8,P),[[U,l.is_correct]]),b(s("input",{class:"input-1 text-black placeholder:italic",type:"text","onUpdate:modelValue":p=>l.option_text=p,placeholder:"Option",required:""},null,8,R),[[E,l.option_text]]),s("div",W,[s("i",{onClick:p=>w(v),class:"fa fa-trash text-red-700"},null,8,X)])]))),128))])):h("",!0),s("div",Y,[Z,s("button",{type:"button",onClick:m[1]||(m[1]=l=>o("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},Se=Q(ee,[["__scopeId","data-v-b14001ad"]]),M=t=>(C("data-v-f81944bd"),t=t(),S(),t),te={key:0,class:"modal"},se={class:"modal-content space-y-2"},oe=M(()=>s("h2",null,"Delete Question",-1)),ne={class:"py-2 space-y-1"},ae=M(()=>s("hr",null,null,-1)),ie=["innerHTML"],re=M(()=>s("hr",null,null,-1)),le={key:0,class:"text-red-500"},ce={class:"flex gap-4"},de={__name:"DeleteQuestionModal",props:{question:{type:Object,required:!0,default:()=>({name:"",id:null})}},emits:["close"],setup(t,{emit:i}){const o=i,e=t,n=V(),a=q({});F(()=>e.question,r=>{},{immediate:!0});const u=async()=>{a.value={};try{await n.delete(e.question.id),o("close")}catch(r){r.response&&r.response.data&&r.response.data.errors&&(a.value=r.response.data.errors)}};return(r,y)=>e.question?(c(),d("div",te,[s("div",se,[oe,s("div",ne,[k(" Are you sure you want to delete the question ID:"+x(t.question.id)+"? ",1),ae,s("div",{class:"overflow-hidden whitespace-pre-wrap line-clamp-3 italic",innerHTML:e.question.question_text},null,8,ie),re]),a.value.chapter_id?(c(),d("div",le,x(a.value.chapter_id[0]),1)):h("",!0),s("div",ce,[s("button",{onClick:u,class:"btn-2"},"Delete"),s("button",{type:"button",onClick:y[0]||(y[0]=w=>o("close")),class:"btn-contrast"},"Cancel")])])])):h("",!0)}},Qe=Q(de,[["__scopeId","data-v-f81944bd"]]),B=t=>(C("data-v-493b686c"),t=t(),S(),t),ue={class:"modal"},pe={class:"modal-content space-y-2 max-w-[720px] min-w-80 md:min-w-[480px] lg:min-w-[580px]"},_e=B(()=>s("h2",null,"Edit Question",-1)),he={key:0,class:"text-red-500"},me={key:1,class:"text-red-500"},ve={key:2,class:"grid gap-4 py-4"},qe=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],ye={class:"grow-0 shrink-0 pt-1"},fe=["onClick"],we={class:"flex gap-4"},ge=B(()=>s("button",{type:"submit",class:"btn-2"},"Save Question",-1)),be={__name:"EditQuestionModal",props:{question:{type:Object,required:!0},questionType:String},emits:["close"],setup(t,{emit:i}){var _,m;const o=i,e=t,n=V(),a=q(((_=e.question)==null?void 0:_.question_text)||""),u=q(((m=e.question)==null?void 0:m.mcq_options)||[]),r=q({}),y=()=>{u.value.push({option_text:"",is_correct:!1})},w=l=>{u.value.splice(l,1)};F(()=>e.question,l=>{l&&(a.value=l.question_text)},{immediate:!0});const $=async()=>{r.value={};try{await n.update(e.question.id,{question_text:a.value,chapter_id:e.question.chapter_id,mcq_options:u.value}),o("close")}catch(l){l.response&&l.response.data&&l.response.data.errors&&(r.value=l.response.data.errors)}};return(l,v)=>(c(),d("div",ue,[s("div",pe,[_e,s("form",{onSubmit:T($,["prevent"]),class:"space-y-2"},[I(N,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=p=>a.value=p),placeholder:"Question Text",required:""},null,8,["modelValue"]),r.value.question_text?(c(),d("div",he,x(r.value.question_text[0]),1)):h("",!0),r.value.chapter_id?(c(),d("div",me,x(r.value.chapter_id[0]),1)):h("",!0),t.questionType==="MCQ"?(c(),d("div",ve,[s("h3",null,[k(" MCQ Options "),s("span",{onClick:y,class:"px-2 pt-1 border rounded bg-green-200"}," + Add Option Field ")]),(c(!0),d(A,null,D(u.value,(p,O)=>(c(),d("div",{key:O,class:"flex items-center gap-4"},[b(s("input",{class:"grow-0 shrink-0",value:!0,name:"correct",type:"checkbox","onUpdate:modelValue":g=>p.is_correct=g},null,8,qe),[[U,p.is_correct]]),b(s("input",{class:"input-1 text-black placeholder:italic",type:"text","onUpdate:modelValue":g=>p.option_text=g,placeholder:"Option",required:""},null,8,xe),[[E,p.option_text]]),s("div",ye,[s("i",{onClick:g=>w(O),class:"fa fa-trash text-red-700"},null,8,fe)])]))),128))])):h("",!0),s("div",we,[ge,s("button",{type:"button",onClick:v[1]||(v[1]=p=>o("close")),class:"btn-contrast"},"Cancel")])],32)])]))}},Ve=Q(be,[["__scopeId","data-v-493b686c"]]);export{Se as A,Qe as D,Ve as E,V as u};
