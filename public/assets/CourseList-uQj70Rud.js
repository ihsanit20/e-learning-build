import{_ as V,u as B,i as P,e as o,o as C,j as $,a as e,t as m,b as M,y as F,z as I,A as T,d as R,h as X,g as E,v as k,I as Y,F as U,k as z,l as q,x as O,r as G,B as D,w as j}from"./index-BagFNDAU.js";const H=s=>(I("data-v-4f90f013"),s=s(),T(),s),J={key:0,class:"modal"},K={class:"relative card-bg p-4 md:p-8 max-w-3xl h-2/3"},Q={class:"overflow-y-scroll scrollbar space-y-2 p-2 bg-gray-100 rounded-md"},W=["src"],Z=H(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),ee={class:"flex w-full text-center gap-4"},te={class:"text-center text-green-600"},se={class:"text-center text-red-600"},le={class:"title-md"},oe={class:""},ae={class:"font-bold"},ne={class:""},ce={class:"title-sm"},ie={__name:"CourseViewModal",props:{course:Object,isOpen:Boolean},emits:["close"],setup(s,{emit:v}){const n=s,l=B(),h=v,u=P(()=>l.courses.find(t=>t.id===n.course.id)),r=()=>{h("close")},p=o(null),f=o(""),b=o(""),y=t=>{const c=t.target.files[0];c&&c.size>2*1024*1024?(b.value="File should be less than 2MB",p.value=null,document.getElementById("file-input").value=""):(p.value=c,b.value="")},g=async()=>{if(!p.value)return;const t=new FormData;t.append("thumbnail",p.value);try{await l.uploadThumbnail(n.course.id,t),f.value="Thumbnail uploaded successfully!",p.value=null,document.getElementById("file-input").value=""}catch{b.value="An error occurred while uploading the thumbnail"}};return(t,c)=>s.isOpen?(C(),$("div",J,[e("div",K,[e("div",{class:"flex top-2 right-2 z-50 absolute"},[e("button",{class:"bg-red-500 px-2 rounded-full text-white",onClick:r},"X")]),e("div",Q,[e("img",{class:"aspect-video object-cover rounded-lg",src:u.value.thumbnail,alt:"Thumbnail"},null,8,W),Z,e("div",ee,[e("input",{id:"file-input",type:"file",onChange:y,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:g},"Upload")]),e("p",te,m(f.value),1),e("p",se,m(b.value),1),e("h2",le,m(u.value.title),1),e("p",oe,m(u.value.description),1),e("p",ae,[M(" Starting From: "),e("span",null,m(u.value.start_date),1)]),e("p",ne,[M(" Price: ৳ "),e("span",ce,m(u.value.price),1)])]),e("div",null,[e("button",{class:"btn-contrast",onClick:r},"Close")])])])):F("",!0)}},ue=V(ie,[["__scopeId","data-v-4f90f013"]]),x=s=>(I("data-v-80b1a3a4"),s=s(),T(),s),de={key:0,class:"modal"},re={class:"card-bg p-4 md:p-8 w-full max-w-5xl h-2/3 mx-2"},pe=x(()=>e("h2",{class:"title-md text-center"},"Edit Course",-1)),_e={class:"overflow-y-scroll scrollbar space-y-2 bg-gray-100 p-2 rounded-md"},ve=x(()=>e("p",null,"Course Category",-1)),me=x(()=>e("option",{disabled:"",value:""},"Select a Category",-1)),he=["value"],fe=x(()=>e("p",null,"Course Title",-1)),be=x(()=>e("p",null,"Course Description",-1)),xe=x(()=>e("p",null,"Course Price",-1)),ye=x(()=>e("p",null,"Start Date",-1)),ge=x(()=>e("p",null,"Course Thumbnail (Upload)",-1)),Ce={class:"flex gap-2 items-center"},$e=["src"],we={class:"flex-1 space-y-2"},Me={class:"flex w-full text-center gap-4"},ke=x(()=>e("p",{class:"text-sm"}," **File size should be less than 2MB and aspect ratio 9:16 (720px x 1280px)** ",-1)),De={class:"text-center text-green-600"},Se={class:"text-center text-red-600"},Oe={__name:"CourseEditModal",props:{course:Object,isOpen:Boolean},emits:["close","update"],setup(s,{emit:v}){const n=s,l=v,h=B(),u=R(),r=o(""),p=o(""),f=o(""),b=o(""),y=o(""),g=o(""),t=o(null),c=o(""),w=o("");X(()=>n.course,a=>{a&&(r.value=a.title||"",p.value=a.description||"",f.value=a.price||"",b.value=a.thumbnail||"",y.value=a.start_date||"",g.value=a.course_category||"")},{immediate:!0});const d=async()=>{const a={id:n.course.id,title:r.value,description:p.value,price:f.value,start_date:y.value,course_category:g.value};await h.updateCourse(n.course.id,a),l("update",a),l("close")},S=()=>{l("close")};E(async()=>{await u.fetchCategories()});const A=a=>{const i=a.target.files[0];i&&i.size>2*1024*1024?(w.value="File should be less than 2MB",t.value=null,document.getElementById("file-input").value=""):(t.value=i,w.value="")},L=async()=>{if(!t.value)return;const a=new FormData;a.append("thumbnail",t.value);try{await h.uploadThumbnail(n.course.id,a),c.value="Thumbnail uploaded successfully!",t.value=null,document.getElementById("file-input").value="",l("close")}catch{w.value="An error occurred while uploading the thumbnail"}};return(a,i)=>s.isOpen?(C(),$("div",de,[e("div",re,[pe,e("div",_e,[ve,k(e("select",{"onUpdate:modelValue":i[0]||(i[0]=_=>g.value=_),class:"input-1"},[me,(C(!0),$(U,null,z(q(u).categories,_=>(C(),$("option",{key:_.id,value:_.name},m(_.name),9,he))),128))],512),[[Y,g.value]]),fe,k(e("input",{class:"input-1","onUpdate:modelValue":i[1]||(i[1]=_=>r.value=_),placeholder:"Title"},null,512),[[O,r.value]]),be,k(e("textarea",{class:"input-1 w-full","onUpdate:modelValue":i[2]||(i[2]=_=>p.value=_),placeholder:"Description"},null,512),[[O,p.value]]),xe,k(e("input",{class:"input-1","onUpdate:modelValue":i[3]||(i[3]=_=>f.value=_),placeholder:"Price"},null,512),[[O,f.value]]),ye,k(e("input",{class:"input-1",type:"date","onUpdate:modelValue":i[4]||(i[4]=_=>y.value=_),placeholder:"Start Date"},null,512),[[O,y.value]]),ge,e("div",Ce,[e("img",{class:"aspect-video object-cover h-28 rounded-md",src:b.value,alt:""},null,8,$e),e("div",we,[e("div",Me,[e("input",{id:"file-input",type:"file",onChange:A,class:"input-1"},null,32),e("button",{class:"btn-2",onClick:L},"Upload")]),ke,e("p",De,m(c.value),1),e("p",Se,m(w.value),1)])])]),e("div",{class:"flex justify-center gap-4"},[e("button",{class:"btn-2",onClick:d},"Save"),e("button",{class:"btn-contrast",onClick:S},"Close")])])])):F("",!0)}},Be=V(Oe,[["__scopeId","data-v-80b1a3a4"]]),N=s=>(I("data-v-47d6054d"),s=s(),T(),s),Ve={key:0,class:"modal"},Fe=N(()=>e("h2",{class:"title-md text-red-600 text-center"},"Confirm Delete",-1)),Ie=N(()=>e("p",{class:"text-center"},"Are you sure you want to delete this course?",-1)),Te={__name:"CourseDeleteModal",props:{isOpen:Boolean,course:Object},emits:["close","confirmDelete"],setup(s,{emit:v}){const n=s,l=v,h=B(),u=async()=>{n.course&&(await h.deleteCourse(n.course.id),l("confirmDelete"),l("close"))},r=()=>{l("close")};return(p,f)=>s.isOpen?(C(),$("div",Ve,[e("div",{class:"modal-content card-bg p-4 md:p-8"},[Fe,Ie,e("div",{class:"flex space-x-4 justify-center"},[e("button",{class:"btn-contrast",onClick:u},"Yes"),e("button",{class:"btn-2",onClick:r},"No")])])])):F("",!0)}},je=V(Te,[["__scopeId","data-v-47d6054d"]]),Ee={class:"my-container space-y-2 relative"},Ue={class:"flex justify-between items-center"},ze=e("h1",{class:"title-lg text-center"},"Courses",-1),Ne={class:"space-y-2"},Ae={class:"md:col-span-1 rounded md:px-2"},Le=["src"],Pe={class:"md:col-span-3 md:px-2"},Re={class:"title-md"},Xe={class:"line-clamp-1"},Ye={class:"md:col-span-1 flex items-center justify-center px-2"},qe={class:"title-sm"},Ge={class:"md:col-span-3 flex justify-between items-center gap-2 md:px-2"},He=["onClick"],Je=e("i",{class:"fas fa-eye"},null,-1),Ke=["onClick"],Qe=e("i",{class:"far fa-edit"},null,-1),We=["onClick"],Ze=e("i",{class:"fas fa-trash-alt"},null,-1),et=[Ze],tt=e("i",{class:"fas fa-plus"},null,-1),lt={__name:"CourseList",setup(s){const v=B(),n=o([]),l=o(null),h=o(!1),u=o(!1),r=o(!1);E(async()=>{await v.fetchCourses(),n.value=v.courses});const p=t=>{l.value=t,h.value=!0},f=t=>{l.value=t,u.value=!0},b=t=>{l.value=t,r.value=!0},y=async t=>{await v.updateCourse(t.id,t),n.value=v.courses},g=async()=>{await v.deleteCourse(l.value.id),n.value=v.courses};return(t,c)=>{const w=G("RouterLink");return C(),$("div",Ee,[e("div",Ue,[ze,D(w,{class:"btn-2",to:"/new"},{default:j(()=>[M("Add New")]),_:1})]),e("ul",Ne,[(C(!0),$(U,null,z(n.value,d=>(C(),$("li",{class:"card-bg md:py-2 p-4 md:p-2 grid md:grid-cols-8 md:divide-x-2",key:d.id},[e("div",Ae,[e("img",{class:"aspect-video object-cover",src:d.thumbnail,alt:"Thumbnail"},null,8,Le)]),e("div",Pe,[e("h2",Re,m(d.title),1),e("p",Xe,m(d.description),1)]),e("div",Ye,[e("p",qe,"Price: ৳"+m(d.price),1)]),e("div",Ge,[e("button",{class:"btn-1 pb-2",onClick:S=>p(d)},[Je,M("View")],8,He),e("button",{class:"btn-1 pb-2",onClick:S=>f(d)},[Qe,M("Edit")],8,Ke),e("button",{class:"btn-contrast pb-2",onClick:S=>b(d)},et,8,We),D(w,{class:"btn-1",to:"/courses/"+d.id+"/modules"},{default:j(()=>[tt,M("Module ")]),_:2},1032,["to"])])]))),128))]),D(ue,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:h.value,onClose:c[0]||(c[0]=d=>h.value=!1)},null,8,["course","isOpen"]),D(Be,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:u.value,onClose:c[1]||(c[1]=d=>u.value=!1),onUpdate:y},null,8,["course","isOpen"]),D(je,{class:"absolute top-0 shadow-2xl w-full z-40",course:l.value,isOpen:r.value,onClose:c[2]||(c[2]=d=>r.value=!1),onConfirmDelete:g},null,8,["course","isOpen"])])}}};export{lt as default};
