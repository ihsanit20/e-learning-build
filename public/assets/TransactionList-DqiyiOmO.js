import{J as T,K as P,u as k,r as n,o as U,d as i,e,z as d,N as m,A as x,F as w,f as D,g as p,t as o,i as c}from"./index-C2q63Jwc.js";const V=T("transaction",{state:()=>({transactions:[],error:null}),actions:{async fetchTransactions(h={}){var l,u;try{const a=await P.get("/transactions",{params:h});this.transactions=(a==null?void 0:a.data)??[]}catch(a){this.error=((u=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:u.message)??"An error occurred"}}}}),A={class:"container mx-auto p-4"},F={class:"mb-4 flex md:flex-row flex-col gap-4"},I=["value"],N={class:"overflow-x-auto"},B={class:"min-w-full bg-white border border-gray-200 rounded-lg text-sm"},L={class:"py-0.5 px-2 border"},M={class:"py-0.5 px-2 border"},O={class:"py-0.5 px-2 border"},R={class:"py-0.5 px-2 border"},X={class:"py-0.5 px-2 border"},j={class:"py-0.5 px-2 border text-green-600 font-semibold"},z={class:"py-0.5 px-2 border"},E={class:"py-0.5 px-2 border"},J={class:"mt-4 flex justify-between"},K=["disabled"],q=["disabled"],Q={__name:"TransactionList",setup(h){const l=V(),u=k(),a=n(new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0]),v=n(new Date().toISOString().split("T")[0]),b=n(1),y=n("paid"),_=n(""),f=n(""),g=n(""),r=async()=>{await l.fetchTransactions({from:a.value,to:v.value,page:b.value,status:y.value,course_id:_.value,trx_id:f.value,phone:g.value})};U(async()=>{await r(),await u.fetchCourses()});const S=()=>{l.transactions.next_page_url&&(b.value++,r())},C=()=>{l.transactions.prev_page_url&&(b.value--,r())};return(G,s)=>(c(),i("div",A,[s[9]||(s[9]=e("h1",{class:"text-2xl font-bold mb-4"},"Transaction List",-1)),e("div",F,[d(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>y.value=t),onChange:r,class:"input-1 w-full"},s[6]||(s[6]=[e("option",{value:"all"},"All",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"free"},"Free",-1)]),544),[[m,y.value]]),d(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t),class:"input-1 w-full",placeholder:"From Date"},null,512),[[x,a.value]]),d(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>v.value=t),class:"input-1 w-full",placeholder:"To Date"},null,512),[[x,v.value]]),d(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>_.value=t),onChange:r,class:"input-1 w-full"},[s[7]||(s[7]=e("option",{value:""},"Select Course",-1)),(c(!0),i(w,null,D(p(u).courses,t=>(c(),i("option",{key:t.id,value:t.id},o(t.title),9,I))),128))],544),[[m,_.value]]),d(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>f.value=t),class:"input-1 w-full",placeholder:"Search by TRX ID"},null,512),[[x,f.value]]),d(e("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=t=>g.value=t),class:"input-1 w-full",placeholder:"Search by Phone"},null,512),[[x,g.value]]),e("button",{onClick:r,class:"btn-2"},"Filter")]),e("div",N,[e("table",B,[s[8]||(s[8]=e("thead",null,[e("tr",{class:"bg-gray-200 text-left"},[e("th",{class:"py-0.5 px-2 border"},"Date"),e("th",{class:"py-0.5 px-2 border"},"User"),e("th",{class:"py-0.5 px-2 border"},"Phone"),e("th",{class:"py-0.5 px-2 border"},"Course"),e("th",{class:"py-0.5 px-2 border"},"TRX ID"),e("th",{class:"py-0.5 px-2 border"},"Paid Amount"),e("th",{class:"py-0.5 px-2 border"},"Coupon Code"),e("th",{class:"py-0.5 px-2 border"},"Discount")])],-1)),e("tbody",null,[(c(!0),i(w,null,D(p(l).transactions.data,t=>(c(),i("tr",{key:t.id,class:"border-b"},[e("td",L,o(t.date),1),e("td",M,o(t.user.name),1),e("td",O,o(t.user.phone),1),e("td",R,o(t.course.title),1),e("td",X,o(t.trx_id),1),e("td",j," ৳ "+o(t.paid_amount),1),e("td",z,o(t.coupon_code||"N/A"),1),e("td",E,"৳ "+o(t.discount_amount),1)]))),128))])])]),e("div",J,[e("button",{onClick:C,disabled:!p(l).transactions.prev_page_url,class:"bg-gray-300 px-4 py-2 rounded disabled:opacity-50"}," Previous ",8,K),e("span",null,"Page "+o(b.value)+" of "+o(p(l).transactions.last_page),1),e("button",{onClick:S,disabled:!p(l).transactions.next_page_url,class:"bg-gray-300 px-4 py-2 rounded disabled:opacity-50"}," Next ",8,q)])]))}};export{Q as default};
