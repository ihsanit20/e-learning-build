import{r as a,I as E,x,z as e,A as M,C as i,X as n,D as N,L as S,Z as B,M as A,U as u,a9 as r,y as b}from"./vue-CcEtAIOs.js";import{b as j}from"./index-CkAGF-aN.js";import{u as L}from"./user-BUr8jQ-O.js";import"./vendor-PJuFQbji.js";const z={class:"my-container max-w-xl"},F={class:"card-bg p-4 md:p-8 flex flex-col items-center relative space-y-4"},R={class:"bg-gray-200 size-40 rounded-full overflow-hidden relative"},T=["src"],I={class:"flex flex-col border w-full p-4 rounded"},X={class:"flex w-full text-center gap-4"},Z={key:0,class:"text-green-500"},q={key:0,class:"space-y-4 relative w-full"},G={class:"flex gap-4 justify-between items-center"},H={key:1,class:"w-full"},J={class:"flex gap-2 items-center"},K={class:"flex gap-2 items-center"},O={class:"flex gap-2 items-center"},Q={class:"flex gap-2 items-center"},W={class:"flex gap-2 items-center"},se={__name:"ProfileView",setup(Y){const y=j(),h=L(),d=a(!1),l=a({}),p=a(""),f=a(""),v=a(""),m=a(""),c=a(""),g=a(null),w=a(""),U=()=>{d.value=!0,p.value=l.value.name,f.value=l.value.phone,v.value=l.value.date_of_birth,m.value=l.value.email,c.value=l.value.address},_=()=>{d.value=!1},k=async()=>{const o={name:p.value,phone:f.value,date_of_birth:v.value,email:m.value,address:c.value};await y.updateProfile(o),d.value=!1,await P()},P=async()=>{await y.fetchUser(),l.value=y.user},C=o=>{g.value=o.target.files[0]},V=async()=>{if(!g.value)return;const o=new FormData;o.append("photo",g.value),await h.uploadPhoto(o),await P(),g.value=null,w.value="Photo upload successful"};return E(async()=>{await P()}),(o,t)=>{const D=B("RouterLink");return b(),x("div",z,[e("div",F,[e("div",R,[e("img",{class:"min-w-full min-h-full object-cover",src:l.value.photo,alt:"Profile Photo"},null,8,T)]),e("div",I,[t[5]||(t[5]=e("p",null,[e("strong",null,"Profile Photo")],-1)),e("div",X,[e("input",{type:"file",onChange:C,class:"input-1"},null,32),e("button",{class:"btn-1",onClick:V},"Upload")]),w.value?(b(),x("p",Z,i(w.value),1)):M("",!0)]),d.value?(b(),x("div",H,[t[20]||(t[20]=e("h1",{class:"text-center title-lg"},"Edit Profile",-1)),e("form",{onSubmit:A(k,["prevent"]),class:"space-y-2"},[e("div",J,[t[14]||(t[14]=e("label",{for:"name"},"Name:",-1)),u(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",class:"input-1"},null,512),[[r,p.value]])]),e("div",K,[t[15]||(t[15]=e("label",{for:"phone"},"Phone:",-1)),u(e("input",{id:"phone","onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),type:"text",class:"input-1"},null,512),[[r,f.value]])]),e("div",O,[t[16]||(t[16]=e("label",{for:"date_of_birth"},"Date of Birth:",-1)),u(e("input",{id:"date_of_birth","onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),type:"date",class:"input-1"},null,512),[[r,v.value]])]),e("div",Q,[t[17]||(t[17]=e("label",{for:"email"},"Email:",-1)),u(e("input",{id:"email","onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),type:"email",class:"input-1"},null,512),[[r,m.value]])]),e("div",W,[t[18]||(t[18]=e("label",{for:"address"},"Address:",-1)),u(e("input",{id:"address","onUpdate:modelValue":t[4]||(t[4]=s=>c.value=s),type:"text",class:"input-1"},null,512),[[r,c.value]])]),e("div",{class:"flex justify-center gap-4"},[e("button",{class:"btn-3",onClick:_},"Cancel"),t[19]||(t[19]=e("button",{class:"btn-2",type:"submit"},"Update",-1))])],32)])):(b(),x("div",q,[t[13]||(t[13]=e("h1",{class:"text-center title-lg"},"My Profile",-1)),e("p",null,[t[6]||(t[6]=e("strong",null,"Name:",-1)),n(" "+i(l.value.name),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"Phone:",-1)),n(" "+i(l.value.phone),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"Date of Birth:",-1)),n(" "+i(l.value.date_of_birth),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"Email:",-1)),n(" "+i(l.value.email),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"Address:",-1)),n(" "+i(l.value.address),1)]),e("div",G,[e("button",{class:"btn-2 flex-1",onClick:U},t[11]||(t[11]=[e("i",{class:"far fa-edit"},null,-1),n("Edit")])),N(D,{class:"btn-3 flex-1",to:"/profile/change-password"},{default:S(()=>t[12]||(t[12]=[n(" Change Password ")])),_:1})])]))])])}}};export{se as default};
