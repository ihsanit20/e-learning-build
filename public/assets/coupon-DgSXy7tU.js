import{d as c}from"./vue-CcEtAIOs.js";import{h as n}from"./index-BUiLc6ZB.js";const l=c("coupon",{state:()=>({coupons:[],userCoupons:[],userEarnings:[],error:null,loading:!1}),actions:{async fetchCoupons(){var e,s;this.loading=!0,this.error=null;try{const t=await n.get("/coupons");this.coupons=(t==null?void 0:t.data)??[]}catch(t){this.error=((s=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:s.message)??"An error occurred while fetching coupons"}finally{this.loading=!1}},async fetchUserCoupons(){var e,s;this.loading=!0,this.error=null;try{const t=await n.get("/user-coupons");this.userCoupons=(t==null?void 0:t.data)??[]}catch(t){this.error=((s=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:s.message)??"An error occurred while fetching user coupons"}finally{this.loading=!1}},async fetchUserEarnings(e={}){var s,t;console.log(e),this.loading=!0,this.error=null;try{const o=await n.get("/user-earnings",{params:e});this.userEarnings=(o==null?void 0:o.data)??[]}catch(o){this.error=((t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message)??"An error occurred while fetching user earnings"}finally{this.loading=!1}},async createCoupon(e){var s,t;this.error=null;try{const o=await n.post("/coupons",e);this.coupons.unshift({...o==null?void 0:o.data,highlight:!0})}catch(o){throw this.error=((t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message)??"An error occurred while creating the coupon",o}},async updateCoupon(e,s){var t,o;this.error=null;try{const r=await n.put(`/coupons/${e}`,s),a=this.coupons.findIndex(i=>i.id===e);a!==-1&&(this.coupons[a]={...(r==null?void 0:r.data)??this.coupons[a],highlight:!0})}catch(r){throw this.error=((o=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:o.message)??"An error occurred while updating the coupon",r}},async deleteCoupon(e){var s,t;this.error=null;try{await n.delete(`/coupons/${e}`),this.coupons=this.coupons.filter(o=>o.id!==e)}catch(o){throw this.error=((t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message)??"An error occurred while deleting the coupon",o}},async fetchCouponByCode(e,s={}){var t,o;try{if(e){const r=await n.get(`/coupons/${e}`,{params:s});return r==null?void 0:r.data}}catch(r){throw this.error=((o=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:o.message)??"An error occurred while fetching the coupon",r}}}});export{l as u};
