import{e as l,f as a,g as e,t as s,E as T,G as V,b as U,c as F,u as H,l as G,r as p,o as J,H as Y,F as j,h as q,p as g,x as M,z as K,I as W,n as S,j as X,B as Z,s as ee,i as A,q as L,R as te}from"./index-C-TFv4wk.js";const se={class:"table table-auto text-sm"},oe=e("td",{class:"text-right px-3 py-1.5"},"TotalQuestion",-1),le={class:"text-center px-3 py-1.5"},ae=e("td",{class:"text-right px-3 py-1.5"},"Answered Question",-1),ce={class:"text-center px-3 py-1.5"},ne=e("td",{class:"text-right px-3 py-1.5"},"Unanswered Question",-1),ie={class:"text-center px-3 py-1.5"},re=e("td",{class:"text-right px-3 py-1.5"},"Correct Mark",-1),de={class:"text-center px-3 py-1.5"},ue={class:"text-red-500"},_e=e("td",{class:"text-right px-3 py-1.5"},"Negative Mark",-1),pe={class:"text-center px-3 py-1.5"},xe={class:"border-t font-bold"},he=e("td",{class:"text-right px-3 py-1.5"},"Obtained Mark",-1),me={class:"text-center px-3 py-1.5"},ve={__name:"McqResult",props:{selectedExam:Object},setup(i){return(b,d)=>{var u,$,E,x,_,k,h,v,f,y,m,r,w,C;return l(),a("table",se,[e("tr",null,[oe,e("td",le,s((u=i.selectedExam)==null?void 0:u.exam_questions_count),1)]),e("tr",null,[ae,e("td",ce,s((E=($=i.selectedExam)==null?void 0:$.user_exam)==null?void 0:E.user_mcq_answers_count),1)]),e("tr",null,[ne,e("td",ie,s(((x=i.selectedExam)==null?void 0:x.exam_questions_count)-((k=(_=i.selectedExam)==null?void 0:_.user_exam)==null?void 0:k.user_mcq_answers_count)),1)]),e("tr",null,[re,e("td",de,s((v=(h=i.selectedExam)==null?void 0:h.user_exam)==null?void 0:v.mcq_correct_mark),1)]),e("tr",ue,[_e,e("td",pe,s((y=(f=i.selectedExam)==null?void 0:f.user_exam)==null?void 0:y.mcq_negative_mark),1)]),e("tr",xe,[he,e("td",me,s(((r=(m=i.selectedExam)==null?void 0:m.user_exam)==null?void 0:r.mcq_correct_mark)-((C=(w=i.selectedExam)==null?void 0:w.user_exam)==null?void 0:C.mcq_negative_mark)),1)])])}}},fe=T("courseProgress",{state:()=>({userId:null}),actions:{async completeLecture(i,b,d){try{return(await V.post(`/lectures/${b}/complete`,{course_id:i,is_completed:d})).data}catch(u){throw console.error("Error completing lecture:",u),u}},async getLectureCompletionStatus(i,b){try{return(await V.get(`/users/${i}/lectures/${b}/completion`)).data.is_completed}catch(d){throw console.error("Error fetching lecture completion status:",d),d}},setUserId(i){this.userId=i}}}),ye={class:"my-container py-4"},ge={key:0,class:"error"},be={key:1,class:"grid md:grid-cols-3 gap-4"},ke={class:"md:col-span-2 space-y-4"},we={class:"title-xl"},Ce=e("hr",{class:"my-2"},null,-1),$e={class:"relative pt-1"},Ee={class:"flex mb-2 items-center justify-between"},Me=e("div",null,[e("span",null,"Course Progress")],-1),Se={class:"text-right"},je={class:"text-xs font-semibold inline-block text-sky-600"},Le={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-sky-200"},qe=e("h2",{class:"title-lg"},"Modules",-1),ze={class:"space-y-4"},Pe=["onClick"],Re={class:"text-center border-2 rounded-md p-1.5"},Ve=e("div",{class:"text-xs md:text-sm"},"Module",-1),Ae={class:"flex-1"},Ie={class:"line-clamp-1"},Ne={key:0},Be={class:""},De={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Oe={class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},Qe={class:"text-xs"},Te={key:0},Ue={key:1},Fe={class:"flex-1"},He={key:0,class:"fas fa-check-circle text-green-700"},Ge={class:"text-gray-500 text-xs line-clamp-1"},Je=["onClick"],Ye={class:"flex items-center text-sm pt-2"},Ke=["id","checked","onChange","disabled"],We=["for"],Xe={class:"flex items-center gap-4 bg-gray-100 hover:bg-sky-100 p-2 rounded-md"},Ze=e("div",{class:"flex flex-col items-center justify-center border rounded-md p-2 gap-1"},[e("i",{class:"fas fa-file-alt"}),e("div",{class:"text-xs"},"Exam")],-1),et={class:"w-full"},tt={class:"title-sm"},st={key:0,class:"fas fa-check-circle text-green-700"},ot={class:"flex justify-between gap-2 text-sm text-gray-400"},lt={class:"flex items-center gap-2"},at=e("i",{class:"far fa-clock"},null,-1),ct=e("span",null,"Duration:",-1),nt=["onClick"],it={key:2},rt={key:3,class:"fixed inset-0 flex items-center justify-center z-50"},dt=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1),ut={class:"card-bg items-center justify-center p-6 md:p-8 overflow-hidden transform transition-all sm:max-w-lg sm:w-full text-center mx-2"},_t=e("h3",{class:"title-lg",id:"modal-title"},"Confirm Lecture Completion",-1),pt={class:""},xt={class:"text-red-500"},ht={class:"flex gap-4"},mt={class:"modal-content !px-3 !py-4 !max-w-xl"},vt={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},ft=e("div",{class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},[e("h3",{class:"title-lg text-center",id:"modal-title"},"সাবধান!! গুরুত্বপূর্ণ তথ্য সমূহ")],-1),yt={class:"size-full grow shrink border-y py-4 overflow-y-auto scrollbar"},gt={class:"w-full list-[square] space-y-3 list-outside pl-5"},bt=e("li",null," Exam ওপেন করা (“Start Exam” বাটনে ক্লিক) মাত্র আপনার টাইমার চালু হয়ে যাবে। আপনি Exam থেকে বেরিয়ে গেলেও টাইমার চলতে থাকবে এবং টাইম শেষে সাবমিট করতে হবে। ",-1),kt=e("li",null," Exam দেয়ার সময়ে যদি কোনো কারনে কানেকশন লস হয়ে যায় এবং আপনার টাইম শেষ হয়ে যায় আর সাবমিট করতে না পারেন, তাহলে আর Exam দেয়ার সুযোগ পাবেন না। ",-1),wt={class:"flex items-center gap-1 md:gap-2"},Ct=e("span",{class:"pt-1 text-xs md:text-base"},"আমি পরীক্ষা শুরু করতে চাই",-1),$t={class:"modal-content !px-3 !py-4 !max-w-sm"},Et={class:"w-full h-full flex flex-col justify-between items-center space-y-3 overflow-hidden"},Mt={class:"sticky top-0 grow-0 shrink-0 w-full bg-white z-10"},St={class:"title-lg text-center"},jt={class:"size-full grow shrink border-t py-4 overflow-y-auto scrollbar flex flex-col gap-4 justify-center items-center"},Lt=e("hr",{class:"w-full"},null,-1),qt={class:"w-full flex justify-between items-center"},Pt={__name:"MyCourseDetails",setup(i){const b=U(),d=F(),u=H(),$=fe(),E=G(),x=b.params.id,_=p(null),k=p(null),h=p([]),v=p(!1),f=p(!1),y=p(!1),m=p(null),r=p(null),w=p(!1),C=async()=>{await u.fetchPurchasedCourse(x),_.value=u.course};J(async()=>{try{await C()}catch(o){k.value=o.message||"An error occurred",o.response&&o.response.status===403&&d.push("/")}});const I=o=>{const n=h.value.indexOf(o);n===-1?h.value.push(o):h.value.splice(n,1)},N=o=>{o.type==="video"?(E.endedCallback=async()=>{const n=await $.completeLecture(x,o.id,!0);o.is_completed=n.is_completed,await C()},E.showPlayer(o.link)):window.open(o.link,"_blank")},B=o=>(r.value=o,o.is_completed?y.value=!0:f.value=!0),D=async()=>{if(m.value)try{await $.completeLecture(x,m.value.id,!0),m.value.is_completed=!0,v.value=!1,await C()}catch(o){console.error("Error confirming lecture completion:",o)}},O=o=>{m.value=o,v.value=!0},Q=async()=>{d.push({path:`/my/course/${x}/exam/${r.value.id}`})};return(o,n)=>{var z,P;return l(),a(j,null,[e("div",ye,[k.value?(l(),a("div",ge,s(k.value),1)):_.value?(l(),a("div",be,[e("div",ke,[e("div",null,[e("h1",we,s(_.value.title),1),Ce]),e("div",null,[e("div",$e,[e("div",Ee,[Me,e("div",Se,[e("span",je,s(_.value.progress)+"% ",1)])]),e("div",Le,[e("div",{style:Y({width:_.value.progress+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-sky-600"},null,4)])])]),qe,e("ul",ze,[(l(!0),a(j,null,q(_.value.modules,c=>(l(),a("li",{class:"card-bg p-4",key:c.id},[e("div",{onClick:t=>I(c.id),class:"flex flex-1 items-center gap-4 cursor-pointer"},[e("div",Re,[e("div",{class:S(["text-xl font-bold text-orange-500",{"!text-gray-400":c.is_active==0}])},s(c.order),3),Ve]),e("div",Ae,[e("h4",{class:S(["title-md",{"text-gray-400":c.is_active==0}])},s(c.title),3),e("p",Ie,s(c.description),1)]),e("button",null,[e("i",{class:S(h.value.includes(c.id)?"fas fa-angle-up":"fas fa-angle-down")},null,2)])],8,Pe),h.value.includes(c.id)?(l(),a("div",Ne,[e("ul",Be,[(l(!0),a(j,null,q(c.lectures,t=>(l(),a("li",{class:"pt-6",key:t.id},[e("div",De,[e("div",Oe,[e("i",{class:S(t.type==="virtual_platform"?"fas fa-video":"fas fa-play-circle")},null,2),e("div",Qe,[t.type==="virtual_platform"?(l(),a("p",Te,"Video")):(l(),a("p",Ue,"Lecture"))])]),e("div",Fe,[e("h4",null,[t.is_completed?(l(),a("i",He)):g("",!0),L(" "+s(t.title),1)]),e("p",Ge,s(t.description),1)]),e("button",{onClick:M(R=>N(t),["prevent"]),type:"button",class:"btn-2"},s(t.type==="video"?"Play Video":"Join Live"),9,Je)]),e("div",Ye,[e("input",{type:"checkbox",id:`completed-${t.id}`,class:"form-checkbox h-3 w-3 text-sky-600 transition duration-150 ease-in-out",checked:t.is_completed,onChange:R=>O(t),disabled:t.is_completed},null,40,Ke),e("label",{for:`completed-${t.id}`,class:"ml-2"}," Have you completed this lecture? ",8,We)])]))),128)),(l(!0),a(j,null,q(c.exams,t=>(l(),a("li",{class:"pt-6",key:t.id},[e("div",Xe,[Ze,e("div",et,[e("h4",tt,[t.is_completed?(l(),a("i",st)):g("",!0),L(" "+s(t.title),1)]),e("div",ot,[e("div",lt,[at,e("p",null,[ct,L(" "+s(t.duration),1)])])])]),e("button",{onClick:M(R=>B(t),["prevent"]),type:"button",class:"btn-2"},s(t.is_completed?"result":"Open"),9,nt)])]))),128))])])):g("",!0)]))),128))])])])):(l(),a("div",it,"Loading...")),v.value?(l(),a("div",rt,[dt,e("div",ut,[_t,e("div",pt,[e("p",xt,' Are you sure you have completed the lecture "'+s((z=m.value)==null?void 0:z.title)+'"? ',1)]),e("div",ht,[e("button",{onClick:D,type:"button",class:"btn-2"},"Yes"),e("button",{onClick:n[0]||(n[0]=c=>v.value=!1),type:"button",class:"btn-3"},"No")])])])):g("",!0)]),f.value?(l(),a("div",{key:0,class:"modal",onClick:n[3]||(n[3]=M(c=>f.value=!1,["self"]))},[e("div",mt,[e("div",vt,[ft,e("div",yt,[e("ul",gt,[e("li",null," Exam এর সময়সীমা থাকবে "+s((P=r.value)==null?void 0:P.duration)+" মিনিট। এই সময়ের মধ্যে আপনাকে Exam সাবমিট করতে হবে। ",1),bt,kt])]),e("form",{onSubmit:M(Q,["prevent"]),class:"grow-0 shrink-0 w-full flex justify-end gap-1 md:gap-4"},[e("button",{onClick:n[1]||(n[1]=c=>f.value=!1),type:"button",class:"mr-auto btn-contrast px-1 md:px-4 text-xs md:text-base"}," Cancel "),e("label",wt,[K(e("input",{"onUpdate:modelValue":n[2]||(n[2]=c=>w.value=c),type:"checkbox",required:""},null,512),[[W,w.value]]),Ct]),e("button",{type:"submit",class:S(["btn-2 disabled:opacity-50 px-1 md:px-4 text-xs md:text-base",{"opacity-50":!w.value}])}," Start Exam ",2)],32)])])])):g("",!0),y.value?(l(),a("div",{key:1,class:"modal",onClick:n[5]||(n[5]=M(c=>y.value=!1,["self"]))},[e("div",$t,[e("div",Et,[e("div",Mt,[e("h3",St,"Result of "+s(r.value.title),1)]),e("div",jt,[r.value?(l(),X(ve,{key:0,selectedExam:r.value},null,8,["selectedExam"])):g("",!0),Lt,e("div",qt,[e("button",{onClick:n[4]||(n[4]=c=>y.value=!1),type:"button",class:"btn-contrast"}," Close "),Z(A(te),{to:{name:"My Exam AnswerSheet",params:{courseId:A(x),examId:r.value.id}},class:"btn-2"},{default:ee(()=>[L(" Answer Sheet ")]),_:1},8,["to"])])])])])])):g("",!0)],64)}}};export{Pt as default};
