import{d as n}from"./vue-CcEtAIOs.js";import{j as o}from"./index-Co5G-AfD.js";const l=n("purchase",{state:()=>({purchases:[],purchase:null,error:null}),actions:{async fetchPurchases(a={}){var s,e;try{const t=await o.get("/user/courses",{params:a,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.purchases=t.data}catch(t){this.error=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.message)||t.message}},async createPayment(a,s={}){var e,t;try{return(await o.post(`courses/${a}/payment`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(r){throw this.error=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||r.message,r}},async executePayment(a,s={}){var e,t;try{return(await o.post(`courses/${a}/enroll`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(r){throw this.error=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||r.message,r}},async createBundlePayment(a,s={}){var e,t;try{return(await o.post(`bundles/${a}/payment`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(r){throw this.error=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||r.message,r}},async executeBundlePayment(a,s={}){var e,t;try{return(await o.post(`bundles/${a}/enroll`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(r){throw this.error=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||r.message,r}},async findNotEnrolledUserByPhone(a,s){try{return(await o.get(`/courses/${a}/not-enrolled-user-by-phone/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw console.log(e),e}},async findNotBundleEnrolledUserByPhone(a,s){try{return(await o.get(`/bundles/${a}/not-enrolled-user-by-phone/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw console.log(e),e}}}});export{l as u};
