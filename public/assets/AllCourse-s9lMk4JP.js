import{u as w,a as S,b as q,_ as I,c as L}from"./index-Co5G-AfD.js";import{r as c,I as R,P as $,a2 as D,Q as b,x as l,z as o,H as h,F as d,G as v,B as N,T as z,Z as E,y as r,C as F,O as A,L as O,D as V}from"./vue-CcEtAIOs.js";import"./vendor-PJuFQbji.js";const j={class:"my-container space-y-6 py-2"},G={class:"flex flex-wrap justify-center md:gap-4 gap-2"},H=["onClick"],M={key:0,class:"grid md:grid-cols-3 gap-4"},P={key:1,class:"grid md:grid-cols-3 gap-4"},Q={key:2},U={__name:"AllCourse",setup(T){const m=w(),y=S(),u=q(),p=c([]),f=c([]),a=c("All Courses"),n=$(),B=z(),C=c(!0);R(async()=>{await m.fetchBundles(),await y.fetchCourses({status:"active"}),await u.fetchCategories(),p.value=m.bundles.sort((t,e)=>e.id-t.id),f.value=y.courses.sort((t,e)=>e.id-t.id),n.query.category&&(a.value=n.query.category),C.value=!1}),D(()=>n.query.category,t=>{a.value=t||"All Courses"});const _=b(()=>{if(a.value==="All Courses")return f.value;const t=u.categories.find(e=>e.name===a.value);return f.value.filter(e=>parseInt(e.category_id)===parseInt(t==null?void 0:t.id))}),k=b(()=>{if(a.value==="All Courses")return p.value;const t=u.categories.find(e=>e.name===a.value);return t?p.value.filter(e=>{var i;return(i=e==null?void 0:e.bundle_courses)==null?void 0:i.some(s=>{var g;return parseInt((g=s==null?void 0:s.course)==null?void 0:g.category_id)===parseInt(t.id)})}):[]}),x=t=>{a.value=t,B.replace({query:{...n.query,category:t}})};return(t,e)=>{const i=E("RouterLink");return r(),l("div",j,[e[2]||(e[2]=o("div",null,[o("h2",{class:"title-xl text-center"},"Our Courses"),o("p",{class:"text-center"},"Explore our courses at a glance")],-1)),o("div",null,[o("div",G,[o("button",{onClick:e[0]||(e[0]=s=>x("All Courses")),class:h({"btn-2":a.value==="All Courses","btn-3":a.value!=="All Courses"})}," All Courses ",2),(r(!0),l(d,null,v(N(u).categories,s=>(r(),l("button",{key:s.id,onClick:g=>x(s.name),class:h({"btn-2":a.value===s.name,"btn-3":a.value!==s.name})},F(s.name),11,H))),128))])]),C.value?(r(),l("div",M,[(r(),l(d,null,v(3,s=>o("div",{class:"card-bg p-4 animate-pulse items-center",key:s},e[1]||(e[1]=[o("i",{class:"fas fa-image text-gray-300 text-[250px]"},null,-1),o("div",{class:"h-8 w-28 bg-gray-200 rounded-full mt-4"},null,-1)]))),64))])):_.value.length+k.value.length>0?(r(),l("div",P,[(r(!0),l(d,null,v(k.value,s=>(r(),A(i,{key:s.id,to:{name:"BundleCourseDetails",params:{id:s.id}},class:"grid"},{default:O(()=>[V(I,{bundle:s},null,8,["bundle"])]),_:2},1032,["to"]))),128)),(r(!0),l(d,null,v(_.value,s=>(r(),A(L,{key:s.id,course:s},null,8,["course"]))),128))])):(r(),l("p",Q,"No courses available"))])}}};export{U as default};
